!function(window,undefined){function createFlags(flags){var object=flagsCache[flags]={},i,length;for(flags=flags.split(/\s+/),i=0,length=flags.length;length>i;i++)object[flags[i]]=!0;return object}function dataAttr(elem,key,data){if(data===undefined&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if(data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:jQuery.isNumeric(data)?parseFloat(data):rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){for(var name in obj){if("data"===name&&jQuery.isEmptyObject(obj[name]))continue;if("toJSON"!==name)return!1}return!0}function handleQueueMarkDefer(elem,type,src){var deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",defer=jQuery._data(elem,deferDataKey);if(!(!defer||"queue"!==src&&jQuery._data(elem,queueDataKey)||"mark"!==src&&jQuery._data(elem,markDataKey)))setTimeout(function(){if(!jQuery._data(elem,queueDataKey)&&!jQuery._data(elem,markDataKey))jQuery.removeData(elem,deferDataKey,!0),defer.fire()},0)}function returnFalse(){return!1}function returnTrue(){return!0}function isDisconnected(node){return!node||!node.parentNode||11===node.parentNode.nodeType}function winnow(elements,qualifier,keep){if(qualifier=qualifier||0,jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});else if(qualifier.nodeType)return jQuery.grep(elements,function(elem,i){return elem===qualifier===keep});else if("string"==typeof qualifier){var filtered=jQuery.grep(elements,function(elem){return 1===elem.nodeType});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);else qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem,i){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function root(elem,cur){return jQuery.nodeName(elem,"table")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function cloneCopyEvent(src,dest){if(1!==dest.nodeType||!jQuery.hasData(src))return;var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type+(events[type][i].namespace?".":"")+events[type][i].namespace,events[type][i],events[type][i].data)}if(curData.data)curData.data=jQuery.extend({},curData.data)}function cloneFixAttributes(src,dest){var nodeName;if(1!==dest.nodeType)return;if(dest.clearAttributes)dest.clearAttributes();if(dest.mergeAttributes)dest.mergeAttributes(src);if(nodeName=dest.nodeName.toLowerCase(),"object"===nodeName)dest.outerHTML=src.outerHTML;else if("input"===nodeName&&("checkbox"===src.type||"radio"===src.type)){if(src.checked)dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value)dest.value=src.value}else if("option"===nodeName)dest.selected=src.defaultSelected;else if("input"===nodeName||"textarea"===nodeName)dest.defaultValue=src.defaultValue;dest.removeAttribute(jQuery.expando)}function getAll(elem){if("undefined"!=typeof elem.getElementsByTagName)return elem.getElementsByTagName("*");else if("undefined"!=typeof elem.querySelectorAll)return elem.querySelectorAll("*");else return[]}function fixDefaultChecked(elem){if("checkbox"===elem.type||"radio"===elem.type)elem.defaultChecked=elem.checked}function findInputs(elem){var nodeName=(elem.nodeName||"").toLowerCase();if("input"===nodeName)fixDefaultChecked(elem);else if("script"!==nodeName&&"undefined"!=typeof elem.getElementsByTagName)jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked)}function shimCloneNode(elem){var div=document.createElement("div");return safeFragment.appendChild(div),div.innerHTML=elem.outerHTML,div.firstChild}function evalScript(i,elem){if(elem.src)jQuery.ajax({url:elem.src,async:!1,dataType:"script"});else jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"/*$0*/"));if(elem.parentNode)elem.parentNode.removeChild(elem)}function getWH(elem,name,extra){var val="width"===name?elem.offsetWidth:elem.offsetHeight,which="width"===name?cssWidth:cssHeight,i=0,len=which.length;if(val>0){if("border"!==extra)for(;len>i;i++){if(!extra)val-=parseFloat(jQuery.css(elem,"padding"+which[i]))||0;if("margin"===extra)val+=parseFloat(jQuery.css(elem,extra+which[i]))||0;else val-=parseFloat(jQuery.css(elem,"border"+which[i]+"Width"))||0}return val+"px"}if(val=curCSS(elem,name,name),0>val||null==val)val=elem.style[name]||0;if(val=parseFloat(val)||0,extra)for(;len>i;i++){if(val+=parseFloat(jQuery.css(elem,"padding"+which[i]))||0,"padding"!==extra)val+=parseFloat(jQuery.css(elem,"border"+which[i]+"Width"))||0;if("margin"===extra)val+=parseFloat(jQuery.css(elem,extra+which[i]))||0}return val+"px"}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if("string"!=typeof dataTypeExpression)func=dataTypeExpression,dataTypeExpression="*";if(jQuery.isFunction(func))for(var dataTypes=dataTypeExpression.toLowerCase().split(rspacesAjax),i=0,length=dataTypes.length,dataType,list,placeBefore;length>i;i++){if(dataType=dataTypes[i],placeBefore=/^\+/.test(dataType))dataType=dataType.substr(1)||"*";list=structure[dataType]=structure[dataType]||[],list[placeBefore?"unshift":"push"](func)}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0],inspected=inspected||{},inspected[dataType]=!0;for(var list=structure[dataType],i=0,length=list?list.length:0,executeOnly=structure===prefilters,selection;length>i&&(executeOnly||!selection);i++)if(selection=list[i](options,originalOptions,jqXHR),"string"==typeof selection)if(!executeOnly||inspected[selection])selection=undefined;else options.dataTypes.unshift(selection),selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected);if((executeOnly||!selection)&&!inspected["*"])selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected);return selection}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)if(src[key]!==undefined)(flatOptions[key]?target:deep||(deep={}))[key]=src[key];if(deep)jQuery.extend(!0,target,deep)}function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix))add(prefix,v);else buildParams(prefix+"["+("object"==typeof v||jQuery.isArray(v)?i:"")+"]",v,traditional,add)});else if(!traditional&&null!=obj&&"object"==typeof obj)for(var name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}function ajaxHandleResponses(s,jqXHR,responses){var contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields,ct,type,finalDataType,firstDataType;for(type in responseFields)if(type in responses)jqXHR[responseFields[type]]=responses[type];for(;"*"===dataTypes[0];)if(dataTypes.shift(),ct===undefined)ct=s.mimeType||jqXHR.getResponseHeader("content-type");if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType)firstDataType=type}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0])dataTypes.unshift(finalDataType);return responses[finalDataType]}}function ajaxConvert(s,response){if(s.dataFilter)response=s.dataFilter(response,s.dataType);var dataTypes=s.dataTypes,converters={},i,key,length=dataTypes.length,tmp,current=dataTypes[0],prev,conversion,conv,conv1,conv2;for(i=1;length>i;i++){if(1===i)for(key in s.converters)if("string"==typeof key)converters[key.toLowerCase()]=s.converters[key];if(prev=current,current=dataTypes[i],"*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conversion=prev+" "+current,conv=converters[conversion]||converters["* "+current],!conv){conv2=undefined;for(conv1 in converters)if(tmp=conv1.split(" "),tmp[0]===prev||"*"===tmp[0])if(conv2=converters[tmp[1]+" "+current]){if(conv1=converters[conv1],conv1===!0)conv=conv2;else if(conv2===!0)conv=conv1;break}}if(!conv&&!conv2)jQuery.error("No conversion from "+conversion.replace(" "," to "));if(conv!==!0)response=conv?conv(response):conv2(conv1(response))}}return response}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function createFxNow(){return setTimeout(clearFxNow,0),fxNow=jQuery.now()}function clearFxNow(){fxNow=undefined}function genFx(type,num){var obj={};return jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type}),obj}function defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var body=document.body,elem=jQuery("<"+nodeName+">").appendTo(body),display=elem.css("display");if(elem.remove(),"none"===display||""===display){if(!iframe)iframe=document.createElement("iframe"),iframe.frameBorder=iframe.width=iframe.height=0;if(body.appendChild(iframe),!iframeDoc||!iframe.createElement)iframeDoc=(iframe.contentWindow||iframe.contentDocument).document,iframeDoc.write(("CSS1Compat"===document.compatMode?"<!doctype html>":"")+"<html><body>"),iframeDoc.close();elem=iframeDoc.createElement(nodeName),iframeDoc.body.appendChild(elem),display=jQuery.css(elem,"display"),body.removeChild(iframe)}elemdisplay[nodeName]=display}return elemdisplay[nodeName]}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType?elem.defaultView||elem.parentWindow:!1}var document=window.document,navigator=window.navigator,location=window.location,jQuery=function(){function doScrollCheck(){if(jQuery.isReady)return;try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(doScrollCheck,1)}jQuery.ready()}var jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},_jQuery=window.jQuery,_$=window.$,rootjQuery,quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rnotwhite=/\S/,trimLeft=/^\s+/,trimRight=/\s+$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,rdashAlpha=/-([a-z]|[0-9])/gi,rmsPrefix=/^-ms-/,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},userAgent=navigator.userAgent,browserMatch,readyList,DOMContentLoaded,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};if(jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector)return this;if(selector.nodeType)return this.context=this[0]=selector,this.length=1,this;if("body"===selector&&!context&&document.body)return this.context=document,this[0]=document.body,this.selector=selector,this.length=1,this;if("string"==typeof selector){if("<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3)match=[null,selector,null];else match=quickExpr.exec(selector);if(match&&(match[1]||!context))if(match[1]){if(context=context instanceof jQuery?context[0]:context,doc=context?context.ownerDocument||context:document,ret=rsingleTag.exec(selector))if(jQuery.isPlainObject(context))selector=[document.createElement(ret[1])],jQuery.fn.attr.call(selector,context,!0);else selector=[doc.createElement(ret[1])];else ret=jQuery.buildFragment([match[1]],[doc]),selector=(ret.cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes;return jQuery.merge(this,selector)}else{if(elem=document.getElementById(match[2]),elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}else if(!context||context.jquery)return(context||rootjQuery).find(selector);else return this.constructor(context).find(selector)}else if(jQuery.isFunction(selector))return rootjQuery.ready(selector);if(selector.selector!==undefined)this.selector=selector.selector,this.context=selector.context;return jQuery.makeArray(selector,this)},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return slice.call(this,0)},get:function(num){return null==num?this.toArray():0>num?this[this.length+num]:this[num]},pushStack:function(elems,name,selector){var ret=this.constructor();if(jQuery.isArray(elems))push.apply(ret,elems);else jQuery.merge(ret,elems);if(ret.prevObject=this,ret.context=this.context,"find"===name)ret.selector=this.selector+(this.selector?" ":"")+selector;else if(name)ret.selector=this.selector+"."+name+"("+selector+")";return ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.bindReady(),readyList.add(fn),this},eq:function(i){return i=+i,-1===i?this.slice(i):this.slice(i,i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;if("boolean"==typeof target)deep=target,target=arguments[1]||{},i=2;if("object"!=typeof target&&!jQuery.isFunction(target))target={};if(length===i)target=this,--i;for(;length>i;i++)if(null!=(options=arguments[i]))for(name in options){if(src=target[name],copy=options[name],target===copy)continue;if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray)copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[];else clone=src&&jQuery.isPlainObject(src)?src:{};target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined)target[name]=copy}return target},jQuery.extend({noConflict:function(deep){if(window.$===jQuery)window.$=_$;if(deep&&window.jQuery===jQuery)window.jQuery=_jQuery;return jQuery},isReady:!1,readyWait:1,holdReady:function(hold){if(hold)jQuery.readyWait++;else jQuery.ready(!0)},ready:function(wait){if(wait===!0&&!--jQuery.readyWait||wait!==!0&&!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready,1);if(jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0)return;if(readyList.fireWith(document,[jQuery]),jQuery.fn.trigger)jQuery(document).trigger("ready").off("ready")}},bindReady:function(){if(readyList)return;if(readyList=jQuery.Callbacks("once memory"),"complete"===document.readyState)return setTimeout(jQuery.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),window.addEventListener("load",jQuery.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded),window.attachEvent("onload",jQuery.ready);var toplevel=!1;try{toplevel=null==window.frameElement}catch(e){}if(document.documentElement.doScroll&&toplevel)doScrollCheck()}},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return obj&&"object"==typeof obj&&"setInterval"in obj},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return null==obj?String(obj):class2type[toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var key;for(key in obj);return key===undefined||hasOwn.call(obj,key)},isEmptyObject:function(obj){for(var name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseJSON:function(data){if("string"!=typeof data||!data)return null;if(data=jQuery.trim(data),window.JSON&&window.JSON.parse)return window.JSON.parse(data);if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))return new Function("return "+data)();jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml,tmp;try{if(window.DOMParser)tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml");else xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data)}catch(e){xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length)jQuery.error("Invalid XML: "+data);return xml},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data))(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args)if(isObj){for(name in object)if(callback.apply(object[name],args)===!1)break}else for(;length>i&&callback.apply(object[i++],args)!==!1;);else if(isObj){for(name in object)if(callback.call(object[name],name,object[name])===!1)break}else for(;length>i&&callback.call(object[i],i,object[i++])!==!1;);return object},trim:trim?function(text){return null==text?"":trim.call(text)}:function(text){return null==text?"":text.toString().replace(trimLeft,"").replace(trimRight,"")},makeArray:function(array,results){var ret=results||[];if(null!=array){var type=jQuery.type(array);if(null==array.length||"string"===type||"function"===type||"regexp"===type||jQuery.isWindow(array))push.call(ret,array);else jQuery.merge(ret,array)}return ret},inArray:function(elem,array,i){var len;if(array){if(indexOf)return indexOf.call(array,elem,i);for(len=array.length,i=i?0>i?Math.max(0,len+i):i:0;len>i;i++)if(i in array&&array[i]===elem)return i}return-1},merge:function(first,second){var i=first.length,j=0;if("number"==typeof second.length)for(var l=second.length;l>j;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var ret=[],retVal;inv=!!inv;for(var i=0,length=elems.length;length>i;i++)if(retVal=!!callback(elems[i],i),inv!==retVal)ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&"number"==typeof length&&(length>0&&elems[0]&&elems[length-1]||0===length||jQuery.isArray(elems));if(isArray){for(;length>i;i++)if(value=callback(elems[i],i,arg),null!=value)ret[ret.length]=value}else for(key in elems)if(value=callback(elems[key],key,arg),null!=value)ret[ret.length]=value;return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){if("string"==typeof context){var tmp=fn[context];context=fn,fn=tmp}if(!jQuery.isFunction(fn))return undefined;var args=slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(slice.call(arguments)))};return proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++,proxy},access:function(elems,key,value,exec,fn,pass){var length=elems.length;if("object"==typeof key){for(var k in key)jQuery.access(elems,k,key[k],exec,fn,value);return elems}if(value!==undefined){exec=!pass&&exec&&jQuery.isFunction(value);for(var i=0;length>i;i++)fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);return elems}return length?fn(elems[0],key):undefined},now:function(){return(new Date).getTime()},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,this),jQuerySub.superclass=this,jQuerySub.fn=jQuerySub.prototype=this(),jQuerySub.fn.constructor=jQuerySub,jQuerySub.sub=this.sub,jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub))context=jQuerySub(context);return jQuery.fn.init.call(this,selector,context,rootjQuerySub)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub},browser:{}}),jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),browserMatch=jQuery.uaMatch(userAgent),browserMatch.browser)jQuery.browser[browserMatch.browser]=!0,jQuery.browser.version=browserMatch.version;if(jQuery.browser.webkit)jQuery.browser.safari=!0;if(rnotwhite.test(" "))trimLeft=/^[\s\xA0]+/,trimRight=/[\s\xA0]+$/;if(rootjQuery=jQuery(document),document.addEventListener)DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,!1),jQuery.ready()};else if(document.attachEvent)DOMContentLoaded=function(){if("complete"===document.readyState)document.detachEvent("onreadystatechange",DOMContentLoaded),jQuery.ready()};return jQuery}(),flagsCache={};jQuery.Callbacks=function(flags){flags=flags?flagsCache[flags]||createFlags(flags):{};var list=[],stack=[],memory,firing,firingStart,firingLength,firingIndex,add=function(args){var i,length,elem,type,actual;for(i=0,length=args.length;length>i;i++)if(elem=args[i],type=jQuery.type(elem),"array"===type)add(elem);else if("function"===type)if(!flags.unique||!self.has(elem))list.push(elem)},fire=function(context,args){for(args=args||[],memory=!flags.memory||[context,args],firing=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(context,args)===!1&&flags.stopOnFalse){memory=!0;break}if(firing=!1,list)if(!flags.once){if(stack&&stack.length)memory=stack.shift(),self.fireWith(memory[0],memory[1])}else if(memory===!0)self.disable();else list=[]},self={add:function(){if(list){var length=list.length;if(add(arguments),firing)firingLength=list.length;else if(memory&&memory!==!0)firingStart=length,fire(memory[0],memory[1])}return this},remove:function(){if(list)for(var args=arguments,argIndex=0,argLength=args.length;argLength>argIndex;argIndex++)for(var i=0;i<list.length;i++)if(args[argIndex]===list[i]){if(firing)if(firingLength>=i)if(firingLength--,firingIndex>=i)firingIndex--;if(list.splice(i--,1),flags.unique)break}return this},has:function(fn){if(list)for(var i=0,length=list.length;length>i;i++)if(fn===list[i])return!0;return!1},empty:function(){return list=[],this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){if(stack=undefined,!memory||memory===!0)self.disable();return this},locked:function(){return!stack},fireWith:function(context,args){if(stack)if(firing){if(!flags.once)stack.push([context,args])}else if(!flags.once||!memory)fire(context,args);return this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!memory}};return self};var sliceDeferred=[].slice;jQuery.extend({Deferred:function(func){var doneList=jQuery.Callbacks("once memory"),failList=jQuery.Callbacks("once memory"),progressList=jQuery.Callbacks("memory"),state="pending",lists={resolve:doneList,reject:failList,notify:progressList},promise={done:doneList.add,fail:failList.add,progress:progressList.add,state:function(){return state},isResolved:doneList.fired,isRejected:failList.fired,then:function(doneCallbacks,failCallbacks,progressCallbacks){return deferred.done(doneCallbacks).fail(failCallbacks).progress(progressCallbacks),this},always:function(){return deferred.done.apply(deferred,arguments).fail.apply(deferred,arguments),this},pipe:function(fnDone,fnFail,fnProgress){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,"resolve"],fail:[fnFail,"reject"],progress:[fnProgress,"notify"]},function(handler,data){var fn=data[0],action=data[1],returned;if(jQuery.isFunction(fn))deferred[handler](function(){if(returned=fn.apply(this,arguments),returned&&jQuery.isFunction(returned.promise))returned.promise().then(newDefer.resolve,newDefer.reject,newDefer.notify);else newDefer[action+"With"](this===deferred?newDefer:this,[returned])});else deferred[handler](newDefer[action])})}).promise()},promise:function(obj){if(null==obj)obj=promise;else for(var key in promise)obj[key]=promise[key];return obj}},deferred=promise.promise({}),key;for(key in lists)deferred[key]=lists[key].fire,deferred[key+"With"]=lists[key].fireWith;if(deferred.done(function(){state="resolved"},failList.disable,progressList.lock).fail(function(){state="rejected"},doneList.disable,progressList.lock),func)func.call(deferred,deferred);return deferred},when:function(firstParam){function resolveFunc(i){return function(value){if(args[i]=arguments.length>1?sliceDeferred.call(arguments,0):value,!--count)deferred.resolveWith(deferred,args)}}function progressFunc(i){return function(value){pValues[i]=arguments.length>1?sliceDeferred.call(arguments,0):value,deferred.notifyWith(promise,pValues)}}var args=sliceDeferred.call(arguments,0),i=0,length=args.length,pValues=new Array(length),count=length,pCount=length,deferred=1>=length&&firstParam&&jQuery.isFunction(firstParam.promise)?firstParam:jQuery.Deferred(),promise=deferred.promise();if(length>1){for(;length>i;i++)if(args[i]&&args[i].promise&&jQuery.isFunction(args[i].promise))args[i].promise().then(resolveFunc(i),deferred.reject,progressFunc(i));else--count;if(!count)deferred.resolveWith(deferred,args)}else if(deferred!==firstParam)deferred.resolveWith(deferred,length?[firstParam]:[]);return promise}}),jQuery.support=function(){var support,all,a,select,opt,input,marginDiv,fragment,tds,events,eventName,i,isSupported,div=document.createElement("div"),documentElement=document.documentElement;if(div.setAttribute("className","t"),div.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0],!all||!all.length||!a)return{};select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],support={leadingWhitespace:3===div.firstChild.nodeType,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.55/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:"on"===input.value,optSelected:opt.selected,getSetAttribute:"t"!==div.className,enctype:!!document.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}if(!div.addEventListener&&div.attachEvent&&div.fireEvent)div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).fireEvent("onclick");if(input=document.createElement("input"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value,input.setAttribute("checked","checked"),div.appendChild(input),fragment=document.createDocumentFragment(),fragment.appendChild(div.lastChild),support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,support.appendChecked=input.checked,fragment.removeChild(input),fragment.appendChild(div),div.innerHTML="",window.getComputedStyle)marginDiv=document.createElement("div"),marginDiv.style.width="0",marginDiv.style.marginRight="0",div.style.width="2px",div.appendChild(marginDiv),support.reliableMarginRight=0===(parseInt((window.getComputedStyle(marginDiv,null)||{marginRight:0}).marginRight,10)||0);if(div.attachEvent)for(i in{submit:1,change:1,focusin:1}){if(eventName="on"+i,isSupported=eventName in div,!isSupported)div.setAttribute(eventName,"return;"),isSupported="function"==typeof div[eventName];support[i+"Bubbles"]=isSupported}return fragment.removeChild(div),fragment=select=opt=marginDiv=div=input=null,jQuery(function(){var container,outer,inner,table,td,offsetSupport,conMarginTop,ptlm,vb,style,html,body=document.getElementsByTagName("body")[0];if(!body)return;if(conMarginTop=1,ptlm="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",vb="visibility:hidden;border:0;",style="style='"+ptlm+"border:5px solid #000;padding:0;'",html="<div "+style+"><div></div></div><table "+style+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",container=document.createElement("div"),container.style.cssText=vb+"width:0;height:0;position:static;top:0;margin-top:"+conMarginTop+"px",body.insertBefore(container,body.firstChild),div=document.createElement("div"),container.appendChild(div),div.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",tds=div.getElementsByTagName("td"),isSupported=0===tds[0].offsetHeight,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&0===tds[0].offsetHeight,div.innerHTML="",div.style.width=div.style.paddingLeft="1px",jQuery.boxModel=support.boxModel=2===div.offsetWidth,"undefined"!=typeof div.style.zoom)div.style.display="inline",div.style.zoom=1,support.inlineBlockNeedsLayout=2===div.offsetWidth,div.style.display="",div.innerHTML="<div style='width:4px;'></div>",support.shrinkWrapBlocks=2!==div.offsetWidth;div.style.cssText=ptlm+vb,div.innerHTML=html,outer=div.firstChild,inner=outer.firstChild,td=outer.nextSibling.firstChild.firstChild,offsetSupport={doesNotAddBorder:5!==inner.offsetTop,doesAddBorderForTableAndCells:5===td.offsetTop},inner.style.position="fixed",inner.style.top="20px",offsetSupport.fixedPosition=20===inner.offsetTop||15===inner.offsetTop,inner.style.position=inner.style.top="",outer.style.overflow="hidden",outer.style.position="relative",offsetSupport.subtractsBorderForOverflowNotVisible=-5===inner.offsetTop,offsetSupport.doesNotIncludeMarginInBodyOffset=body.offsetTop!==conMarginTop,body.removeChild(container),div=container=null,jQuery.extend(support,offsetSupport)}),support}();var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem))return;var privateCache,thisCache,ret,internalKey=jQuery.expando,getByName="string"==typeof name,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey,isEvents="events"===name;
if(!(id&&cache[id]&&(isEvents||pvt||cache[id].data)||!getByName||data!==undefined))return;if(!id)if(isNode)elem[internalKey]=id=++jQuery.uuid;else id=internalKey;if(!cache[id])if(cache[id]={},!isNode)cache[id].toJSON=jQuery.noop;if("object"==typeof name||"function"==typeof name)if(pvt)cache[id]=jQuery.extend(cache[id],name);else cache[id].data=jQuery.extend(cache[id].data,name);if(privateCache=thisCache=cache[id],!pvt){if(!thisCache.data)thisCache.data={};thisCache=thisCache.data}if(data!==undefined)thisCache[jQuery.camelCase(name)]=data;if(isEvents&&!thisCache[name])return privateCache.events;if(getByName){if(ret=thisCache[name],null==ret)ret=thisCache[jQuery.camelCase(name)]}else ret=thisCache;return ret},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem))return;var thisCache,i,l,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:internalKey;if(!cache[id])return;if(name)if(thisCache=pvt?cache[id]:cache[id].data){if(!jQuery.isArray(name))if(name in thisCache)name=[name];else if(name=jQuery.camelCase(name),name in thisCache)name=[name];else name=name.split(" ");for(i=0,l=name.length;l>i;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}if(!pvt)if(delete cache[id].data,!isEmptyDataObject(cache[id]))return;if(jQuery.support.deleteExpando||!cache.setInterval)delete cache[id];else cache[id]=null;if(isNode)if(jQuery.support.deleteExpando)delete elem[internalKey];else if(elem.removeAttribute)elem.removeAttribute(internalKey);else elem[internalKey]=null},_data:function(elem,name,data){return jQuery.data(elem,name,data,!0)},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match)return!(match===!0||elem.getAttribute("classid")!==match)}return!0}}),jQuery.fn.extend({data:function(key,value){var parts,attr,name,data=null;if("undefined"==typeof key){if(this.length)if(data=jQuery.data(this[0]),1===this[0].nodeType&&!jQuery._data(this[0],"parsedAttrs")){attr=this[0].attributes;for(var i=0,l=attr.length;l>i;i++)if(name=attr[i].name,0===name.indexOf("data-"))name=jQuery.camelCase(name.substring(5)),dataAttr(this[0],name,data[name]);jQuery._data(this[0],"parsedAttrs",!0)}return data}else if("object"==typeof key)return this.each(function(){jQuery.data(this,key)});if(parts=key.split("."),parts[1]=parts[1]?"."+parts[1]:"",value===undefined){if(data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]),data===undefined&&this.length)data=jQuery.data(this[0],key),data=dataAttr(this[0],key,data);return data===undefined&&parts[1]?this.data(parts[0]):data}else return this.each(function(){var self=jQuery(this),args=[parts[0],value];self.triggerHandler("setData"+parts[1]+"!",args),jQuery.data(this,key,value),self.triggerHandler("changeData"+parts[1]+"!",args)})},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({_mark:function(elem,type){if(elem)type=(type||"fx")+"mark",jQuery._data(elem,type,(jQuery._data(elem,type)||0)+1)},_unmark:function(force,elem,type){if(force!==!0)type=elem,elem=force,force=!1;if(elem){type=type||"fx";var key=type+"mark",count=force?0:(jQuery._data(elem,key)||1)-1;if(count)jQuery._data(elem,key,count);else jQuery.removeData(elem,key,!0),handleQueueMarkDefer(elem,type,"mark")}},queue:function(elem,type,data){var q;if(elem){if(type=(type||"fx")+"queue",q=jQuery._data(elem,type),data)if(!q||jQuery.isArray(data))q=jQuery._data(elem,type,jQuery.makeArray(data));else q.push(data);return q||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift(),hooks={};if("inprogress"===fn)fn=queue.shift();if(fn){if("fx"===type)queue.unshift("inprogress");jQuery._data(elem,type+".run",hooks),fn.call(elem,function(){jQuery.dequeue(elem,type)},hooks)}if(!queue.length)jQuery.removeData(elem,type+"queue "+type+".run",!0),handleQueueMarkDefer(elem,type,"queue")}}),jQuery.fn.extend({queue:function(type,data){if("string"!=typeof type)data=type,type="fx";if(data===undefined)return jQuery.queue(this[0],type);return this.each(function(){var queue=jQuery.queue(this,type,data);if("fx"===type&&"inprogress"!==queue[0])jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,object){function resolve(){if(!--count)defer.resolveWith(elements,[elements])}if("string"!=typeof type)object=type,type=undefined;type=type||"fx";for(var defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",tmp;i--;)if(tmp=jQuery.data(elements[i],deferDataKey,undefined,!0)||(jQuery.data(elements[i],queueDataKey,undefined,!0)||jQuery.data(elements[i],markDataKey,undefined,!0))&&jQuery.data(elements[i],deferDataKey,jQuery.Callbacks("once memory"),!0))count++,tmp.add(resolve);return resolve(),defer.promise()}});var rclass=/[\n\t\r]/g,rspace=/\s+/,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,nodeHook,boolHook,fixSpecified;if(jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,name,value,!0,jQuery.attr)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,name,value,!0,jQuery.prop)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(value&&"string"==typeof value)for(classNames=value.split(rspace),i=0,l=this.length;l>i;i++)if(elem=this[i],1===elem.nodeType)if(!elem.className&&1===classNames.length)elem.className=value;else{for(setClass=" "+elem.className+" ",c=0,cl=classNames.length;cl>c;c++)if(!~setClass.indexOf(" "+classNames[c]+" "))setClass+=classNames[c]+" ";elem.className=jQuery.trim(setClass)}return this},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(value&&"string"==typeof value||value===undefined)for(classNames=(value||"").split(rspace),i=0,l=this.length;l>i;i++)if(elem=this[i],1===elem.nodeType&&elem.className)if(value){for(className=(" "+elem.className+" ").replace(rclass," "),c=0,cl=classNames.length;cl>c;c++)className=className.replace(" "+classNames[c]+" "," ");elem.className=jQuery.trim(className)}else elem.className="";return this},toggleClass:function(value,stateVal){var type=typeof value,isBool="boolean"==typeof stateVal;if(jQuery.isFunction(value))return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)});return this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);className=classNames[i++];)state=isBool?state:!self.hasClass(className),self[state?"addClass":"removeClass"](className);else if("undefined"===type||"boolean"===type){if(this.className)jQuery._data(this,"__className__",this.className);this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||""}})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1)return!0;return!1},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){if(hooks=jQuery.valHooks[elem.nodeName.toLowerCase()]||jQuery.valHooks[elem.type],hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined)return ret;return ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret}return}return isFunction=jQuery.isFunction(value),this.each(function(i){var self=jQuery(this),val;if(1!==this.nodeType)return;if(isFunction)val=value.call(this,i,self.val());else val=value;if(null==val)val="";else if("number"==typeof val)val+="";else if(jQuery.isArray(val))val=jQuery.map(val,function(value){return null==value?"":value+""});if(hooks=jQuery.valHooks[this.nodeName.toLowerCase()]||jQuery.valHooks[this.type],!(hooks&&"set"in hooks&&hooks.set(this,val,"value")!==undefined))this.value=val})}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one="select-one"===elem.type;if(0>index)return null;for(i=one?index:0,max=one?index+1:options.length;max>i;i++)if(option=options[i],!(!option.selected||(jQuery.support.optDisabled?option.disabled:null!==option.getAttribute("disabled"))||option.parentNode.disabled&&jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}if(one&&!values.length&&options.length)return jQuery(options[index]).val();return values},set:function(elem,value){var values=jQuery.makeArray(value);if(jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0}),!values.length)elem.selectedIndex=-1;return values}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||3===nType||8===nType||2===nType)return;if(pass&&name in jQuery.attrFn)return jQuery(elem)[name](value);if("undefined"==typeof elem.getAttribute)return jQuery.prop(elem,name,value);if(notxml=1!==nType||!jQuery.isXMLDoc(elem))name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook);if(value!==undefined)if(null===value)return void jQuery.removeAttr(elem,name);else if(hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else return elem.setAttribute(name,""+value),value;else if(hooks&&"get"in hooks&&notxml&&null!==(ret=hooks.get(elem,name)))return ret;else return ret=elem.getAttribute(name),null===ret?undefined:ret},removeAttr:function(elem,value){var propName,attrNames,name,l,i=0;if(value&&1===elem.nodeType)for(attrNames=value.toLowerCase().split(rspace),l=attrNames.length;l>i;i++)if(name=attrNames[i])if(propName=jQuery.propFix[name]||name,jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName),rboolean.test(name)&&propName in elem)elem[propName]=!1},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode)jQuery.error("type property can't be changed");else if(!jQuery.support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;if(elem.setAttribute("type",value),val)elem.value=val;return value}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button"))return nodeHook.get(elem,name);return name in elem?elem.value:null},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button"))return nodeHook.set(elem,value,name);elem.value=value}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||3===nType||8===nType||2===nType)return;if(notxml=1!==nType||!jQuery.isXMLDoc(elem))name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name];if(value!==undefined)if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else return elem[name]=value;else if(hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name)))return ret;else return elem[name]},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}}),jQuery.attrHooks.tabindex=jQuery.propHooks.tabIndex,boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===!0||"boolean"!=typeof property&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==!1?name.toLowerCase():undefined},set:function(elem,value,name){var propName;if(value===!1)jQuery.removeAttr(elem,name);else{if(propName=jQuery.propFix[name]||name,propName in elem)elem[propName]=!0;elem.setAttribute(name,name.toLowerCase())}return name}},!getSetAttribute)fixSpecified={name:!0,id:!0},nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;return ret=elem.getAttributeNode(name),ret&&(fixSpecified[name]?""!==ret.nodeValue:ret.specified)?ret.nodeValue:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret)ret=document.createAttribute(name),elem.setAttributeNode(ret);return ret.nodeValue=value+""}},jQuery.attrHooks.tabindex.set=nodeHook.set,jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(""===value)return elem.setAttribute(name,"auto"),value}})}),jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){if(""===value)value="false";nodeHook.set(elem,value,name)}};if(!jQuery.support.hrefNormalized)jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return null===ret?undefined:ret}})});if(!jQuery.support.style)jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return elem.style.cssText=""+value}};if(!jQuery.support.optSelected)jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent)if(parent.selectedIndex,parent.parentNode)parent.parentNode.selectedIndex;return null}});if(!jQuery.support.enctype)jQuery.propFix.enctype="encoding";if(!jQuery.support.checkOn)jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return null===elem.getAttribute("value")?"on":elem.value}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}})});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*)?(?:\.(.+))?$/,rhoverHack=/\bhover(\.\S+)?\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rquickIs=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,quickParse=function(selector){var quick=rquickIs.exec(selector);if(quick)quick[1]=(quick[1]||"").toLowerCase(),quick[3]=quick[3]&&new RegExp("(?:^|\\s)"+quick[3]+"(?:\\s|$)");return quick},quickIs=function(elem,m){var attrs=elem.attributes||{};return!(m[1]&&elem.nodeName.toLowerCase()!==m[1]||m[2]&&(attrs.id||{}).value!==m[2]||m[3]&&!m[3].test((attrs["class"]||{}).value))},hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};if(jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,quick,handlers,special;if(3===elem.nodeType||8===elem.nodeType||!types||!handler||!(elemData=jQuery._data(elem)))return;if(handler.handler)handleObjIn=handler,handler=handleObjIn.handler;if(!handler.guid)handler.guid=jQuery.guid++;if(events=elemData.events,!events)elemData.events=events={};if(eventHandle=elemData.handle,!eventHandle)elemData.handle=eventHandle=function(e){return"undefined"!=typeof jQuery&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined},eventHandle.elem=elem;for(types=jQuery.trim(hoverHack(types)).split(" "),t=0;t<types.length;t++){if(tns=rtypenamespace.exec(types[t])||[],type=tns[1],namespaces=(tns[2]||"").split(".").sort(),special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,quick:quickParse(selector),namespace:namespaces.join(".")},handleObjIn),handlers=events[type],!handlers)if(handlers=events[type]=[],handlers.delegateCount=0,!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===!1)if(elem.addEventListener)elem.addEventListener(type,eventHandle,!1);else if(elem.attachEvent)elem.attachEvent("on"+type,eventHandle);if(special.add)if(special.add.call(elem,handleObj),!handleObj.handler.guid)handleObj.handler.guid=handler.guid;if(selector)handlers.splice(handlers.delegateCount++,0,handleObj);else handlers.push(handleObj);jQuery.event.global[type]=!0}elem=null},global:{},remove:function(elem,types,handler,selector,mappedTypes){var elemData=jQuery.hasData(elem)&&jQuery._data(elem),t,tns,type,origType,namespaces,origCount,j,events,special,handle,eventType,handleObj;if(!elemData||!(events=elemData.events))return;for(types=jQuery.trim(hoverHack(types||"")).split(" "),t=0;t<types.length;t++){if(tns=rtypenamespace.exec(types[t])||[],type=origType=tns[1],namespaces=tns[2],!type){for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);continue}for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,eventType=events[type]||[],origCount=eventType.length,namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,j=0;j<eventType.length;j++)if(handleObj=eventType[j],!(!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||namespaces&&!namespaces.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector))){if(eventType.splice(j--,1),handleObj.selector)eventType.delegateCount--;if(special.remove)special.remove.call(elem,handleObj)}if(0===eventType.length&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces)===!1)jQuery.removeEvent(elem,type,elemData.handle);delete events[type]}}if(jQuery.isEmptyObject(events)){if(handle=elemData.handle)handle.elem=null;jQuery.removeData(elem,["events","handle"],!0)}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(event,data,elem,onlyHandlers){if(elem&&(3===elem.nodeType||8===elem.nodeType))return;var type=event.type||event,namespaces=[],cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType;if(rfocusMorph.test(type+jQuery.event.triggered))return;if(type.indexOf("!")>=0)type=type.slice(0,-1),exclusive=!0;if(type.indexOf(".")>=0)namespaces=type.split("."),type=namespaces.shift(),namespaces.sort();if((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type])return;if(event="object"==typeof event?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type),event.type=type,event.isTrigger=!0,event.exclusive=exclusive,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,ontype=type.indexOf(":")<0?"on"+type:"",!elem){cache=jQuery.cache;for(i in cache)if(cache[i].events&&cache[i].events[type])jQuery.event.trigger(event,data,cache[i].handle.elem,!0);return}if(event.result=undefined,!event.target)event.target=elem;if(data=null!=data?jQuery.makeArray(data):[],data.unshift(event),special=jQuery.event.special[type]||{},special.trigger&&special.trigger.apply(elem,data)===!1)return;if(eventPath=[[elem,special.bindType||type]],!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode,old=null;cur;cur=cur.parentNode)eventPath.push([cur,bubbleType]),old=cur;if(old&&old===elem.ownerDocument)eventPath.push([old.defaultView||old.parentWindow||window,bubbleType])}for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){if(cur=eventPath[i][0],event.type=eventPath[i][1],handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"))handle.apply(cur,data);if(handle=ontype&&cur[ontype],handle&&jQuery.acceptData(cur)&&handle.apply(cur,data)===!1)event.preventDefault()}if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented())if(!(special._default&&special._default.apply(elem.ownerDocument,data)!==!1||"click"===type&&jQuery.nodeName(elem,"a")||!jQuery.acceptData(elem)))if(ontype&&elem[type]&&("focus"!==type&&"blur"!==type||0!==event.target.offsetWidth)&&!jQuery.isWindow(elem)){if(old=elem[ontype])elem[ontype]=null;if(jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=undefined,old)elem[ontype]=old}return event.result},dispatch:function(event){event=jQuery.event.fix(event||window.event);var handlers=(jQuery._data(this,"events")||{})[event.type]||[],delegateCount=handlers.delegateCount,args=[].slice.call(arguments,0),run_all=!event.exclusive&&!event.namespace,handlerQueue=[],i,j,cur,jqcur,ret,selMatch,matched,matches,handleObj,sel,related;if(args[0]=event,event.delegateTarget=this,delegateCount&&!event.target.disabled&&(!event.button||"click"!==event.type))for(jqcur=jQuery(this),jqcur.context=this.ownerDocument||this,cur=event.target;cur!=this;cur=cur.parentNode||this){for(selMatch={},matches=[],jqcur[0]=cur,i=0;delegateCount>i;i++){if(handleObj=handlers[i],sel=handleObj.selector,selMatch[sel]===undefined)selMatch[sel]=handleObj.quick?quickIs(cur,handleObj.quick):jqcur.is(sel);if(selMatch[sel])matches.push(handleObj)}if(matches.length)handlerQueue.push({elem:cur,matches:matches})}if(handlers.length>delegateCount)handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)});for(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++)for(matched=handlerQueue[i],event.currentTarget=matched.elem,j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++)if(handleObj=matched.matches[j],run_all||!event.namespace&&!handleObj.namespace||event.namespace_re&&event.namespace_re.test(handleObj.namespace))if(event.data=handleObj.data,event.handleObj=handleObj,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),ret!==undefined)if(event.result=ret,ret===!1)event.preventDefault(),event.stopPropagation();return event.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(null==event.which)event.which=null!=original.charCode?original.charCode:original.keyCode;return event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(null==event.pageX&&null!=original.clientX)eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);if(!event.relatedTarget&&fromElement)event.relatedTarget=fromElement===event.target?original.toElement:fromElement;if(!event.which&&button!==undefined)event.which=1&button?1:2&button?3:4&button?2:0;return event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;for(event=jQuery.Event(originalEvent),i=copy.length;i;)prop=copy[--i],event[prop]=originalEvent[prop];if(!event.target)event.target=originalEvent.srcElement||document;if(3===event.target.nodeType)event.target=event.target.parentNode;if(event.metaKey===undefined)event.metaKey=event.ctrlKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{ready:{setup:jQuery.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this))this.onbeforeunload=eventHandle},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle)this.onbeforeunload=null}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});if(bubble)jQuery.event.trigger(e,null,elem);else jQuery.event.dispatch.call(elem,e);if(e.isDefaultPrevented())event.preventDefault()}},jQuery.event.handle=jQuery.event.dispatch,jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener)elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){if(elem.detachEvent)elem.detachEvent("on"+type,handle)},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);if(src&&src.type)this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||src.returnValue===!1||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse;else this.type=src;if(props)jQuery.extend(this,props);this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e)return;if(e.preventDefault)e.preventDefault();else e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e)return;if(e.stopPropagation)e.stopPropagation();e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var target=this,related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector,ret;if(!related||related!==target&&!jQuery.contains(target,related))event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix;return ret}}}),!jQuery.support.submitBubbles)jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;if(form&&!form._submit_attached)jQuery.event.add(form,"submit._submit",function(event){if(this.parentNode&&!event.isTrigger)jQuery.event.simulate("submit",this.parentNode,event,!0)}),form._submit_attached=!0})},teardown:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.remove(this,"._submit")}};if(!jQuery.support.changeBubbles)jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)jQuery.event.add(this,"propertychange._change",function(event){if("checked"===event.originalEvent.propertyName)this._just_changed=!0}),jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger)this._just_changed=!1,jQuery.event.simulate("change",this,event,!0)});return!1}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&!elem._change_attached)jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger)jQuery.event.simulate("change",this.parentNode,event,!0)}),elem._change_attached=!0})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type)return event.handleObj.handler.apply(this,arguments)},teardown:function(){return jQuery.event.remove(this,"._change"),rformElems.test(this.nodeName)}};if(!jQuery.support.focusinBubbles)jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){if(0===attaches++)document.addEventListener(orig,handler,!0)},teardown:function(){if(0===--attaches)document.removeEventListener(orig,handler,!0)}}});jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if("object"==typeof types){if("string"!=typeof selector)data=selector,selector=undefined;for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn)fn=selector,data=selector=undefined;else if(null==fn)if("string"==typeof selector)fn=data,data=undefined;else fn=data,data=selector,selector=undefined;if(fn===!1)fn=returnFalse;else if(!fn)return this;if(1===one)origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++);return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on.call(this,types,selector,data,fn,1)},off:function(types,selector,fn){if(types&&types.preventDefault&&types.handleObj){var handleObj=types.handleObj;return jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.type+"."+handleObj.namespace:handleObj.type,handleObj.selector,handleObj.handler),this}if("object"==typeof types){for(var type in types)this.off(type,selector,types[type]);return this}if(selector===!1||"function"==typeof selector)fn=selector,selector=undefined;if(fn===!1)fn=returnFalse;return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},live:function(types,data,fn){return jQuery(this.context).on(types,this.selector,data,fn),this},die:function(types,fn){return jQuery(this.context).off(types,this.selector||"**",fn),this},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1==arguments.length?this.off(selector,"**"):this.off(types,selector,fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){if(this[0])return jQuery.event.trigger(type,data,this[0],!0)},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;return jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1),event.preventDefault(),args[lastToggle].apply(this,arguments)||!1};for(toggler.guid=guid;i<args.length;)args[i++].guid=guid;return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){if(jQuery.fn[name]=function(data,fn){if(null==fn)fn=data,data=null;return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)
},jQuery.attrFn)jQuery.attrFn[name]=!0;if(rkeyEvent.test(name))jQuery.event.fixHooks[name]=jQuery.event.keyHooks;if(rmouseEvent.test(name))jQuery.event.fixHooks[name]=jQuery.event.mouseHooks}),function(){function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;l>i;i++){var elem=checkSet[i];if(elem){var match=!1;for(elem=elem[dir];elem;){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(1===elem.nodeType&&!isXML)elem[expando]=doneName,elem.sizset=i;if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;l>i;i++){var elem=checkSet[i];if(elem){var match=!1;for(elem=elem[dir];elem;){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(1===elem.nodeType){if(!isXML)elem[expando]=doneName,elem.sizset=i;if("string"!=typeof cur){if(elem===cur){match=!0;break}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}elem=elem[dir]}checkSet[i]=match}}}var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,expando="sizcache"+(Math.random()+"").replace(".",""),done=0,toString=Object.prototype.toString,hasDuplicate=!1,baseHasDuplicate=!0,rBackslash=/\\/g,rReturn=/\r\n/g,rNonWord=/\W/;[0,0].sort(function(){return baseHasDuplicate=!1,0});var Sizzle=function(selector,context,results,seed){results=results||[],context=context||document;var origContext=context;if(1!==context.nodeType&&9!==context.nodeType)return[];if(!selector||"string"!=typeof selector)return results;var m,set,checkSet,extra,ret,cur,pop,i,prune=!0,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do if(chunker.exec(""),m=chunker.exec(soFar))if(soFar=m[3],parts.push(m[1]),m[2]){extra=m[3];break}while(m);if(parts.length>1&&origPOS.exec(selector))if(2===parts.length&&Expr.relative[parts[0]])set=posProcess(parts[0]+parts[1],context,seed);else for(set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);parts.length;){if(selector=parts.shift(),Expr.relative[selector])selector+=parts.shift();set=posProcess(selector,set,seed)}else{if(!seed&&parts.length>1&&9===context.nodeType&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1]))ret=Sizzle.find(parts.shift(),context,contextXML),context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0];if(context){if(ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),1===parts.length&&("~"===parts[0]||"+"===parts[0])&&context.parentNode?context.parentNode:context,contextXML),set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set,parts.length>0)checkSet=makeArray(set);else prune=!1;for(;parts.length;){if(cur=parts.pop(),pop=cur,!Expr.relative[cur])cur="";else pop=parts.pop();if(null==pop)pop=context;Expr.relative[cur](checkSet,pop,contextXML)}}else checkSet=parts=[]}if(!checkSet)checkSet=set;if(!checkSet)Sizzle.error(cur||selector);if("[object Array]"===toString.call(checkSet)){if(!prune)results.push.apply(results,checkSet);else if(context&&1===context.nodeType){for(i=0;null!=checkSet[i];i++)if(checkSet[i]&&(checkSet[i]===!0||1===checkSet[i].nodeType&&Sizzle.contains(context,checkSet[i])))results.push(set[i])}else for(i=0;null!=checkSet[i];i++)if(checkSet[i]&&1===checkSet[i].nodeType)results.push(set[i])}else makeArray(checkSet,results);if(extra)Sizzle(extra,origContext,results,seed),Sizzle.uniqueSort(results);return results};Sizzle.uniqueSort=function(results){if(sortOrder)if(hasDuplicate=baseHasDuplicate,results.sort(sortOrder),hasDuplicate)for(var i=1;i<results.length;i++)if(results[i]===results[i-1])results.splice(i--,1);return results},Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)},Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0},Sizzle.find=function(expr,context,isXML){var set,i,len,match,type,left;if(!expr)return[];for(i=0,len=Expr.order.length;len>i;i++)if(type=Expr.order[i],match=Expr.leftMatch[type].exec(expr))if(left=match[1],match.splice(1,1),"\\"!==left.substr(left.length-1))if(match[1]=(match[1]||"").replace(rBackslash,""),set=Expr.find[type](match,context,isXML),null!=set){expr=expr.replace(Expr.match[type],"");break}if(!set)set="undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName("*"):[];return{set:set,expr:expr}},Sizzle.filter=function(expr,set,inplace,not){for(var match,anyFound,type,found,item,filter,left,i,pass,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);expr&&set.length;){for(type in Expr.filter)if(null!=(match=Expr.leftMatch[type].exec(expr))&&match[2]){if(filter=Expr.filter[type],left=match[1],anyFound=!1,match.splice(1,1),"\\"===left.substr(left.length-1))continue;if(curLoop===result)result=[];if(Expr.preFilter[type])if(match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter),!match)anyFound=found=!0;else if(match===!0)continue;if(match)for(i=0;null!=(item=curLoop[i]);i++)if(item)if(found=filter(item,match,i,curLoop),pass=not^found,inplace&&null!=found)if(pass)anyFound=!0;else curLoop[i]=!1;else if(pass)result.push(item),anyFound=!0;if(found!==undefined){if(!inplace)curLoop=result;if(expr=expr.replace(Expr.match[type],""),!anyFound)return[];break}}if(expr===old)if(null==anyFound)Sizzle.error(expr);else break;old=expr}return curLoop},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};var getText=Sizzle.getText=function(elem){var i,node,nodeType=elem.nodeType,ret="";if(nodeType){if(1===nodeType||9===nodeType)if("string"==typeof elem.textContent)return elem.textContent;else if("string"==typeof elem.innerText)return elem.innerText.replace(rReturn,"");else for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem);else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(i=0;node=elem[i];i++)if(8!==node.nodeType)ret+=getText(node);return ret},Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")},type:function(elem){return elem.getAttribute("type")}},relative:{"+":function(checkSet,part){var isPartStr="string"==typeof part,isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag)part=part.toLowerCase();for(var i=0,l=checkSet.length,elem;l>i;i++)if(elem=checkSet[i]){for(;(elem=elem.previousSibling)&&1!==elem.nodeType;);checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||!1:elem===part}if(isPartStrNotTag)Sizzle.filter(part,checkSet,!0)},">":function(checkSet,part){var elem,isPartStr="string"==typeof part,i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){for(part=part.toLowerCase();l>i;i++)if(elem=checkSet[i]){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:!1}}else{for(;l>i;i++)if(elem=checkSet[i])checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part;if(isPartStr)Sizzle.filter(part,checkSet,!0)}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if("string"==typeof part&&!rNonWord.test(part))part=part.toLowerCase(),nodeCheck=part,checkFn=dirNodeCheck;checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if("string"==typeof part&&!rNonWord.test(part))part=part.toLowerCase(),nodeCheck=part,checkFn=dirNodeCheck;checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if("undefined"!=typeof context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[]}},NAME:function(match,context){if("undefined"!=typeof context.getElementsByName){for(var ret=[],results=context.getElementsByName(match[1]),i=0,l=results.length;l>i;i++)if(results[i].getAttribute("name")===match[1])ret.push(results[i]);return 0===ret.length?null:ret}},TAG:function(match,context){if("undefined"!=typeof context.getElementsByTagName)return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){if(match=" "+match[1].replace(rBackslash,"")+" ",isXML)return match;for(var i=0,elem;null!=(elem=curLoop[i]);i++)if(elem)if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)){if(!inplace)result.push(elem)}else if(inplace)curLoop[i]=!1;return!1},ID:function(match){return match[1].replace(rBackslash,"")},TAG:function(match,curLoop){return match[1].replace(rBackslash,"").toLowerCase()},CHILD:function(match){if("nth"===match[1]){if(!match[2])Sizzle.error(match[0]);match[2]=match[2].replace(/^\+|\s*/g,"");var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===match[2]&&"2n"||"odd"===match[2]&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=test[1]+(test[2]||1)-0,match[3]=test[3]-0}else if(match[2])Sizzle.error(match[0]);return match[0]=done++,match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");if(!isXML&&Expr.attrMap[name])match[1]=Expr.attrMap[name];if(match[4]=(match[4]||match[5]||"").replace(rBackslash,""),"~="===match[2])match[4]=" "+match[4]+" ";return match},PSEUDO:function(match,curLoop,inplace,result,not){if("not"===match[1])if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3]))match[3]=Sizzle(match[3],null,null,curLoop);else{var ret=Sizzle.filter(match[3],curLoop,inplace,!0^not);if(!inplace)result.push.apply(result,ret);return!1}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0]))return!0;return match},POS:function(match){return match.unshift(!0),match}},filters:{enabled:function(elem){return elem.disabled===!1&&"hidden"!==elem.type},disabled:function(elem){return elem.disabled===!0},checked:function(elem){return elem.checked===!0},selected:function(elem){if(elem.parentNode)elem.parentNode.selectedIndex;return elem.selected===!0},parent:function(elem){return!!elem.firstChild},empty:function(elem){return!elem.firstChild},has:function(elem,i,match){return!!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){var attr=elem.getAttribute("type"),type=elem.type;return"input"===elem.nodeName.toLowerCase()&&"text"===type&&(attr===type||null===attr)},radio:function(elem){return"input"===elem.nodeName.toLowerCase()&&"radio"===elem.type},checkbox:function(elem){return"input"===elem.nodeName.toLowerCase()&&"checkbox"===elem.type},file:function(elem){return"input"===elem.nodeName.toLowerCase()&&"file"===elem.type},password:function(elem){return"input"===elem.nodeName.toLowerCase()&&"password"===elem.type},submit:function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&"submit"===elem.type},image:function(elem){return"input"===elem.nodeName.toLowerCase()&&"image"===elem.type},reset:function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&"reset"===elem.type},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)},focus:function(elem){return elem===elem.ownerDocument.activeElement}},setFilters:{first:function(elem,i){return 0===i},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter)return filter(elem,i,match,array);else if("contains"===name)return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0;else if("not"===name){for(var not=match[3],j=0,l=not.length;l>j;j++)if(not[j]===elem)return!1;return!0}else Sizzle.error(name)},CHILD:function(elem,match){var first,last,doneName,parent,cache,count,diff,type=match[1],node=elem;switch(type){case"only":case"first":for(;node=node.previousSibling;)if(1===node.nodeType)return!1;if("first"===type)return!0;node=elem;case"last":for(;node=node.nextSibling;)if(1===node.nodeType)return!1;return!0;case"nth":if(first=match[2],last=match[3],1===first&&0===last)return!0;if(doneName=match[0],parent=elem.parentNode,parent&&(parent[expando]!==doneName||!elem.nodeIndex)){for(count=0,node=parent.firstChild;node;node=node.nextSibling)if(1===node.nodeType)node.nodeIndex=++count;parent[expando]=doneName}if(diff=elem.nodeIndex-last,0===first)return 0===diff;else return diff%first===0&&diff/first>=0}},ID:function(elem,match){return 1===elem.nodeType&&elem.getAttribute("id")===match},TAG:function(elem,match){return"*"===match&&1===elem.nodeType||!!elem.nodeName&&elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Sizzle.attr?Sizzle.attr(elem,name):Expr.attrHandle[name]?Expr.attrHandle[name](elem):null!=elem[name]?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return null==result?"!="===type:!type&&Sizzle.attr?null!=result:"="===type?value===check:"*="===type?value.indexOf(check)>=0:"~="===type?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==!1:"!="===type?value!==check:"^="===type?0===value.indexOf(check):"$="===type?value.substr(value.length-check.length)===check:"|="===type?value===check||value.substr(0,check.length+1)===check+"-":!1},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter)return filter(elem,i,match,array)}}},origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1)};for(var type in Expr.match)Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source),Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape));var makeArray=function(array,results){if(array=Array.prototype.slice.call(array,0),results)return results.push.apply(results,array),results;return array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if("[object Array]"===toString.call(array))Array.prototype.push.apply(ret,array);else if("number"==typeof array.length)for(var l=array.length;l>i;i++)ret.push(array[i]);else for(;array[i];i++)ret.push(array[i]);return ret}}var sortOrder,siblingCheck;if(document.documentElement.compareDocumentPosition)sortOrder=function(a,b){if(a===b)return hasDuplicate=!0,0;if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return 4&a.compareDocumentPosition(b)?-1:1};else sortOrder=function(a,b){if(a===b)return hasDuplicate=!0,0;else if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup)return siblingCheck(a,b);else if(!aup)return-1;else if(!bup)return 1;for(;cur;)ap.unshift(cur),cur=cur.parentNode;for(cur=bup;cur;)bp.unshift(cur),cur=cur.parentNode;al=ap.length,bl=bp.length;for(var i=0;al>i&&bl>i;i++)if(ap[i]!==bp[i])return siblingCheck(ap[i],bp[i]);return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)},siblingCheck=function(a,b,ret){if(a===b)return ret;for(var cur=a.nextSibling;cur;){if(cur===b)return-1;cur=cur.nextSibling}return 1};if(function(){var form=document.createElement("div"),id="script"+(new Date).getTime(),root=document.documentElement;if(form.innerHTML="<a name='"+id+"'/>",root.insertBefore(form,root.firstChild),document.getElementById(id))Expr.find.ID=function(match,context,isXML){if("undefined"!=typeof context.getElementById&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||"undefined"!=typeof m.getAttributeNode&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}},Expr.filter.ID=function(elem,match){var node="undefined"!=typeof elem.getAttributeNode&&elem.getAttributeNode("id");return 1===elem.nodeType&&node&&node.nodeValue===match};root.removeChild(form),root=form=null}(),function(){var div=document.createElement("div");if(div.appendChild(document.createComment("")),div.getElementsByTagName("*").length>0)Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if("*"===match[1]){for(var tmp=[],i=0;results[i];i++)if(1===results[i].nodeType)tmp.push(results[i]);results=tmp}return results};if(div.innerHTML="<a href='#'></a>",div.firstChild&&"undefined"!=typeof div.firstChild.getAttribute&&"#"!==div.firstChild.getAttribute("href"))Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)};div=null}(),document.querySelectorAll)!function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";if(div.innerHTML="<p class='TEST'></p>",div.querySelectorAll&&0===div.querySelectorAll(".TEST").length)return;Sizzle=function(query,context,extra,seed){if(context=context||document,!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);if(match&&(1===context.nodeType||9===context.nodeType))if(match[1])return makeArray(context.getElementsByTagName(query),extra);else if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName)return makeArray(context.getElementsByClassName(match[2]),extra);if(9===context.nodeType){if("body"===query&&context.body)return makeArray([context.body],extra);else if(match&&match[3]){var elem=context.getElementById(match[3]);if(elem&&elem.parentNode){if(elem.id===match[3])return makeArray([elem],extra)}else return makeArray([],extra)}try{return makeArray(context.querySelectorAll(query),extra)}catch(qsaError){}}else if(1===context.nodeType&&"object"!==context.nodeName.toLowerCase()){var oldContext=context,old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);if(!old)context.setAttribute("id",nid);else nid=nid.replace(/'/g,"\\$&");if(relativeHierarchySelector&&hasParent)context=context.parentNode;try{if(!relativeHierarchySelector||hasParent)return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra)}catch(pseudoError){}finally{if(!old)oldContext.removeAttribute("id")}}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle)Sizzle[prop]=oldSizzle[prop];div=null}();if(function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement("div"),"div"),pseudoWorks=!1;try{matches.call(document.documentElement,"[test!='']:sizzle")}catch(pseudoError){pseudoWorks=!0}Sizzle.matchesSelector=function(node,expr){if(expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!Sizzle.isXML(node))try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&11!==node.document.nodeType)return ret}}catch(e){}return Sizzle(expr,null,null,[node]).length>0}}}(),function(){var div=document.createElement("div");if(div.innerHTML="<div class='test e'></div><div class='test'></div>",!div.getElementsByClassName||0===div.getElementsByClassName("e").length)return;if(div.lastChild.className="e",1===div.getElementsByClassName("e").length)return;Expr.order.splice(1,0,"CLASS"),Expr.find.CLASS=function(match,context,isXML){if("undefined"!=typeof context.getElementsByClassName&&!isXML)return context.getElementsByClassName(match[1])},div=null}(),document.documentElement.contains)Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)};else if(document.documentElement.compareDocumentPosition)Sizzle.contains=function(a,b){return!!(16&a.compareDocumentPosition(b))};else Sizzle.contains=function(){return!1};Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1};var posProcess=function(selector,context,seed){for(var match,tmpSet=[],later="",root=context.nodeType?[context]:context;match=Expr.match.PSEUDO.exec(selector);)later+=match[0],selector=selector.replace(Expr.match.PSEUDO,"");selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;l>i;i++)Sizzle(selector,root[i],tmpSet,seed);return Sizzle.filter(later,tmpSet)};Sizzle.attr=jQuery.attr,Sizzle.selectors.attrMap={},jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.filters,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.POS,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var self=this,i,l;if("string"!=typeof selector)return jQuery(selector).filter(function(){for(i=0,l=self.length;l>i;i++)if(jQuery.contains(self[i],this))return!0});var ret=this.pushStack("","find",selector),length,n,r;for(i=0,l=this.length;l>i;i++)if(length=ret.length,jQuery.find(selector,this[i],ret),i>0)for(n=length;n<ret.length;n++)for(r=0;length>r;r++)if(ret[r]===ret[n]){ret.splice(n--,1);break}return ret},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;l>i;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector,!1),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,!0),"filter",selector)},is:function(selector){return!!selector&&("string"==typeof selector?POS.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){var ret=[],i,l,cur=this[0];if(jQuery.isArray(selectors)){for(var level=1;cur&&cur.ownerDocument&&cur!==context;){for(i=0;i<selectors.length;i++)if(jQuery(cur).is(selectors[i]))ret.push({selector:selectors[i],elem:cur,level:level});cur=cur.parentNode,level++}return ret}var pos=POS.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;l>i;i++)for(cur=this[i];cur;)if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}else if(cur=cur.parentNode,!cur||!cur.ownerDocument||cur===context||11===cur.nodeType)break;return ret=ret.length>1?jQuery.unique(ret):ret,this.pushStack(ret,"closest",selectors)},index:function(elem){if(!elem)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if("string"==typeof elem)return jQuery.inArray(this[0],jQuery(elem));return jQuery.inArray(elem.jquery?elem[0]:elem,this)},add:function(selector,context){var set="string"==typeof selector?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},andSelf:function(){return this.add(this.prevObject)}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return jQuery.nth(elem,2,"nextSibling")},prev:function(elem){return jQuery.nth(elem,2,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name))selector=until;if(selector&&"string"==typeof selector)ret=jQuery.filter(selector,ret);if(ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret,(this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name))ret=ret.reverse();return this.pushStack(ret,name,slice.call(arguments).join(","))}}),jQuery.extend({filter:function(expr,elems,not){if(not)expr=":not("+expr+")";return 1===elems.length?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(until===undefined||1!==cur.nodeType||!jQuery(cur).is(until));){if(1===cur.nodeType)matched.push(cur);cur=cur[dir]}return matched},nth:function(cur,result,dir,elem){result=result||1;for(var num=0;cur&&(1!==cur.nodeType||++num!==result);cur=cur[dir]);return cur},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)if(1===n.nodeType&&n!==elem)r.push(n);return r}});var nodeNames="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")","i"),rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document);if(wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,!jQuery.support.htmlSerialize)wrapMap._default=[1,"div<div>","</div>"];jQuery.fn.extend({text:function(text){if(jQuery.isFunction(text))return this.each(function(i){var self=jQuery(this);self.text(text.call(this,i,self.text()))});if("object"!=typeof text&&text!==undefined)return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text));return jQuery.text(this)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);if(this[0].parentNode)wrap.insertBefore(this[0]);wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))});return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length)contents.wrapAll(html);else self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body"))jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(elem){if(1===this.nodeType)this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,!0,function(elem){if(1===this.nodeType)this.insertBefore(elem,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this)});else if(arguments.length){var set=jQuery.clean(arguments);return set.push.apply(set,this.toArray()),this.pushStack(set,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)});else if(arguments.length){var set=this.pushStack(this,"after",arguments);return set.push.apply(set,jQuery.clean(arguments)),set}},remove:function(selector,keepData){for(var i=0,elem;null!=(elem=this[i]);i++)if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&1===elem.nodeType)jQuery.cleanData(elem.getElementsByTagName("*")),jQuery.cleanData([elem]);if(elem.parentNode)elem.parentNode.removeChild(elem)}return this},empty:function(){for(var i=0,elem;null!=(elem=this[i]);i++){if(1===elem.nodeType)jQuery.cleanData(elem.getElementsByTagName("*"));for(;elem.firstChild;)elem.removeChild(elem.firstChild)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){if(value===undefined)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(rinlinejQuery,""):null;else if(!("string"!=typeof value||rnoInnerhtml.test(value)||!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(value)||wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()])){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(var i=0,l=this.length;l>i;i++)if(1===this[i].nodeType)jQuery.cleanData(this[i].getElementsByTagName("*")),this[i].innerHTML=value}catch(e){this.empty().append(value)}}else if(jQuery.isFunction(value))this.each(function(i){var self=jQuery(this);self.html(value.call(this,i,self.html()))});else this.empty().append(value);return this},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))});if("string"!=typeof value)value=jQuery(value).detach();return this.each(function(){var next=this.nextSibling,parent=this.parentNode;if(jQuery(this).remove(),next)jQuery(next).before(value);else jQuery(parent).append(value)})}else return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&3===arguments.length&&"string"==typeof value&&rchecked.test(value))return this.each(function(){jQuery(this).domManip(args,table,callback,!0)});if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined),self.domManip(args,table,callback)});if(this[0]){if(parent=value&&value.parentNode,jQuery.support.parentNode&&parent&&11===parent.nodeType&&parent.childNodes.length===this.length)results={fragment:parent};else results=jQuery.buildFragment(args,this,scripts);if(fragment=results.fragment,1===fragment.childNodes.length)first=fragment=fragment.firstChild;
else first=fragment.firstChild;if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length,lastIndex=l-1;l>i;i++)callback.call(table?root(this[i],first):this[i],results.cacheable||l>1&&lastIndex>i?jQuery.clone(fragment,!0,!0):fragment)}if(scripts.length)jQuery.each(scripts,evalScript)}return this}}),jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc,first=args[0];if(nodes&&nodes[0])doc=nodes[0].ownerDocument||nodes[0];if(!doc.createDocumentFragment)doc=document;if(1===args.length&&"string"==typeof first&&first.length<512&&doc===document&&"<"===first.charAt(0)&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||!rnoshimcache.test(first)))if(cacheable=!0,cacheresults=jQuery.fragments[first],cacheresults&&1!==cacheresults)fragment=cacheresults;if(!fragment)fragment=doc.createDocumentFragment(),jQuery.clean(args,doc,fragment,scripts);if(cacheable)jQuery.fragments[first]=cacheresults?fragment:1;return{fragment:fragment,cacheable:cacheable}},jQuery.fragments={},jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=1===this.length&&this[0].parentNode;if(parent&&11===parent.nodeType&&1===parent.childNodes.length&&1===insert.length)return insert[original](this[0]),this;else{for(var i=0,l=insert.length;l>i;i++){var elems=(i>0?this.clone(!0):this).get();jQuery(insert[i])[original](elems),ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone=jQuery.support.html5Clone||!rnoshimcache.test("<"+elem.nodeName)?elem.cloneNode(!0):shimCloneNode(elem);if(!(jQuery.support.noCloneEvent&&jQuery.support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(cloneFixAttributes(elem,clone),srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)if(destElements[i])cloneFixAttributes(srcElements[i],destElements[i]);if(dataAndEvents)if(cloneCopyEvent(elem,clone),deepDataAndEvents)for(srcElements=getAll(elem),destElements=getAll(clone),i=0;srcElements[i];++i)cloneCopyEvent(srcElements[i],destElements[i]);return srcElements=destElements=null,clone},clean:function(elems,context,fragment,scripts){var checkScriptType;if(context=context||document,"undefined"==typeof context.createElement)context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;for(var ret=[],j,i=0,elem;null!=(elem=elems[i]);i++){if("number"==typeof elem)elem+="";if(!elem)continue;if("string"==typeof elem)if(!rhtml.test(elem))elem=context.createTextNode(elem);else{elem=elem.replace(rxhtmlTag,"<$1></$2>");var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div");if(context===document)safeFragment.appendChild(div);else createSafeFragment(context).appendChild(div);for(div.innerHTML=wrap[1]+elem+wrap[2];depth--;)div=div.lastChild;if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody="table"===tag&&!hasBody?div.firstChild&&div.firstChild.childNodes:"<table>"===wrap[1]&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j)if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length)tbody[j].parentNode.removeChild(tbody[j])}if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem))div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);elem=div.childNodes}var len;if(!jQuery.support.appendChecked)if(elem[0]&&"number"==typeof(len=elem.length))for(j=0;len>j;j++)findInputs(elem[j]);else findInputs(elem);if(elem.nodeType)ret.push(elem);else ret=jQuery.merge(ret,elem)}if(fragment)for(checkScriptType=function(elem){return!elem.type||rscriptType.test(elem.type)},i=0;ret[i];i++)if(scripts&&jQuery.nodeName(ret[i],"script")&&(!ret[i].type||"text/javascript"===ret[i].type.toLowerCase()))scripts.push(ret[i].parentNode?ret[i].parentNode.removeChild(ret[i]):ret[i]);else{if(1===ret[i].nodeType){var jsTags=jQuery.grep(ret[i].getElementsByTagName("script"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags))}fragment.appendChild(ret[i])}return ret},cleanData:function(elems){for(var data,id,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando,i=0,elem;null!=(elem=elems[i]);i++){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()])continue;if(id=elem[jQuery.expando]){if(data=cache[id],data&&data.events){for(var type in data.events)if(special[type])jQuery.event.remove(elem,type);else jQuery.removeEvent(elem,type,data.handle);if(data.handle)data.handle.elem=null}if(deleteExpando)delete elem[jQuery.expando];else if(elem.removeAttribute)elem.removeAttribute(jQuery.expando);delete cache[id]}}}});var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnumpx=/^-?\d+(?:px)?$/i,rnum=/^-?\d/,rrelNum=/^([\-+])=([\-+.\de]+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssWidth=["Left","Right"],cssHeight=["Top","Bottom"],curCSS,getComputedStyle,currentStyle;if(jQuery.fn.css=function(name,value){if(2===arguments.length&&value===undefined)return this;return jQuery.access(this,name,value,!0,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)})},jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity","opacity");return""===ret?"1":ret}else return elem.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||3===elem.nodeType||8===elem.nodeType||!elem.style)return;var ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];if(name=jQuery.cssProps[origName]||origName,value!==undefined){if(type=typeof value,"string"===type&&(ret=rrelNum.exec(value)))value=+(ret[1]+1)*+ret[2]+parseFloat(jQuery.css(elem,name)),type="number";if(null==value||"number"===type&&isNaN(value))return;if("number"===type&&!jQuery.cssNumber[origName])value+="px";if(!(hooks&&"set"in hooks&&(value=hooks.set(elem,value))===undefined))try{style[name]=value}catch(e){}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined)return ret;return style[name]}},css:function(elem,name,extra){var ret,hooks;if(name=jQuery.camelCase(name),hooks=jQuery.cssHooks[name],name=jQuery.cssProps[name]||name,"cssFloat"===name)name="float";if(hooks&&"get"in hooks&&(ret=hooks.get(elem,!0,extra))!==undefined)return ret;else if(curCSS)return curCSS(elem,name)},swap:function(elem,options,callback){var old={};for(var name in options)old[name]=elem.style[name],elem.style[name]=options[name];callback.call(elem);for(name in options)elem.style[name]=old[name]}}),jQuery.curCSS=jQuery.css,jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){var val;if(computed){if(0!==elem.offsetWidth)return getWH(elem,name,extra);else jQuery.swap(elem,cssShow,function(){val=getWH(elem,name,extra)});return val}},set:function(elem,value){if(rnumpx.test(value)){if(value=parseFloat(value),value>=0)return value+"px"}else return value}}}),!jQuery.support.opacity)jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?parseFloat(RegExp.$1)/100+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";if(style.zoom=1,value>=1&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute)if(style.removeAttribute("filter"),currentStyle&&!currentStyle.filter)return;style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}};if(jQuery(function(){if(!jQuery.support.reliableMarginRight)jQuery.cssHooks.marginRight={get:function(elem,computed){var ret;return jQuery.swap(elem,{display:"inline-block"},function(){if(computed)ret=curCSS(elem,"margin-right","marginRight");else ret=elem.style.marginRight}),ret}}}),document.defaultView&&document.defaultView.getComputedStyle)getComputedStyle=function(elem,name){var ret,defaultView,computedStyle;if(name=name.replace(rupper,"-$1").toLowerCase(),(defaultView=elem.ownerDocument.defaultView)&&(computedStyle=defaultView.getComputedStyle(elem,null)))if(ret=computedStyle.getPropertyValue(name),""===ret&&!jQuery.contains(elem.ownerDocument.documentElement,elem))ret=jQuery.style(elem,name);return ret};if(document.documentElement.currentStyle)currentStyle=function(elem,name){var left,rsLeft,uncomputed,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;if(null===ret&&style&&(uncomputed=style[name]))ret=uncomputed;if(!rnumpx.test(ret)&&rnum.test(ret)){if(left=style.left,rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left)elem.runtimeStyle.left=elem.currentStyle.left;if(style.left="fontSize"===name?"1em":ret||0,ret=style.pixelLeft+"px",style.left=left,rsLeft)elem.runtimeStyle.left=rsLeft}return""===ret?"auto":ret};if(curCSS=getComputedStyle||currentStyle,jQuery.expr&&jQuery.expr.filters)jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return 0===width&&0===height||!jQuery.support.reliableHiddenOffsets&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rspacesAjax=/\s+/,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,_load=jQuery.fn.load,prefilters={},transports={},ajaxLocation,ajaxLocParts,allTypes=["*/"]+["*"];try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.extend({load:function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);else if(!this.length)return this;var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}var type="GET";if(params)if(jQuery.isFunction(params))callback=params,params=undefined;else if("object"==typeof params)params=jQuery.param(params,jQuery.ajaxSettings.traditional),type="POST";var self=this;return jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status,responseText){if(responseText=jqXHR.responseText,jqXHR.isResolved())jqXHR.done(function(r){responseText=r}),self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText);if(callback)self.each(callback,[responseText,status,jqXHR])}}),this},serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f)}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data))type=type||callback,callback=data,data=undefined;return jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type})}}),jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},ajaxSetup:function(target,settings){if(settings)ajaxExtend(target,jQuery.ajaxSettings);else settings=target,target=jQuery.ajaxSettings;return ajaxExtend(target,settings),target},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){if(2===state)return;if(state=2,timeoutTimer)clearTimeout(timeoutTimer);transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0;var isSuccess,success,error,statusText=nativeStatusText,response=responses?ajaxHandleResponses(s,jqXHR,responses):undefined,lastModified,etag;if(status>=200&&300>status||304===status){if(s.ifModified){if(lastModified=jqXHR.getResponseHeader("Last-Modified"))jQuery.lastModified[ifModifiedKey]=lastModified;if(etag=jqXHR.getResponseHeader("Etag"))jQuery.etag[ifModifiedKey]=etag}if(304===status)statusText="notmodified",isSuccess=!0;else try{success=ajaxConvert(s,response),statusText="success",isSuccess=!0}catch(e){statusText="parsererror",error=e}}else if(error=statusText,!statusText||status)if(statusText="error",0>status)status=0;if(jqXHR.status=status,jqXHR.statusText=""+(nativeStatusText||statusText),isSuccess)deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);else deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);if(jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals)globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]);if(completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals)if(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),!--jQuery.active)jQuery.event.trigger("ajaxStop")}if("object"==typeof url)options=url,url=undefined;options=options||{};var s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},ifModifiedKey,requestHeaders={},requestHeadersNames={},responseHeadersString,responseHeaders,transport,timeoutTimer,parts,state=0,fireGlobals,i,jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){if(!state)s.mimeType=type;return this},abort:function(statusText){if(statusText=statusText||"abort",transport)transport.abort(statusText);return done(0,statusText),this}};if(deferred.promise(jqXHR),jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,jqXHR.complete=completeDeferred.add,jqXHR.statusCode=function(map){if(map){var tmp;if(2>state)for(tmp in map)statusCode[tmp]=[statusCode[tmp],map[tmp]];else tmp=map[jqXHR.status],jqXHR.then(tmp,tmp)}return this},s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(rspacesAjax),null==s.crossDomain)parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]==ajaxLocParts[1]&&parts[2]==ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?80:443))==(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?80:443)));if(s.data&&s.processData&&"string"!=typeof s.data)s.data=jQuery.param(s.data,s.traditional);if(inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return!1;if(fireGlobals=s.global,s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),fireGlobals&&0===jQuery.active++)jQuery.event.trigger("ajaxStart");if(!s.hasContent){if(s.data)s.url+=(rquery.test(s.url)?"&":"?")+s.data,delete s.data;if(ifModifiedKey=s.url,s.cache===!1){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+(ret===s.url?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}}if(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)jqXHR.setRequestHeader("Content-Type",s.contentType);if(s.ifModified){if(ifModifiedKey=ifModifiedKey||s.url,jQuery.lastModified[ifModifiedKey])jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]);if(jQuery.etag[ifModifiedKey])jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey])}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort(),!1;for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR),!transport)done(-1,"No Transport");else{if(jqXHR.readyState=1,fireGlobals)globalEventContext.trigger("ajaxSend",[jqXHR,s]);if(s.async&&s.timeout>0)timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout);try{state=1,transport.send(requestHeaders,done)}catch(e){if(2>state)done(-1,e);else throw e}}return jqXHR},param:function(a,traditional){var s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(traditional===undefined)traditional=jQuery.ajaxSettings.traditional;if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(var prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")}}),jQuery.extend({active:0,lastModified:{},etag:{}});var jsc=jQuery.now(),jsre=/(\=)\?(&|$)|\?\?/i;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return jQuery.expando+"_"+jsc++}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var inspectData="application/x-www-form-urlencoded"===s.contentType&&"string"==typeof s.data;if("jsonp"===s.dataTypes[0]||s.jsonp!==!1&&(jsre.test(s.url)||inspectData&&jsre.test(s.data))){var responseContainer,jsonpCallback=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,previous=window[jsonpCallback],url=s.url,data=s.data,replace="$1"+jsonpCallback+"$2";if(s.jsonp!==!1)if(url=url.replace(jsre,replace),s.url===url){if(inspectData)data=data.replace(jsre,replace);if(s.data===data)url+=(/\?/.test(url)?"&":"?")+s.jsonp+"="+jsonpCallback}return s.url=url,s.data=data,window[jsonpCallback]=function(response){responseContainer=[response]},jqXHR.always(function(){if(window[jsonpCallback]=previous,responseContainer&&jQuery.isFunction(previous))window[jsonpCallback](responseContainer[0])}),s.converters["script json"]=function(){if(!responseContainer)jQuery.error(jsonpCallback+" was not called");return responseContainer[0]},s.dataTypes[0]="json","script"}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined)s.cache=!1;if(s.crossDomain)s.type="GET",s.global=!1}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){if(script=document.createElement("script"),script.async="async",s.scriptCharset)script.charset=s.scriptCharset;script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){if(script.onload=script.onreadystatechange=null,head&&script.parentNode)head.removeChild(script);if(script=undefined,!isAbort)callback(200,"success")}},head.insertBefore(script,head.firstChild)},abort:function(){if(script)script.onload(0,1)}}}});var xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks)xhrCallbacks[key](0,1)}:!1,xhrId=0,xhrCallbacks;if(jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR,function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&"withCredentials"in xhr})}(jQuery.ajaxSettings.xhr()),jQuery.support.ajax)jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var xhr=s.xhr(),handle,i;if(s.username)xhr.open(s.type,s.url,s.async,s.username,s.password);else xhr.open(s.type,s.url,s.async);if(s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];if(s.mimeType&&xhr.overrideMimeType)xhr.overrideMimeType(s.mimeType);if(!s.crossDomain&&!headers["X-Requested-With"])headers["X-Requested-With"]="XMLHttpRequest";try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(_){}if(xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||4===xhr.readyState)){if(callback=undefined,handle)if(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort)delete xhrCallbacks[handle];if(isAbort){if(4!==xhr.readyState)xhr.abort()}else{if(status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),responses={},xml=xhr.responseXML,xml&&xml.documentElement)responses.xml=xml;responses.text=xhr.responseText;try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&s.isLocal&&!s.crossDomain)status=responses.text?200:404;else if(1223===status)status=204}}}catch(firefoxAccessException){if(!isAbort)complete(-1,firefoxAccessException)}if(responses)complete(status,statusText,responses,responseHeaders)},!s.async||4===xhr.readyState)callback();else{if(handle=++xhrId,xhrOnUnloadAbort){if(!xhrCallbacks)xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort);xhrCallbacks[handle]=callback}xhr.onreadystatechange=callback}},abort:function(){if(callback)callback(0,1)}}}});var elemdisplay={},iframe,iframeDoc,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,timerId,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],fxNow;if(jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||0===speed)return this.animate(genFx("show",3),speed,easing,callback);else{for(var i=0,j=this.length;j>i;i++)if(elem=this[i],elem.style){if(display=elem.style.display,!jQuery._data(elem,"olddisplay")&&"none"===display)display=elem.style.display="";if(""===display&&"none"===jQuery.css(elem,"display"))jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName))}for(i=0;j>i;i++)if(elem=this[i],elem.style)if(display=elem.style.display,""===display||"none"===display)elem.style.display=jQuery._data(elem,"olddisplay")||"";return this}},hide:function(speed,easing,callback){if(speed||0===speed)return this.animate(genFx("hide",3),speed,easing,callback);else{for(var elem,display,i=0,j=this.length;j>i;i++)if(elem=this[i],elem.style)if(display=jQuery.css(elem,"display"),"none"!==display&&!jQuery._data(elem,"olddisplay"))jQuery._data(elem,"olddisplay",display);for(i=0;j>i;i++)if(this[i].style)this[i].style.display="none";return this}},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool="boolean"==typeof fn;if(jQuery.isFunction(fn)&&jQuery.isFunction(fn2))this._toggle.apply(this,arguments);else if(null==fn||bool)this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]()});else this.animate(genFx("toggle",3),fn,fn2,callback);return this},fadeTo:function(speed,to,easing,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){function doAnimation(){if(optall.queue===!1)jQuery._mark(this);var opt=jQuery.extend({},optall),isElement=1===this.nodeType,hidden=isElement&&jQuery(this).is(":hidden"),name,val,p,e,parts,start,end,unit,method;opt.animatedProperties={};for(p in prop){if(name=jQuery.camelCase(p),p!==name)prop[name]=prop[p],delete prop[p];if(val=prop[name],jQuery.isArray(val))opt.animatedProperties[name]=val[1],val=prop[name]=val[0];else opt.animatedProperties[name]=opt.specialEasing&&opt.specialEasing[name]||opt.easing||"swing";if("hide"===val&&hidden||"show"===val&&!hidden)return opt.complete.call(this);if(isElement&&("height"===name||"width"===name))if(opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===jQuery.css(this,"display")&&"none"===jQuery.css(this,"float"))if(!jQuery.support.inlineBlockNeedsLayout||"inline"===defaultDisplay(this.nodeName))this.style.display="inline-block";else this.style.zoom=1}if(null!=opt.overflow)this.style.overflow="hidden";for(p in prop)if(e=new jQuery.fx(this,opt,p),val=prop[p],rfxtypes.test(val))if(method=jQuery._data(this,"toggle"+p)||("toggle"===val?hidden?"show":"hide":0))jQuery._data(this,"toggle"+p,"show"===method?"hide":"show"),e[method]();else e[val]();else if(parts=rfxnum.exec(val),start=e.cur(),parts){if(end=parseFloat(parts[2]),unit=parts[3]||(jQuery.cssNumber[p]?"":"px"),"px"!==unit)jQuery.style(this,p,(end||1)+unit),start=(end||1)/e.cur()*start,jQuery.style(this,p,start+unit);if(parts[1])end=("-="===parts[1]?-1:1)*end+start;e.custom(start,end,unit)}else e.custom(start,val,"");return!0}var optall=jQuery.speed(speed,easing,callback);if(jQuery.isEmptyObject(prop))return this.each(optall.complete,[!1]);return prop=jQuery.extend({},prop),optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){if("string"!=typeof type)gotoEnd=clearQueue,clearQueue=type,type=undefined;if(clearQueue&&type!==!1)this.queue(type||"fx",[]);return this.each(function(){function stopQueue(elem,data,index){var hooks=data[index];jQuery.removeData(elem,index,!0),hooks.stop(gotoEnd)}var index,hadTimers=!1,timers=jQuery.timers,data=jQuery._data(this);if(!gotoEnd)jQuery._unmark(!0,this);if(null==type){for(index in data)if(data[index]&&data[index].stop&&index.indexOf(".run")===index.length-4)stopQueue(this,data,index)}else if(data[index=type+".run"]&&data[index].stop)stopQueue(this,data,index);for(index=timers.length;index--;)if(timers[index].elem===this&&(null==type||timers[index].queue===type)){if(gotoEnd)timers[index](!0);else timers[index].saveState();hadTimers=!0,timers.splice(index,1)}if(!gotoEnd||!hadTimers)jQuery.dequeue(this,type)})}}),jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};if(opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null==opt.queue||opt.queue===!0)opt.queue="fx";return opt.old=opt.complete,opt.complete=function(noUnmark){if(jQuery.isFunction(opt.old))opt.old.call(this);if(opt.queue)jQuery.dequeue(this,opt.queue);else if(noUnmark!==!1)jQuery._unmark(this)},opt},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p},swing:function(p,n,firstNum,diff){return(-Math.cos(p*Math.PI)/2+.5)*diff+firstNum}},timers:[],fx:function(elem,options,prop){this.options=options,this.elem=elem,this.prop=prop,options.orig=options.orig||{}}}),jQuery.fx.prototype={update:function(){if(this.options.step)this.options.step.call(this.elem,this.now,this);(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var parsed,r=jQuery.css(this.elem,this.prop);return isNaN(parsed=parseFloat(r))?!r||"auto"===r?0:r:parsed},custom:function(from,to,unit){function t(gotoEnd){return self.step(gotoEnd)}var self=this,fx=jQuery.fx;if(this.startTime=fxNow||createFxNow(),this.end=to,this.now=this.start=from,this.pos=this.state=0,this.unit=unit||this.unit||(jQuery.cssNumber[this.prop]?"":"px"),t.queue=this.options.queue,t.elem=this.elem,t.saveState=function(){if(self.options.hide&&jQuery._data(self.elem,"fxshow"+self.prop)===undefined)jQuery._data(self.elem,"fxshow"+self.prop,self.start)},t()&&jQuery.timers.push(t)&&!timerId)timerId=setInterval(fx.tick,fx.interval)},show:function(){var dataShow=jQuery._data(this.elem,"fxshow"+this.prop);if(this.options.orig[this.prop]=dataShow||jQuery.style(this.elem,this.prop),this.options.show=!0,dataShow!==undefined)this.custom(this.cur(),dataShow);else this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery._data(this.elem,"fxshow"+this.prop)||jQuery.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(gotoEnd){var p,n,complete,t=fxNow||createFxNow(),done=!0,elem=this.elem,options=this.options;if(gotoEnd||t>=options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),options.animatedProperties[this.prop]=!0;for(p in options.animatedProperties)if(options.animatedProperties[p]!==!0)done=!1;if(done){if(null!=options.overflow&&!jQuery.support.shrinkWrapBlocks)jQuery.each(["","X","Y"],function(index,value){elem.style["overflow"+value]=options.overflow[index]});if(options.hide)jQuery(elem).hide();if(options.hide||options.show)for(p in options.animatedProperties)jQuery.style(elem,p,options.orig[p]),jQuery.removeData(elem,"fxshow"+p,!0),jQuery.removeData(elem,"toggle"+p,!0);if(complete=options.complete)options.complete=!1,complete.call(elem)}return!1}else{if(1/0==options.duration)this.now=t;else n=t-this.startTime,this.state=n/options.duration,this.pos=jQuery.easing[options.animatedProperties[this.prop]](this.state,n,0,1,options.duration),this.now=this.start+(this.end-this.start)*this.pos;this.update()}return!0}},jQuery.extend(jQuery.fx,{tick:function(){for(var timer,timers=jQuery.timers,i=0;i<timers.length;i++)if(timer=timers[i],!timer()&&timers[i]===timer)timers.splice(i--,1);if(!timers.length)jQuery.fx.stop()},interval:13,stop:function(){clearInterval(timerId),timerId=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now)},_default:function(fx){if(fx.elem.style&&null!=fx.elem.style[fx.prop])fx.elem.style[fx.prop]=fx.now+fx.unit;
else fx.elem[fx.prop]=fx.now}}}),jQuery.each(["width","height"],function(i,prop){jQuery.fx.step[prop]=function(fx){jQuery.style(fx.elem,prop,Math.max(0,fx.now)+fx.unit)}}),jQuery.expr&&jQuery.expr.filters)jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;if("getBoundingClientRect"in document.documentElement)jQuery.fn.offset=function(options){var elem=this[0],box;if(options)return this.each(function(i){jQuery.offset.setOffset(this,options,i)});if(!elem||!elem.ownerDocument)return null;if(elem===elem.ownerDocument.body)return jQuery.offset.bodyOffset(elem);try{box=elem.getBoundingClientRect()}catch(e){}var doc=elem.ownerDocument,docElem=doc.documentElement;if(!box||!jQuery.contains(docElem,elem))return box?{top:box.top,left:box.left}:{top:0,left:0};var body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop,scrollLeft=win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:top,left:left}};else jQuery.fn.offset=function(options){var elem=this[0];if(options)return this.each(function(i){jQuery.offset.setOffset(this,options,i)});if(!elem||!elem.ownerDocument)return null;if(elem===elem.ownerDocument.body)return jQuery.offset.bodyOffset(elem);for(var computedStyle,offsetParent=elem.offsetParent,prevOffsetParent=elem,doc=elem.ownerDocument,docElem=doc.documentElement,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;(elem=elem.parentNode)&&elem!==body&&elem!==docElem&&(!jQuery.support.fixedPosition||"fixed"!==prevComputedStyle.position);){if(computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top-=elem.scrollTop,left-=elem.scrollLeft,elem===offsetParent){if(top+=elem.offsetTop,left+=elem.offsetLeft,jQuery.support.doesNotAddBorder&&(!jQuery.support.doesAddBorderForTableAndCells||!rtable.test(elem.nodeName)))top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0;prevOffsetParent=offsetParent,offsetParent=elem.offsetParent}if(jQuery.support.subtractsBorderForOverflowNotVisible&&"visible"!==computedStyle.overflow)top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0;prevComputedStyle=computedStyle}if("relative"===prevComputedStyle.position||"static"===prevComputedStyle.position)top+=body.offsetTop,left+=body.offsetLeft;if(jQuery.support.fixedPosition&&"fixed"===prevComputedStyle.position)top+=Math.max(docElem.scrollTop,body.scrollTop),left+=Math.max(docElem.scrollLeft,body.scrollLeft);return{top:top,left:left}};if(jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(jQuery.support.doesNotIncludeMarginInBodyOffset)top+=parseFloat(jQuery.css(body,"marginTop"))||0,left+=parseFloat(jQuery.css(body,"marginLeft"))||0;return{top:top,left:left}},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if("static"===position)elem.style.position="relative";var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition)curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left;else curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0;if(jQuery.isFunction(options))options=options.call(elem,i,curOffset);if(null!=options.top)props.top=options.top-curOffset.top+curTop;if(null!=options.left)props.left=options.left-curOffset.left+curLeft;if("using"in options)options.using.call(elem,props);else curElem.css(props)}},jQuery.fn.extend({position:function(){if(!this[0])return null;var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();return offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0,offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0,parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0,parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0,{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||document.body;offsetParent&&!rroot.test(offsetParent.nodeName)&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent})}}),jQuery.each(["Left","Top"],function(i,name){var method="scroll"+name;jQuery.fn[method]=function(val){var elem,win;if(val===undefined){if(elem=this[0],!elem)return null;return win=getWindow(elem),win?"pageXOffset"in win?win[i?"pageYOffset":"pageXOffset"]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method]}return this.each(function(){if(win=getWindow(this))win.scrollTo(!i?val:jQuery(win).scrollLeft(),i?val:jQuery(win).scrollTop());else this[method]=val})}}),jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn["inner"+name]=function(){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,"padding")):this[type]():null},jQuery.fn["outer"+name]=function(margin){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,margin?"margin":"border")):this[type]():null},jQuery.fn[type]=function(size){var elem=this[0];if(!elem)return null==size?null:this;if(jQuery.isFunction(size))return this.each(function(i){var self=jQuery(this);self[type](size.call(this,i,self[type]()))});if(jQuery.isWindow(elem)){var docElemProp=elem.document.documentElement["client"+name],body=elem.document.body;return"CSS1Compat"===elem.document.compatMode&&docElemProp||body&&body["client"+name]||docElemProp}else if(9===elem.nodeType)return Math.max(elem.documentElement["client"+name],elem.body["scroll"+name],elem.documentElement["scroll"+name],elem.body["offset"+name],elem.documentElement["offset"+name]);else if(size===undefined){var orig=jQuery.css(elem,type),ret=parseFloat(orig);return jQuery.isNumeric(ret)?ret:orig}else return this.css(type,"string"==typeof size?size:size+"px")}}),window.jQuery=window.$=jQuery,"function"==typeof define&&define.amd&&define.amd.jQuery)define("jquery",[],function(){return jQuery})}(window),function(){var root=this,previousUnderscore=root._,breaker={},ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,_=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if("undefined"!=typeof exports){if("undefined"!=typeof module&&module.exports)exports=module.exports=_;exports._=_}else root._=_;_.VERSION="1.5.2";var each=_.each=_.forEach=function(obj,iterator,context){if(null==obj)return;if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length){for(var i=0,length=obj.length;length>i;i++)if(iterator.call(context,obj[i],i,obj)===breaker)return}else for(var keys=_.keys(obj),i=0,length=keys.length;length>i;i++)if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return};_.map=_.collect=function(obj,iterator,context){var results=[];if(null==obj)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);return each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))}),results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}if(each(obj,function(value,index,list){if(!initial)memo=value,initial=!0;else memo=iterator.call(context,memo,value,index,list)}),!initial)throw new TypeError(reduceError);return memo},_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(null==obj)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}if(each(obj,function(value,index,list){if(index=keys?keys[--length]:--length,!initial)memo=obj[index],initial=!0;else memo=iterator.call(context,memo,obj[index],index,list)}),!initial)throw new TypeError(reduceError);return memo},_.find=_.detect=function(obj,iterator,context){var result;return any(obj,function(value,index,list){if(iterator.call(context,value,index,list))return result=value,!0}),result},_.filter=_.select=function(obj,iterator,context){var results=[];if(null==obj)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);return each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results.push(value)}),results},_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)},_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!0;if(null==obj)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);return each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker}),!!result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=!1;if(null==obj)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);return each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker}),!!result};_.contains=_.include=function(obj,target){if(null==obj)return!1;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return-1!=obj.indexOf(target);return any(obj,function(value){return value===target})},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})},_.where=function(obj,attrs,first){if(_.isEmpty(attrs))return first?void 0:[];return _[first?"find":"filter"](obj,function(value){for(var key in attrs)if(attrs[key]!==value[key])return!1;return!0})},_.findWhere=function(obj,attrs){return _.where(obj,attrs,!0)},_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-1/0;var result={computed:-1/0,value:-1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>result.computed&&(result={value:value,computed:computed})}),result.value},_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return 1/0;var result={computed:1/0,value:1/0};return each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})}),result.value},_.shuffle=function(obj){var rand,index=0,shuffled=[];return each(obj,function(value){rand=_.random(index++),shuffled[index-1]=shuffled[rand],shuffled[rand]=value}),shuffled},_.sample=function(obj,n,guard){if(arguments.length<2||guard)return obj[_.random(obj.length-1)];return _.shuffle(obj).slice(0,Math.max(0,n))};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(a>b||void 0===a)return 1;if(b>a||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,value,context){var result={},iterator=null==value?_.identity:lookupIterator(value);return each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)}),result}};_.groupBy=group(function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)}),_.indexBy=group(function(result,key,value){result[key]=value}),_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1}),_.sortedIndex=function(array,obj,iterator,context){iterator=null==iterator?_.identity:lookupIterator(iterator);for(var value=iterator.call(context,obj),low=0,high=array.length;high>low;){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low},_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)},_.size=function(obj){if(null==obj)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length},_.first=_.head=_.take=function(array,n,guard){if(null==array)return void 0;return null==n||guard?array[0]:slice.call(array,0,n)},_.initial=function(array,n,guard){return slice.call(array,0,array.length-(null==n||guard?1:n))},_.last=function(array,n,guard){if(null==array)return void 0;if(null==n||guard)return array[array.length-1];else return slice.call(array,Math.max(array.length-n,0))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){if(shallow&&_.every(input,_.isArray))return concat.apply(output,input);return each(input,function(value){if(_.isArray(value)||_.isArguments(value))shallow?push.apply(output,value):flatten(value,shallow,output);else output.push(value)}),output};_.flatten=function(array,shallow){return flatten(array,shallow,[])},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted))context=iterator,iterator=isSorted,isSorted=!1;var initial=iterator?_.map(array,iterator,context):array,results=[],seen=[];return each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value))seen.push(value),results.push(array[index])}),results},_.union=function(){return _.uniq(_.flatten(arguments,!0))},_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})},_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){for(var length=_.max(_.pluck(arguments,"length").concat(0)),results=new Array(length),i=0;length>i;i++)results[i]=_.pluck(arguments,""+i);return results},_.object=function(list,values){if(null==list)return{};for(var result={},i=0,length=list.length;length>i;i++)if(values)result[list[i]]=values[i];else result[list[i][0]]=list[i][1];return result},_.indexOf=function(array,item,isSorted){if(null==array)return-1;var i=0,length=array.length;if(isSorted)if("number"==typeof isSorted)i=0>isSorted?Math.max(0,length+isSorted):isSorted;else return i=_.sortedIndex(array,item),array[i]===item?i:-1;if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;length>i;i++)if(array[i]===item)return i;return-1},_.lastIndexOf=function(array,item,from){if(null==array)return-1;var hasIndex=null!=from;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);for(var i=hasIndex?from:array.length;i--;)if(array[i]===item)return i;return-1},_.range=function(start,stop,step){if(arguments.length<=1)stop=start||0,start=0;step=arguments[2]||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),idx=0,range=new Array(length);length>idx;)range[idx++]=start,start+=step;return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;return args=slice.call(arguments,2),bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self}},_.partial=function(func){var args=slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)))}},_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(0===funcs.length)throw new Error("bindAll must be passed function names");return each(funcs,function(f){obj[f]=_.bind(obj[f],obj)}),obj},_.memoize=function(func,hasher){var memo={};return hasher||(hasher=_.identity),function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))},_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=options.leading===!1?0:new Date,timeout=null,result=func.apply(context,args)};return function(){var now=new Date;if(!previous&&options.leading===!1)previous=now;var remaining=wait-(now-previous);if(context=this,args=arguments,0>=remaining)clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args);else if(!timeout&&options.trailing!==!1)timeout=setTimeout(later,remaining);return result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;return function(){context=this,args=arguments,timestamp=new Date;var later=function(){var last=new Date-timestamp;if(wait>last)timeout=setTimeout(later,wait-last);else if(timeout=null,!immediate)result=func.apply(context,args)},callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result}},_.once=function(func){var ran=!1,memo;return function(){if(ran)return memo;return ran=!0,memo=func.apply(this,arguments),func=null,memo}},_.wrap=function(func,wrapper){return function(){var args=[func];return push.apply(args,arguments),wrapper.apply(this,args)}},_.compose=function(){var funcs=arguments;return function(){for(var args=arguments,i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}},_.after=function(times,func){return function(){if(--times<1)return func.apply(this,arguments)}},_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=new Array(length),i=0;length>i;i++)values[i]=obj[keys[i]];return values},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=new Array(length),i=0;length>i;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;length>i;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)if(_.isFunction(obj[key]))names.push(key);return names.sort()},_.extend=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]=source[prop]}),obj},_.pick=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));return each(keys,function(key){if(key in obj)copy[key]=obj[key]}),copy},_.omit=function(obj){var copy={},keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj)if(!_.contains(keys,key))copy[key]=obj[key];return copy},_.defaults=function(obj){return each(slice.call(arguments,1),function(source){if(source)for(var prop in source)if(void 0===obj[prop])obj[prop]=source[prop]}),obj},_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)},_.tap=function(obj,interceptor){return interceptor(obj),obj};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return!1;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var length=aStack.length;length--;)if(aStack[length]==a)return bStack[length]==b;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor))return!1;aStack.push(a),bStack.push(b);var size=0,result=!0;if("[object Array]"==className){if(size=a.length,result=size==b.length)for(;size--&&(result=eq(a[size],b[size],aStack,bStack)););}else{for(var key in a)if(_.has(a,key))if(size++,!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break;if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}return aStack.pop(),bStack.pop(),result};if(_.isEqual=function(a,b){return eq(a,b,[],[])},_.isEmpty=function(obj){if(null==obj)return!0;if(_.isArray(obj)||_.isString(obj))return 0===obj.length;for(var key in obj)if(_.has(obj,key))return!1;return!0},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"==toString.call(obj)},_.isObject=function(obj){return obj===Object(obj)},each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}}),!_.isArguments(arguments))_.isArguments=function(obj){return!(!obj||!_.has(obj,"callee"))};if("function"!=typeof/./)_.isFunction=function(obj){return"function"==typeof obj};_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj},_.isBoolean=function(obj){return obj===!0||obj===!1||"[object Boolean]"==toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.times=function(n,iterator,context){for(var accum=Array(Math.max(0,n)),i=0;n>i;i++)accum[i]=iterator.call(context,i);return accum},_.random=function(min,max){if(null==max)max=min,min=0;return min+Math.floor(Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(null==string)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}}),_.result=function(object,property){if(null==object)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value},_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";if(text.replace(matcher,function(match,escape,interpolate,evaluate,offset){if(source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]}),escape)source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'";if(interpolate)source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'";if(evaluate)source+="';\n"+evaluate+"\n__p+='";return index=offset+match.length,match}),source+="';\n",!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};return template.source="function("+(settings.variable||"obj")+"){\n"+source+"}",template},_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_),each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;if(method.apply(obj,arguments),("shift"==name||"splice"==name)&&0===obj.length)delete obj[0];return result.call(this,obj)}}),each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(global){return function(){var ret,fn;return ret||global._}}(this)),function(){var root=this,previousBackbone=root.Backbone,array=[],push=array.push,slice=array.slice,splice=array.splice,Backbone;if("undefined"!=typeof exports)Backbone=exports;else Backbone=root.Backbone={};Backbone.VERSION="1.1.0";var _=root._;if(!_&&"undefined"!=typeof require)_=require("underscore");Backbone.$=root.jQuery||root.Zepto||root.ender||root.$,Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var Events=Backbone.Events={on:function(name,callback,context){if(!eventsApi(this,"on",name,[callback,context])||!callback)return this;this._events||(this._events={});var events=this._events[name]||(this._events[name]=[]);return events.push({callback:callback,context:context,ctx:context||this}),this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this,once=_.once(function(){self.off(name,once),callback.apply(this,arguments)});return once._callback=callback,this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context)return this._events={},this;for(names=name?[name]:_.keys(this._events),i=0,l=names.length;l>i;i++)if(name=names[i],events=this._events[name]){if(this._events[name]=retain=[],callback||context)for(j=0,k=events.length;k>j;j++)if(ev=events[j],callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)retain.push(ev);if(!retain.length)delete this._events[name]}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name],allEvents=this._events.all;if(events)triggerEvents(events,args);if(allEvents)triggerEvents(allEvents,arguments);return this},stopListening:function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name&&!callback;if(!callback&&"object"==typeof name)callback=this;if(obj)(listeningTo={})[obj._listenId]=obj;for(var id in listeningTo)if(obj=listeningTo[id],obj.off(name,callback,this),remove||_.isEmpty(obj._events))delete this._listeningTo[id];return this}},eventSplitter=/\s+/,eventsApi=function(obj,action,name,rest){if(!name)return!0;if("object"==typeof name){for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));return!1}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;l>i;i++)obj[action].apply(obj,[names[i]].concat(rest));return!1}return!0},triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx);return;case 1:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:for(;++i<l;)(ev=events[i]).callback.apply(ev.ctx,args)}},listenMethods={listenTo:"on",listenToOnce:"once"};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){var listeningTo=this._listeningTo||(this._listeningTo={}),id=obj._listenId||(obj._listenId=_.uniqueId("l"));if(listeningTo[id]=obj,!callback&&"object"==typeof name)callback=this;return obj[implementation](name,callback,this),this}}),Events.bind=Events.on,Events.unbind=Events.off,_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};if(options||(options={}),this.cid=_.uniqueId("c"),this.attributes={},options.collection)this.collection=options.collection;if(options.parse)attrs=this.parse(attrs,options)||{};attrs=_.defaults({},attrs,_.result(this,"defaults")),this.set(attrs,options),this.changed={},this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return null!=this.get(attr)},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(null==key)return this;if("object"==typeof key)attrs=key,options=val;else(attrs={})[key]=val;if(options||(options={}),!this._validate(attrs,options))return!1;if(unset=options.unset,silent=options.silent,changes=[],changing=this._changing,this._changing=!0,!changing)this._previousAttributes=_.clone(this.attributes),this.changed={};if(current=this.attributes,prev=this._previousAttributes,this.idAttribute in attrs)this.id=attrs[this.idAttribute];
for(attr in attrs){if(val=attrs[attr],!_.isEqual(current[attr],val))changes.push(attr);if(!_.isEqual(prev[attr],val))this.changed[attr]=val;else delete this.changed[attr];unset?delete current[attr]:current[attr]=val}if(!silent){if(changes.length)this._pending=!0;for(var i=0,l=changes.length;l>i;i++)this.trigger("change:"+changes[i],this,current[changes[i]],options)}if(changing)return this;if(!silent)for(;this._pending;)this._pending=!1,this.trigger("change",this,options);return this._pending=!1,this._changing=!1,this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:!0}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:!0}))},hasChanged:function(attr){if(null==attr)return!_.isEmpty(this.changed);return _.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):!1;var val,changed=!1,old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff){if(_.isEqual(old[attr],val=diff[attr]))continue;(changed||(changed={}))[attr]=val}return changed},previous:function(attr){if(null==attr||!this._previousAttributes)return null;return this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){if(options=options?_.clone(options):{},void 0===options.parse)options.parse=!0;var model=this,success=options.success;return options.success=function(resp){if(!model.set(model.parse(resp,options),options))return!1;if(success)success(model,resp,options);model.trigger("sync",model,resp,options)},wrapError(this,options),this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(null==key||"object"==typeof key)attrs=key,options=val;else(attrs={})[key]=val;if(options=_.extend({validate:!0},options),attrs&&!options.wait){if(!this.set(attrs,options))return!1}else if(!this._validate(attrs,options))return!1;if(attrs&&options.wait)this.attributes=_.extend({},attributes,attrs);if(void 0===options.parse)options.parse=!0;var model=this,success=options.success;if(options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);if(options.wait)serverAttrs=_.extend(attrs||{},serverAttrs);if(_.isObject(serverAttrs)&&!model.set(serverAttrs,options))return!1;if(success)success(model,resp,options);model.trigger("sync",model,resp,options)},wrapError(this,options),method=this.isNew()?"create":options.patch?"patch":"update","patch"===method)options.attrs=attrs;if(xhr=this.sync(method,this,options),attrs&&options.wait)this.attributes=attributes;return xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,destroy=function(){model.trigger("destroy",model,model.collection,options)};if(options.success=function(resp){if(options.wait||model.isNew())destroy();if(success)success(model,resp,options);if(!model.isNew())model.trigger("sync",model,resp,options)},this.isNew())return options.success(),!1;wrapError(this,options);var xhr=this.sync("delete",this,options);if(!options.wait)destroy();return xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();if(this.isNew())return base;return base+("/"===base.charAt(base.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(options){return this._validate({},_.extend(options||{},{validate:!0}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;if(!error)return!0;return this.trigger("invalid",this,error,_.extend(options,{validationError:error})),!1}});var modelMethods=["keys","values","pairs","invert","pick","omit"];_.each(modelMethods,function(method){Model.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.attributes),_[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){if(options||(options={}),options.model)this.model=options.model;if(void 0!==options.comparator)this.comparator=options.comparator;if(this._reset(),this.initialize.apply(this,arguments),models)this.reset(models,_.extend({silent:!0},options))},setOptions={add:!0,remove:!0,merge:!0},addOptions={add:!0,remove:!1};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:!1},options,addOptions))},remove:function(models,options){var singular=!_.isArray(models);models=singular?[models]:_.clone(models),options||(options={});var i,l,index,model;for(i=0,l=models.length;l>i;i++){if(model=models[i]=this.get(models[i]),!model)continue;if(delete this._byId[model.id],delete this._byId[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,!options.silent)options.index=index,model.trigger("remove",model,this,options);this._removeReference(model)}return singular?models[0]:models},set:function(models,options){if(options=_.defaults({},options,setOptions),options.parse)models=this.parse(models,options);var singular=!_.isArray(models);models=singular?models?[models]:[]:_.clone(models);var i,l,id,model,attrs,existing,sort,at=options.at,targetModel=this.model,sortable=this.comparator&&null==at&&options.sort!==!1,sortAttr=_.isString(this.comparator)?this.comparator:null,toAdd=[],toRemove=[],modelMap={},add=options.add,merge=options.merge,remove=options.remove,order=!sortable&&add&&remove?[]:!1;for(i=0,l=models.length;l>i;i++){if(attrs=models[i],attrs instanceof Model)id=model=attrs;else id=attrs[targetModel.prototype.idAttribute];if(existing=this.get(id)){if(remove)modelMap[existing.cid]=!0;if(merge){if(attrs=attrs===model?model.attributes:attrs,options.parse)attrs=existing.parse(attrs,options);if(existing.set(attrs,options),sortable&&!sort&&existing.hasChanged(sortAttr))sort=!0}models[i]=existing}else if(add){if(model=models[i]=this._prepareModel(attrs,options),!model)continue;if(toAdd.push(model),model.on("all",this._onModelEvent,this),this._byId[model.cid]=model,null!=model.id)this._byId[model.id]=model}if(order)order.push(existing||model)}if(remove){for(i=0,l=this.length;l>i;++i)if(!modelMap[(model=this.models[i]).cid])toRemove.push(model);if(toRemove.length)this.remove(toRemove,options)}if(toAdd.length||order&&order.length){if(sortable)sort=!0;if(this.length+=toAdd.length,null!=at)for(i=0,l=toAdd.length;l>i;i++)this.models.splice(at+i,0,toAdd[i]);else{if(order)this.models.length=0;var orderedModels=order||toAdd;for(i=0,l=orderedModels.length;l>i;i++)this.models.push(orderedModels[i])}}if(sort)this.sort({silent:!0});if(!options.silent){for(i=0,l=toAdd.length;l>i;i++)(model=toAdd[i]).trigger("add",model,this,options);if(sort||order&&order.length)this.trigger("sort",this,options)}return singular?models[0]:models},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;l>i;i++)this._removeReference(this.models[i]);if(options.previousModels=this.models,this._reset(),models=this.add(models,_.extend({silent:!0},options)),!options.silent)this.trigger("reset",this,options);return models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options),model},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){if(null==obj)return void 0;return this._byId[obj.id]||this._byId[obj.cid]||this._byId[obj]},at:function(index){return this.models[index]},where:function(attrs,first){if(_.isEmpty(attrs))return first?void 0:[];return this[first?"find":"filter"](function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},findWhere:function(attrs){return this.where(attrs,!0)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");if(options||(options={}),_.isString(this.comparator)||1===this.comparator.length)this.models=this.sortBy(this.comparator,this);else this.models.sort(_.bind(this.comparator,this));if(!options.silent)this.trigger("sort",this,options);return this},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){if(options=options?_.clone(options):{},void 0===options.parse)options.parse=!0;var success=options.success,collection=this;return options.success=function(resp){var method=options.reset?"reset":"set";if(collection[method](resp,options),success)success(collection,resp,options);collection.trigger("sync",collection,resp,options)},wrapError(this,options),this.sync("read",this,options)},create:function(model,options){if(options=options?_.clone(options):{},!(model=this._prepareModel(model,options)))return!1;if(!options.wait)this.add(model,options);var collection=this,success=options.success;return options.success=function(model,resp,options){if(options.wait)collection.add(model,options);if(success)success(model,resp,options)},model.save(null,options),model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model){if(!attrs.collection)attrs.collection=this;return attrs}options=options?_.clone(options):{},options.collection=this;var model=new this.model(attrs,options);if(!model.validationError)return model;return this.trigger("invalid",this,model.validationError,options),!1},_removeReference:function(model){if(this===model.collection)delete model.collection;model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){if(("add"===event||"remove"===event)&&collection!==this)return;if("destroy"===event)this.remove(model,options);if(model&&event==="change:"+model.idAttribute)if(delete this._byId[model.previous(model.idAttribute)],null!=model.id)this._byId[model.id]=model;this.trigger.apply(this,arguments)}});var methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.models),_[method].apply(_,args)}});var attributeMethods=["groupBy","countBy","sortBy"];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),options||(options={}),_.extend(this,_.pick(options,viewOptions)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(element,delegate){if(this.$el)this.undelegateEvents();if(this.$el=element instanceof Backbone.$?element:Backbone.$(element),this.el=this.$el[0],delegate!==!1)this.delegateEvents();return this},delegateEvents:function(events){if(!events&&!(events=_.result(this,"events")))return this;this.undelegateEvents();for(var key in events){var method=events[key];if(!_.isFunction(method))method=this[events[key]];if(!method)continue;var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];if(method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector)this.$el.on(eventName,method);else this.$el.on(eventName,selector,method)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var attrs=_.extend({},_.result(this,"attributes"));if(this.id)attrs.id=_.result(this,"id");if(this.className)attrs["class"]=_.result(this,"className");var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,!1)}else this.setElement(_.result(this,"el"),!1)}}),Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(!options.url)params.url=_.result(model,"url")||urlError();if(null==options.data&&model&&("create"===method||"update"===method||"patch"===method))params.contentType="application/json",params.data=JSON.stringify(options.attrs||model.toJSON(options));if(options.emulateJSON)params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{};if(options.emulateHTTP&&("PUT"===type||"DELETE"===type||"PATCH"===type)){if(params.type="POST",options.emulateJSON)params.data._method=type;var beforeSend=options.beforeSend;options.beforeSend=function(xhr){if(xhr.setRequestHeader("X-HTTP-Method-Override",type),beforeSend)return beforeSend.apply(this,arguments)}}if("GET"!==params.type&&!options.emulateJSON)params.processData=!1;if("PATCH"===params.type&&noXhrPatch)params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};var xhr=options.xhr=Backbone.ajax(_.extend(params,options));return model.trigger("request",model,xhr,options),xhr};var noXhrPatch=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){if(options||(options={}),options.routes)this.routes=options.routes;this._bindRoutes(),this.initialize.apply(this,arguments)},optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){if(!_.isRegExp(route))route=this._routeToRegExp(route);if(_.isFunction(name))callback=name,name="";if(!callback)callback=this[name];var router=this;return Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);callback&&callback.apply(router,args),router.trigger.apply(router,["route:"+name].concat(args)),router.trigger("route",name,args),Backbone.history.trigger("route",router,name,args)}),this},navigate:function(fragment,options){return Backbone.history.navigate(fragment,options),this},_bindRoutes:function(){if(!this.routes)return;this.routes=_.result(this,"routes");for(var route,routes=_.keys(this.routes);null!=(route=routes.pop());)this.route(route,this.routes[route])},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/]+)"}).replace(splatParam,"(.*?)"),new RegExp("^"+route+"$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param){return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){if(this.handlers=[],_.bindAll(this,"checkUrl"),"undefined"!=typeof window)this.location=window.location,this.history=window.history},routeStripper=/^[#\/]|\s+$/g,rootStripper=/^\/+|\/+$/g,isExplorer=/msie [\w.]+/,trailingSlash=/\/$/,pathStripper=/[?#].*$/;History.started=!1,_.extend(History.prototype,Events,{interval:50,getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=this.location.pathname;var root=this.root.replace(trailingSlash,"");if(!fragment.indexOf(root))fragment=fragment.slice(root.length)}else fragment=this.getHash();return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({root:"/"},this.options,options),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||7>=docMode);if(this.root=("/"+this.root+"/").replace(rootStripper,"/"),oldIE&&this._wantsHashChange)this.iframe=Backbone.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(fragment);if(this._hasPushState)Backbone.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!oldIE)Backbone.$(window).on("hashchange",this.checkUrl);else if(this._wantsHashChange)this._checkUrlInterval=setInterval(this.checkUrl,this.interval);this.fragment=fragment;var loc=this.location,atRoot=loc.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState)if(!this._hasPushState&&!atRoot)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;else if(this._hasPushState&&atRoot&&loc.hash)this.fragment=this.getHash().replace(routeStripper,""),this.history.replaceState({},document.title,this.root+this.fragment+loc.search);if(!this.options.silent)return this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe)current=this.getFragment(this.getHash(this.iframe));if(current===this.fragment)return!1;if(this.iframe)this.navigate(current);this.loadUrl()},loadUrl:function(fragment){return fragment=this.fragment=this.getFragment(fragment),_.any(this.handlers,function(handler){if(handler.route.test(fragment))return handler.callback(fragment),!0})},navigate:function(fragment,options){if(!History.started)return!1;if(!options||options===!0)options={trigger:!!options};var url=this.root+(fragment=this.getFragment(fragment||""));if(this.fragment=fragment,""===fragment&&"/"!==url)url=url.slice(0,-1);if(this._hasPushState)this.history[options.replace?"replaceState":"pushState"]({},document.title,url);else if(this._wantsHashChange){if(this._updateHash(this.location,fragment,options.replace),this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))){if(!options.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,fragment,options.replace)}}else return this.location.assign(url);if(options.trigger)return this.loadUrl(fragment)},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}}),Backbone.history=new History;var extend=function(protoProps,staticProps){var parent=this,child;if(protoProps&&_.has(protoProps,"constructor"))child=protoProps.constructor;else child=function(){return parent.apply(this,arguments)};_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};if(Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps)_.extend(child.prototype,protoProps);return child.__super__=parent.prototype,child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(model,options){var error=options.error;options.error=function(resp){if(error)error(model,resp,options);model.trigger("error",model,resp,options)}}}.call(this),define("backbone",["underscore","jquery"],function(global){return function(){var ret,fn;return fn=function(_,$){return _.noConflict(),$.noConflict(),Backbone.noConflict()},ret=fn.apply(global,arguments),ret||global.Backbone}}(this)),function(factory){if("function"==typeof define&&define.amd)define("js/lib/lucid",factory);else if(("object"==typeof module||"function"==typeof module)&&module.exports)module.exports=factory();else window.LucidJS=factory()}(function(){function EventEmitter(object){function on(event){function clear(){if(!listeners[event])return;for(aI=0;aI<args.length;aI+=1)listeners[event].splice(listeners[event].indexOf(args[aI]),1);if(listeners[event].length<1)delete listeners[event]}function batchOn(events,args){function clear(){var bI;for(bI=0;bI<bindings.length;bI+=1)bindings[bI].clear()}var eI,binding={},bindings=[];for(eI=0;eI<events.length;eI+=1)args.unshift(events[eI]),bindings.push(on.apply(this,args)),args.shift();return binding.clear=clear,binding}var args=Array.prototype.slice.apply(arguments,[1]),binding={},aI,sI;if("object"==typeof event&&"function"==typeof event.push)return batchOn(event,args);if("emitter"!==event.slice(0,7))trigger("emitter.listener",event,args);if(setEvents[event]){for(aI=0;aI<args.length;aI+=1){if("function"!=typeof args[aI])throw new Error("Cannot bind event. All callbacks must be functions.");for(sI=0;sI<setEvents[event].length;sI+=1)args[aI].apply(this,setEvents[event][sI])}return binding.clear=function(){},binding}if(!listeners[event])listeners[event]=[];for(aI=0;aI<args.length;aI+=1){if("function"!=typeof args[aI])throw new Error("Cannot bind event. All callbacks must be functions.");listeners[event].push(args[aI])}return binding.clear=clear,binding}function off(event){var args=Array.prototype.slice.apply(arguments,[1]),aI,sI;if("object"==typeof event&&"function"==typeof event.push){for(sI=0;sI<event.length;sI+=1)off.apply(null,[event[sI]].concat(args));return}if(!listeners[event])throw new Error('Tried to remove an event from a non-existant event of type "'+event+'".');for(aI=0;aI<args.length;aI+=1){if("function"!=typeof args[aI])throw new Error("Tried to remove a non-function.");var listenerIndex=listeners[event].indexOf(args[aI]);listeners[event].splice(listenerIndex,1)}}function once(event){var binding,args=Array.prototype.slice.apply(arguments,[1]),result=!0;return binding=on(event,function(){var aI,eventArgs=Array.prototype.slice.apply(arguments);for(binding.clear(),aI=0;aI<args.length;aI+=1)if(args[aI].apply(this,eventArgs)===!1)result=!1;return result})}function trigger(event,a1,a2,a3,a4,la){function batchTrigger(events,a1,a2,a3,a4,la){var eI,result=!0;if("undefined"!=typeof la)longArgs=Array.prototype.slice.apply(arguments,[1]);for(eI=0;eI<events.length;eI+=1)if(longArgs){if(args.unshift(events[eI]),trigger.apply(this,args)===!1)result=!1;args.shift()}else if(trigger(events[eI],a1,a2,a3,a4)===!1)result=!1;return result}var longArgs,lI,eventListeners,result=!0;if("undefined"!=typeof la)longArgs=Array.prototype.slice.apply(arguments,[1]);if("object"==typeof event&&"function"==typeof event.push)if(longArgs)return batchTrigger.apply(null,arguments);else return batchTrigger(event,a1,a2,a3,a4);for(event=event.split(".");event.length;){if(eventListeners=listeners[event.join(".")],"emitter"!==event[0])if(longArgs)trigger.apply(this,[].concat("emitter.event",event.join("."),longArgs));else trigger("emitter.event",a1,a2,a3,a4);if(eventListeners)for(eventListeners=[].concat(eventListeners),lI=0;lI<eventListeners.length;lI+=1)if(longArgs){if(eventListeners[lI].apply(this,longArgs)===!1)result=!1}else if(eventListeners[lI](a1,a2,a3,a4)===!1)result=!1;event.pop()}return result}function set(event){function batchSet(events,args){var eI,result=!0;for(eI=0;eI<events.length;eI+=1){if(args.unshift(events[eI]),trigger.apply(this,args)===!1)result=!1;args.shift()}return result}function clear(){if(setEvents[event])if(setEvents[event].splice(setEvents[event].indexOf(args),1),setEvents[event].length<1)delete setEvents[event]}var args=Array.prototype.slice.apply(arguments),setEvent={};if("object"==typeof event&&"function"==typeof event.push)return batchSet(event,args);if(trigger.apply(this,args),clearListeners(event),!setEvents[event])setEvents[event]=[];return setEvents[event].push(args.slice(1)),setEvent.clear=clear,setEvent}function clearSet(event){if(event)delete setEvents[event];else setEvents={}}function pipe(event){function captureListener(connection,emitter){connection.listenerBinding=on("emitter.listener",function(event){if(-1===connection.events.indexOf(event))connection.bindings.push(captureEvent(emitter,event)),connection.events.push(event)})}function captureEvent(emitter,event){return emitter.on(event,function(){var args=Array.prototype.slice.apply(arguments);return args.unshift(event),trigger.apply(this,args)})}function clearBatch(){if(bindings.length)for(;bindings.length;)bindings[0].clear(),bindings.splice(0,1)}function clear(){for(;connections.length;){if(connections[0].listenerBinding)connections[0].listenerBinding.clear();for(;connections[0].bindings.length;)connections[0].bindings[0].clear(),connections[0].bindings.splice(0,1);pipes.splice(pipes.indexOf(connections[0]),1),connections.splice(0,1)}}var api={},args=Array.prototype.slice.apply(arguments),eI,aI,pI,connections=[],connection,bindings=[],binding;if("object"==typeof event&&"function"==typeof event.push&&"string"==typeof event[0]){for(eI=0;eI<event.length;eI+=1)bindings.push(pipe.apply(null,[event[eI]].concat(args)));return api.clear=clearBatch,api}if("object"==typeof event&&"function"==typeof event.on)event=!1;else args.shift();if(event!==!1&&"string"!=typeof event)throw new Error("Cannot create pipe. The first argument must be an event string or an emitter.");for(aI=0;aI<args.length;aI+=1){for(pI=0;pI<pipes.length;pI+=1)if(pipes[pI].emitter===args[aI]){connection=pipes[pI];break}if(connection&&2===connection.type)continue;if(!connection)if(connection={},connection.emitter=args[aI],connection.bindings=[],connection.events=[],event)connection.type=1;else connection.type=2;if(-1!==connection.events.indexOf(event))continue;if(connection.events.push(event),1===connection.type)binding=captureEvent(args[aI],event),binding.event=event,connection.bindings.push(binding);else if(2===connection.type){for(event in listeners){if(!listeners.hasOwnProperty(event))continue;binding=args[aI].on(event,captureEvent),binding.event=event,connection.bindings.push(binding),connection.events.push(event)}captureListener(connection,args[aI])}connections.push(connection),pipes.push(connection)}return api.clear=clear,api}function clearPipes(event){var pI,bI,binding;for(pI=0;pI<pipes.length;pI+=1){if(event){if(2===pipes[pI].type)continue;if(-1===pipes[pI].events.indexOf(event))continue;pipes[pI].events.splice(pipes[pI].events.indexOf(event),1)}if(2===pipes[pI].type)pipes[pI].listenerBinding.clear();for(bI=0;bI<pipes[pI].bindings.length;bI+=1){if(event&&pipes[pI].bindings[bI].event!==event)continue;pipes[pI].bindings[bI].clear(),pipes[pI].bindings.splice(bI,1),bI-=1}if(pipes[pI].bindings.length<1)pipes.splice(pI,1),pI-=1}}function getListeners(event){if(event)return listeners[event];else return listeners}function clearListeners(event){if(event)delete listeners[event];else listeners={}}function clear(){trigger("emitter.clear"),listeners={},setEvents={},pipes={},delete emitter.on,delete emitter.once,delete emitter.trigger,delete emitter.set,delete emitter.pipe,delete emitter.listeners,delete emitter.clear}function handleNode(node){function clearNodeEmitter(){var DI;for(DI=0;DI<DOMEventListeners.length;DI+=1)try{if(node.removeEventListener)node.removeEventListener(DOMEventListeners[DI].event,DOMEventListeners[DI].listener,!1);else if(node.detachEvent)node.detachEvent("on"+DOMEventListeners[DI].event,DOMEventListeners[DI].listener)}catch(e){console.error(e)}handledEvents=[],listenerBinding.clear()}var handledEvents=[],listenerBinding,DOMEventListeners=[];listenerBinding=on("emitter.listener",function(event){function nodeListener(eventObj){var args=Array.prototype.slice.apply(arguments);if(args.unshift([event,"dom."+event]),trigger.apply(this,args)===!1)eventObj.preventDefault(),eventObj.stopPropagation()}if(handledEvents.indexOf(event)>-1)return;handledEvents.push(event);try{if(node.addEventListener)node.addEventListener(event,nodeListener,!1),DOMEventListeners.push({event:event,listener:nodeListener});else if(node.attachEvent)node.attachEvent("on"+event,nodeListener),DOMEventListeners.push({event:event,listener:nodeListener})}catch(e){console.error(e)}}),emitter.clearNodeEmitter=clearNodeEmitter}var emitter=object||{},listeners={},setEvents={},pipes=[];if(!(emitter.on||emitter.once||emitter.trigger||emitter.set||emitter.pipe||emitter.listeners))emitter.on=on,emitter.off=off,emitter.once=once,emitter.trigger=trigger,emitter.set=set,emitter.set.clear=clearSet,emitter.pipe=pipe,emitter.pipe.clear=clearPipes,emitter.listeners=getListeners,emitter.listeners.clear=clearListeners;else return emitter;if(emitter.addEventListener||emitter.attachEvent)handleNode(emitter);return emitter}var api;return api={emitter:EventEmitter},[].indexOf||(Array.prototype.indexOf=function(a,b,c){for(c=this.length,b=(c+~~b)%c;c>b&&(!(b in this)||this[b]!==a);b++);return b^c?b:-1}),api}),function(){var DataAttributes=function($){var parse=function(el,defaults,_prefix){var settings={},prefix=_prefix||"";for(var key in defaults){var pkey=prefix+key.replace(/\./g,"-"),attr=$(el).attr(pkey);if(void 0===attr)settings[key]=defaults[key];else if("string"==typeof attr&&0===attr.length||/^\s*true\s*$/.test(attr)||pkey==attr)settings[key]=!0;else if(/^\s*false\s*$/.test(attr))settings[key]=!1;else settings[key]=attr}return settings},exports={parse:parse};return exports};if("function"==typeof define&&define.amd)define("js/lib/data.attributes",["jquery"],function($){return DataAttributes($)});else if("undefined"!=typeof window&&"undefined"==typeof ender)window.DataAttributes=DataAttributes(window.$)}(),function(){var Modals=function($,LucidJS,_,DataAttributes){var CLOSED=0,OPEN=1,_private={defaults:{"bind.open":"click","bind.close":"click","bind.action":"click","attribute.open":"data-modal","attribute.close":"data-modal-close","attribute.iframe":"data-modal-iframe","attribute.action":"data-modal-action","attribute.focus":"data-modal-focus","attribute.focus.index":1e4,"animate.modal.open":null,"animate.modal.close":null,"animate.modal.duration":250,"animate.overlay.open":null,"animate.overlay.close":null,"animate.overlay.duration":250,"overlay.show":!0,"overlay.class":"overlay","overlay.close":!0,"z.index":9999,"position.top":"50%","position.left":"50%",position:"fixed","iframe.autoclose":!0},$overlay:null,count:0,prevScroll:null,prevModal:null,getModal:function(el,options){var modal=$(el).data("modal.me");if(modal&&modal.constructor==Modal.prototype.constructor)if(options)return modal.customize(options);else return modal;else return null},makeModal:function(el,options){var $el=$(el),modal=_private.getModal($el);if(!modal)modal=new Modal($el,options),$el.data("modal.me",modal);return modal},setOverlayHeight:function(){if($(window).height()<$(document).height())_private.$overlay.css({height:$(document).height()+"px"});
else _private.$overlay.css({height:"100%"})},observeKeyPress:function(e){if(this.options["overlay.close"])if(27==e.keyCode||27==e.DOM_VK_ESCAPE&&0===e.which)this.emitter.trigger("action",!1,this),this.close();this.emitter.trigger("key",e)},cycleTabs:function(e){var $tabbable=this.$el.find("a,input,select,textarea,button").filter(":visible");if(9==e.keyCode&&$(e.target).is($tabbable.last()))window.setTimeout(function(){$tabbable.first().focus()},0)},actionTrigger:function(e){var $el=$(e.currentTarget),action=$el.attr(this.options["attribute.action"]);this.emitter.trigger("action",action,this)},open:function(){if("fixed"!=this.options.position)_private.prevScroll={top:$(document).scrollTop(),left:$(document).scrollLeft()},window.scrollTo(0,0);if(this.$iframe){var iframeUrl=this.options["iframe.url"]||$(this.anchor).attr(this.options["attribute.iframe"]);this.$iframe.attr("src",iframeUrl),this.$iframe.focus()}else{var $focus=this.$el.find("["+this.options["attribute.focus"]+"]"),$focusable_elements=this.$el.find("a,input,select,textarea,button");for(i=0;i<$focusable_elements.length;i++)$focusable_elements.eq(i).attr("tabindex",this.options["attribute.focus.index"]+1+i);if($focus.size()>0)$focus.filter(":visible").eq(0).attr("tabindex",this.options["attribute.focus.index"]),$focus.filter(":visible").eq(0).focus();else if($focusable_elements.size()>0)$focusable_elements.filter(":visible").eq(0).attr("tabindex",this.options["attribute.focus.index"]),$focusable_elements.filter(":visible").eq(0).focus()}this.state=OPEN,this.$el.on(this.options["bind.action"],"["+this.options["attribute.action"]+"]",_.bind(_private.actionTrigger,this)),this.emitter.trigger("open")},close:function(){var $iframe=this.$el.find("iframe");if(this.$el.off(".modal").hide(),this.options["iframe.autoclose"]&&$iframe.size())$iframe.attr({src:"about:blank"});if(_private.prevScroll)window.scrollTo(_private.prevScroll.left,_private.prevScroll.top),_private.prevScroll=null;this.anchor=null,this.$parent.append(this.$el),this.state=CLOSED,this.emitter.trigger("close")}},Modal=function(el,settings){var that=this;this.$el=$(el),this.state=CLOSED,this.$parent=this.$el.parent(),this.customize(settings),this.emitter=LucidJS.emitter(this)};Modal.prototype.customize=function(settings){return this.options=_.extend({},DataAttributes.parse(this.$el,_private.defaults,"data-modal-"),settings),this},Modal.prototype.open=function(){var that=this,iframeUrl;if(this.anchor)iframeUrl=$(this.anchor).attr(this.options["attribute.iframe"]);if(this.options["iframe.url"])iframeUrl=this.options["iframe.url"];if(iframeUrl)if(this.$iframe=this.$el.find("iframe"),/^https?:\/\/|^\/|^\.\.\//.test(iframeUrl))if(!this.$iframe.size()||this.$iframe.attr("src")!=iframeUrl)if(this.$iframe.attr("src","about:blank").remove(),this.$iframe=$("<iframe>").css({height:"100%",width:"100%"}).attr({scrolling:"no",frameborder:0}),this.$el.append(this.$iframe),this.state!=CLOSED)this.$iframe.attr("src",iframeUrl);if(this.state!=CLOSED)return;if(this.options["overlay.show"]){if(_private.$overlay&&"none"!=_private.$overlay.css("display")&&_private.$overlay.hasClass(this.options["overlay.class"]))this.$overlay=_private.$overlay;else{if(_private.$overlay)_private.$overlay.off(".modal").hide().remove();this.$overlay=_private.$overlay=$("<div>").addClass(this.options["overlay.class"]).hide(),this.$overlay.css({position:"fixed",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:this.options["z.index"]++}),$("body").append(this.$overlay)}if(_private.setOverlayHeight(),this.reposition(),this.options["animate.overlay.open"])this.$overlay.animate(this.options["animate.overlay.open"],{duration:this.options["animate.overlay.duration"]});else this.$overlay.show();_private.count++,this.$overlay.data("modal",this)}if(this.emitter.trigger("opening"),"fixed"!=this.options.position||0===this.$el.closest("html").length)this.$el.appendTo("body");if(this.reposition(),this.$el.show(),this.options["animate.modal.open"])this.$el.animate(this.options["animate.modal.open"],{duration:this.options["animate.modal.duration"],complete:function(){_private.open.call(that)}});else _private.open.call(this);if($(window).on("resize.modal",_.bind(_private.setOverlayHeight,that)).on("resize.modal",_.bind(that.reposition,that)).on("scroll.modal",_.bind(that.reposition,that)),this.$el.on("keydown.modal",_.bind(_private.cycleTabs,that)),$(window).on("keyup.modal",_.bind(_private.observeKeyPress,that)),this.options["overlay.close"])this.$overlay.on(this.options["bind.close"]+".modal",function(e){that.emitter.trigger("action",!1,that),that.close()});if(this.options["attribute.close"])this.$el.on(this.options["bind.close"]+".modal","["+this.options["attribute.close"]+"]",function(e){var $target=$(e.currentTarget);if("disabled"!=$target.attr("disabled")){if(void 0===$target.attr(that.options["attribute.action"]))that.emitter.trigger("action",!1,that);that.close()}});return this},Modal.prototype.reposition=function(){var left=this.options["position.left"],top=this.options["position.top"];if(left)this.$el.css({position:this.options.position,left:left,marginLeft:/%/.test(left)?this.$el.outerWidth()/2*-1:0,zIndex:this.options["z.index"]++});if(top)this.$el.css({position:this.options.position,top:top,marginTop:/%/.test(top)?this.$el.outerHeight()/2*-1:0,zIndex:this.options["z.index"]++});return this},Modal.prototype.close=function(){var that=this;if(this.state!=OPEN)return;if(this.trigger("closeRequest")===!1)return;if(this.$el.off(".modal"),$(window).off(".modal"),this.emitter.trigger("closing"),this.options["animate.modal.close"])this.$el.animate(this.options["animate.modal.close"],{duration:this.options["animate.modal.duration"],complete:function(){_private.close.call(that)}});else _private.close.call(this);if(0===--_private.count)if(this.options["overlay.show"]&&this.$overlay)if(this.$overlay.off(".modal"),this.options["animate.overlay.close"])this.$overlay.animate(this.options["animate.overlay.close"],{duration:this.options["animate.overlay.duration"],complete:function(){this.$overlay.hide().remove()}});else this.$overlay.hide().remove();return this};var external=function(){return _private.getModal.apply(null,arguments)||_private.makeModal.apply(this,arguments)};return external.start=function(view,_options){var $view=$(view),options=_.extend({},_private.defaults,_options);if($view.data("modals-initialized"))return;else $view.data("modals-initialized",1);$view.on(options["bind.open"]+".modal","["+options["attribute.open"]+"]",function(e){var $anchor=$(this),selector=$anchor.attr(options["attribute.open"]),$modal=$view.find(selector);options=_.extend({},options,DataAttributes.parse($modal,_private.defaults,"data-modal-"));var modal=_private.getModal($modal,options)||_private.makeModal($modal,options);if(/^https?:\/\/|^\/|^\.\.\//.test($anchor.attr("href"))&&!e.ctrlKey&&!e.metaKey)e.preventDefault();modal.anchor=this,_private.prevModal=$modal[0],modal.open()})},external.stop=function(view){var $view=$(view);if($view.unbind(".modal"),$view.data("modals-initialized",0),_private.prevModal)Modal(_private.prevModal).close()},external.start("body"),external};if("function"==typeof define&&define.amd)define("js/lib/modals",["jquery","js/lib/lucid","underscore","js/lib/data.attributes"],function($,LucidJS,_,DataAttributes){return Modals($,LucidJS,_,DataAttributes)});else if("undefined"!=typeof window&&"undefined"==typeof ender)window.Modal=Modals(window.$,window.LucidJS,window._,window.DataAttributes)}(),function(wndw){function nulls(val){return null!=val&&""!==val}function joinClasses(val){return Array.isArray(val)?val.map(joinClasses).filter(nulls).join(" "):val}var exports={};if(!Array.isArray)Array.isArray=function(arr){return"[object Array]"==Object.prototype.toString.call(arr)};if(!Object.keys)Object.keys=function(obj){var arr=[];for(var key in obj)if(obj.hasOwnProperty(key))arr.push(key);return arr};if(exports.merge=function merge(a,b){if(1===arguments.length){for(var attrs=a[0],i=1;i<a.length;i++)attrs=merge(attrs,a[i]);return attrs}var ac=a["class"],bc=b["class"];if(ac||bc){if(ac=ac||[],bc=bc||[],!Array.isArray(ac))ac=[ac];if(!Array.isArray(bc))bc=[bc];a["class"]=ac.concat(bc).filter(nulls)}for(var key in b)if("class"!=key)a[key]=b[key];return a},exports.joinClasses=joinClasses,exports.cls=function cls(classes,escaped){for(var buf=[],i=0;i<classes.length;i++)if(escaped&&escaped[i])buf.push(exports.escape(joinClasses([classes[i]])));else buf.push(joinClasses(classes[i]));var text=joinClasses(buf);if(text.length)return' class="'+text+'"';else return""},exports.attr=function attr(key,val,escaped,terse){if("boolean"==typeof val||null==val)if(val)return" "+(terse?key:key+'="'+key+'"');else return"";else if(0==key.indexOf("data")&&"string"!=typeof val)return" "+key+"='"+JSON.stringify(val).replace(/'/g,"&apos;")+"'";else if(escaped)return" "+key+'="'+exports.escape(val)+'"';else return" "+key+'="'+val+'"'},exports.attrs=function attrs(obj,terse){var buf=[],keys=Object.keys(obj);if(keys.length)for(var i=0;i<keys.length;++i){var key=keys[i],val=obj[key];if("class"==key){if(val=joinClasses(val))buf.push(" "+key+'="'+val+'"')}else buf.push(exports.attr(key,val,!1,terse))}return buf.join("")},exports.escape=function escape(html){var result=String(html).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");if(result===""+html)return html;else return result},exports.rethrow=function rethrow(err,filename,lineno,str){if(!(err instanceof Error))throw err;if(!("undefined"==typeof window&&filename||str))throw err.message+=" on line "+lineno,err;try{str=str||require("fs").readFileSync(filename,"utf8")}catch(ex){rethrow(err,null,lineno)}var context=3,lines=str.split("\n"),start=Math.max(lineno-context,0),end=Math.min(lines.length,lineno+context),context=lines.slice(start,end).map(function(line,i){var curr=i+start+1;return(curr==lineno?"  > ":"    ")+curr+"| "+line}).join("\n");throw err.path=filename,err.message=(filename||"Jade")+":"+lineno+"\n"+context+"\n\n"+err.message,err},"function"==typeof define&&define.amd)define("js/lib/jade",[],function(){return exports});else wndw.jade={helpers:exports,templates:{}}}(window),function(){function addPart(locale,master,needed,toLoad,prefix,suffix){for(;"[object String]"==Object.prototype.toString.call(master[locale]);)locale=master[locale];if(master[locale])if(needed.push(locale),master[locale]===!0||1===master[locale])toLoad.push(prefix+locale+"/"+suffix)}function addIfExists(req,locale,toLoad,prefix,suffix){var fullName=prefix+locale+"/"+suffix;if(require._fileExists(req.toUrl(fullName+".js")))toLoad.push(fullName)}function mixin(target,source,force){var prop;for(prop in source)if(source.hasOwnProperty(prop)&&(!target.hasOwnProperty(prop)||force))target[prop]=source[prop];else if("object"==typeof source[prop]){if(!target[prop])target[prop]={};mixin(target[prop],source[prop],force)}}function generateTranslationFunction(dictionary){dictionary=dictionary||{};var f=function(key,interpolationHash){var value=dictionary[key]||key;if("object"==typeof interpolationHash&&interpolationHash)return value.replace(interpolationRegex,function(match,interpKey){var interpolation=interpolationHash[interpKey];return dictionary[interpolation]||interpolation||interpKey});else return value};return f.dictionary=dictionary,f.merge=function(){var _ts=Array.prototype.slice.call(arguments,0),i,source,key;for(i=0;i<_ts.length;i++)if(source=_ts[i]&&_ts[i].dictionary)for(key in source)if(!(key in dictionary))dictionary[key]=source[key];return f},f}var nlsRegExp=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/,interpolationRegex=/[#!]\{([^}]+?)\}/g;define("i18n",["module"],function(module){var masterConfig=module.config?module.config():{};return{version:"2.0.3",load:function(name,req,onLoad,config){if(config=config||{},config.locale)masterConfig.locale=config.locale;masterConfig.locale=(masterConfig.locale||"").toLowerCase().replace(/_/g,"-"),masterConfig.locale=masterConfig.locale.split(/[;=,]/)[0];var masterName,match=nlsRegExp.exec(name),prefix=match[1],locale=match[4],suffix=match[5],parts=locale.split("-"),toLoad=[],value={},i,part,current="";if(match[5])prefix=match[1],masterName=prefix+suffix;else{if(masterName=name,suffix=match[4],locale=masterConfig.locale,!locale)locale=masterConfig.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase();parts=locale.split("-")}if(config.isBuild){for(toLoad.push(masterName),addIfExists(req,"root",toLoad,prefix,suffix),i=0;i<parts.length;i++)part=parts[i],current+=(current?"-":"")+part,addIfExists(req,current,toLoad,prefix,suffix);req(toLoad,function(){onLoad()})}else req([masterName],function(master){var needed=[],part;for(addPart("root",master,needed,toLoad,prefix,suffix),i=0;i<parts.length;i++)part=parts[i],current+=(current?"-":"")+part,addPart(current,master,needed,toLoad,prefix,suffix);req(toLoad,function(){var i,partBundle,part;for(i=needed.length-1;i>-1&&needed[i];i--){if(part=needed[i],partBundle=master[part],partBundle===!0||1===partBundle)partBundle=req(prefix+part+"/"+suffix);mixin(value,partBundle)}onLoad(generateTranslationFunction(value))})})}}})}(),define("js/core/nls/confirmNavigation",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t){buf.push('<div class="hide confirm-navigation modal"><div class="modal-header"><h3>'+jade.escape(null==(jade_interp=_t("Confirm Navigation"))?"":jade_interp)+'</h3></div><div class="modal-body"><div class="confirm-navigation-message"></div><div>'+jade.escape(null==(jade_interp=_t("Are you sure you want to leave this page?"))?"":jade_interp)+'</div></div><div class="modal-footer"><button data-modal-close="data-modal-close" class="btn confirm-navigation-stay">'+jade.escape(null==(jade_interp=_t("Stay on this Page"))?"":jade_interp)+'</button><button data-modal-close="data-modal-close" class="btn btn-danger confirm-navigation-leave">'+jade.escape(null==(jade_interp=_t("Leave this Page"))?"":jade_interp)+"</button></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("js/core/confirmNavigation.html",["js/lib/jade","i18n!js/core/nls/confirmNavigation"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["js.core.confirmNavigation"]=jadify(wndw.jade.helpers)}(window),function(definition){if("function"==typeof bootstrap)bootstrap("promise",definition);else if("object"==typeof exports)module.exports=definition();else if("function"==typeof define&&define.amd)define("js/lib/q",definition);else if("undefined"!=typeof ses)if(!ses.ok())return;else ses.makeQ=definition;else Q=definition()}(function(){function uncurryThis(f){return function(){return call.apply(f,arguments)}}function isObject(value){return value===Object(value)}function isStopIteration(exception){return"[object StopIteration]"===object_toString(exception)||exception instanceof QReturnValue}function makeStackTraceLong(error,promise){if(hasStacks&&promise.stack&&"object"==typeof error&&null!==error&&error.stack&&-1===error.stack.indexOf(STACK_JUMP_SEPARATOR)){for(var stacks=[],p=promise;p;p=p.source)if(p.stack)stacks.unshift(p.stack);stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){for(var lines=stackString.split("\n"),desiredLines=[],i=0;i<lines.length;++i){var line=lines[i];if(!isInternalFrame(line)&&!isNodeFrame(line)&&line)desiredLines.push(line)}return desiredLines.join("\n")}function isNodeFrame(stackLine){return-1!==stackLine.indexOf("(module.js:")||-1!==stackLine.indexOf("(node.js:")}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1)return[attempt1[1],Number(attempt1[2])];var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2)return[attempt2[1],Number(attempt2[2])];var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);if(attempt3)return[attempt3[1],Number(attempt3[2])]}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber)return!1;var fileName=fileNameAndLineNumber[0],lineNumber=fileNameAndLineNumber[1];return fileName===qFileName&&lineNumber>=qStartingLine&&qEndingLine>=lineNumber}function captureLine(){if(!hasStacks)return;try{throw new Error}catch(e){var lines=e.stack.split("\n"),firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2],fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber)return;return qFileName=fileNameAndLineNumber[0],fileNameAndLineNumber[1]}}function deprecate(callback,name,alternative){return function(){if("undefined"!=typeof console&&"function"==typeof console.warn)console.warn(name+" is deprecated, use "+alternative+" instead.",new Error("").stack);return callback.apply(callback,arguments)}}function Q(value){if(isPromise(value))return value;if(isPromiseAlike(value))return coerce(value);else return fulfill(value)}function defer(){function become(newPromise){resolvedPromise=newPromise,promise.source=newPromise,array_reduce(messages,function(undefined,message){nextTick(function(){newPromise.promiseDispatch.apply(newPromise,message)})},void 0),messages=void 0,progressListeners=void 0}var messages=[],progressListeners=[],resolvedPromise,deferred=object_create(defer.prototype),promise=object_create(Promise.prototype);if(promise.promiseDispatch=function(resolve,op,operands){var args=array_slice(arguments);if(messages){if(messages.push(args),"when"===op&&operands[1])progressListeners.push(operands[1])}else nextTick(function(){resolvedPromise.promiseDispatch.apply(resolvedPromise,args)})},promise.valueOf=deprecate(function(){if(messages)return promise;var nearerValue=nearer(resolvedPromise);if(isPromise(nearerValue))resolvedPromise=nearerValue;return nearerValue},"valueOf","inspect"),promise.inspect=function(){if(!resolvedPromise)return{state:"pending"};return resolvedPromise.inspect()},Q.longStackSupport&&hasStacks)try{throw new Error}catch(e){promise.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return deferred.promise=promise,deferred.resolve=function(value){if(resolvedPromise)return;become(Q(value))},deferred.fulfill=function(value){if(resolvedPromise)return;become(fulfill(value))},deferred.reject=function(reason){if(resolvedPromise)return;become(reject(reason))},deferred.notify=function(progress){if(resolvedPromise)return;array_reduce(progressListeners,function(undefined,progressListener){nextTick(function(){progressListener(progress)})},void 0)},deferred}function promise(resolver){if("function"!=typeof resolver)throw new TypeError("resolver must be a function.");var deferred=defer();try{resolver(deferred.resolve,deferred.reject,deferred.notify)}catch(reason){deferred.reject(reason)}return deferred.promise}function race(answerPs){return promise(function(resolve,reject){for(var i=0,len=answerPs.length;len>i;i++)Q(answerPs[i]).then(resolve,reject)})}function Promise(descriptor,fallback,inspect){if(void 0===fallback)fallback=function(op){return reject(new Error("Promise does not support operation: "+op))};if(void 0===inspect)inspect=function(){return{state:"unknown"}};var promise=object_create(Promise.prototype);if(promise.promiseDispatch=function(resolve,op,args){var result;try{if(descriptor[op])result=descriptor[op].apply(promise,args);else result=fallback.call(promise,op,args)}catch(exception){result=reject(exception)}if(resolve)resolve(result)},promise.inspect=inspect,inspect){var inspected=inspect();if("rejected"===inspected.state)promise.exception=inspected.reason;promise.valueOf=deprecate(function(){var inspected=inspect();if("pending"===inspected.state||"rejected"===inspected.state)return promise;return inspected.value})}return promise}function when(value,fulfilled,rejected,progressed){return Q(value).then(fulfilled,rejected,progressed)}function nearer(value){if(isPromise(value)){var inspected=value.inspect();if("fulfilled"===inspected.state)return inspected.value}return value}function isPromise(object){return isObject(object)&&"function"==typeof object.promiseDispatch&&"function"==typeof object.inspect}function isPromiseAlike(object){return isObject(object)&&"function"==typeof object.then}function isPending(object){return isPromise(object)&&"pending"===object.inspect().state}function isFulfilled(object){return!isPromise(object)||"fulfilled"===object.inspect().state}function isRejected(object){return isPromise(object)&&"rejected"===object.inspect().state}function displayUnhandledReasons(){if(!unhandledReasonsDisplayed&&"undefined"!=typeof window&&!window.Touch&&window.console)console.warn("[Q] Unhandled rejection reasons (should be empty):",unhandledReasons);unhandledReasonsDisplayed=!0}function logUnhandledReasons(){for(var i=0;i<unhandledReasons.length;i++){var reason=unhandledReasons[i];if(reason&&"undefined"!=typeof reason.stack)console.warn("Unhandled rejection reason:",reason.stack);else console.warn("Unhandled rejection reason (no stack):",reason)}}function resetUnhandledRejections(){if(unhandledReasons.length=0,unhandledRejections.length=0,unhandledReasonsDisplayed=!1,!trackUnhandledRejections)if(trackUnhandledRejections=!0,"undefined"!=typeof process&&process.on)process.on("exit",logUnhandledReasons)}function trackRejection(promise,reason){if(!trackUnhandledRejections)return;unhandledRejections.push(promise),unhandledReasons.push(reason),displayUnhandledReasons()}function untrackRejection(promise){if(!trackUnhandledRejections)return;var at=array_indexOf(unhandledRejections,promise);if(-1!==at)unhandledRejections.splice(at,1),unhandledReasons.splice(at,1)}function reject(reason){var rejection=Promise({when:function(rejected){if(rejected)untrackRejection(this);return rejected?rejected(reason):this}},function fallback(){return this},function inspect(){return{state:"rejected",reason:reason}});return trackRejection(rejection,reason),rejection}function fulfill(value){return Promise({when:function(){return value},get:function(name){return value[name]},set:function(name,rhs){value[name]=rhs},"delete":function(name){delete value[name]},post:function(name,args){if(null===name||void 0===name)return value.apply(void 0,args);else return value[name].apply(value,args)},apply:function(thisp,args){return value.apply(thisp,args)},keys:function(){return object_keys(value)}},void 0,function inspect(){return{state:"fulfilled",value:value}})}function coerce(promise){var deferred=defer();return nextTick(function(){try{promise.then(deferred.resolve,deferred.reject,deferred.notify)}catch(exception){deferred.reject(exception)}}),deferred.promise}function master(object){return Promise({isDef:function(){}},function fallback(op,args){return dispatch(object,op,args)},function(){return Q(object).inspect()})}function spread(value,fulfilled,rejected){return Q(value).spread(fulfilled,rejected)}function async(makeGenerator){return function(){function continuer(verb,arg){var result;if(hasES6Generators){try{result=generator[verb](arg)}catch(exception){return reject(exception)}if(result.done)return result.value;else return when(result.value,callback,errback)}else{try{result=generator[verb](arg)}catch(exception){if(isStopIteration(exception))return exception.value;else return reject(exception)}return when(result,callback,errback)}}var generator=makeGenerator.apply(this,arguments),callback=continuer.bind(continuer,"next"),errback=continuer.bind(continuer,"throw");return callback()}}function spawn(makeGenerator){Q.done(Q.async(makeGenerator)())}function _return(value){throw new QReturnValue(value)}function promised(callback){return function(){return spread([this,all(arguments)],function(self,args){return callback.apply(self,args)})}}function dispatch(object,op,args){return Q(object).dispatch(op,args)}function all(promises){return when(promises,function(promises){var countDown=0,deferred=defer();if(array_reduce(promises,function(undefined,promise,index){var snapshot;if(isPromise(promise)&&"fulfilled"===(snapshot=promise.inspect()).state)promises[index]=snapshot.value;else++countDown,when(promise,function(value){if(promises[index]=value,0===--countDown)deferred.resolve(promises)},deferred.reject,function(progress){deferred.notify({index:index,value:progress})})},void 0),0===countDown)deferred.resolve(promises);return deferred.promise})}function allResolved(promises){return when(promises,function(promises){return promises=array_map(promises,Q),when(all(array_map(promises,function(promise){return when(promise,noop,noop)})),function(){return promises})})}function allSettled(promises){return Q(promises).allSettled()}function progress(object,progressed){return Q(object).then(void 0,void 0,progressed)}function nodeify(object,nodeback){return Q(object).nodeify(nodeback)}var hasStacks=!1;try{throw new Error}catch(e){hasStacks=!!e.stack}var qStartingLine=captureLine(),qFileName,noop=function(){},nextTick=function(){function flush(){for(;head.next;){head=head.next;var task=head.task;head.task=void 0;var domain=head.domain;if(domain)head.domain=void 0,domain.enter();try{task()}catch(e){if(isNodeJS){if(domain)domain.exit();if(setTimeout(flush,0),domain)domain.enter();throw e}else setTimeout(function(){throw e},0)}if(domain)domain.exit()}flushing=!1}var head={task:void 0,next:null},tail=head,flushing=!1,requestTick=void 0,isNodeJS=!1;if(nextTick=function(task){if(tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null},!flushing)flushing=!0,requestTick()},"undefined"!=typeof process&&process.nextTick)isNodeJS=!0,requestTick=function(){process.nextTick(flush)};else if("function"==typeof setImmediate)if("undefined"!=typeof window)requestTick=setImmediate.bind(window,flush);else requestTick=function(){setImmediate(flush)};else if("undefined"!=typeof MessageChannel){var channel=new MessageChannel;channel.port1.onmessage=flush,requestTick=function(){channel.port2.postMessage(0)}}else requestTick=function(){setTimeout(flush,0)};return nextTick}(),call=Function.call,array_slice=uncurryThis(Array.prototype.slice),array_reduce=uncurryThis(Array.prototype.reduce||function(callback,basis){var index=0,length=this.length;if(1===arguments.length)for(;;){if(index in this){basis=this[index++];break}if(++index>=length)throw new TypeError}for(;length>index;index++)if(index in this)basis=callback(basis,this[index],index);return basis}),array_indexOf=uncurryThis(Array.prototype.indexOf||function(value){for(var i=0;i<this.length;i++)if(this[i]===value)return i;return-1}),array_map=uncurryThis(Array.prototype.map||function(callback,thisp){var self=this,collect=[];return array_reduce(self,function(undefined,value,index){collect.push(callback.call(thisp,value,index,self))},void 0),collect}),object_create=Object.create||function(prototype){function Type(){}return Type.prototype=prototype,new Type},object_hasOwnProperty=uncurryThis(Object.prototype.hasOwnProperty),object_keys=Object.keys||function(object){var keys=[];for(var key in object)if(object_hasOwnProperty(object,key))keys.push(key);return keys},object_toString=uncurryThis(Object.prototype.toString),QReturnValue;if("undefined"!=typeof ReturnValue)QReturnValue=ReturnValue;else QReturnValue=function(value){this.value=value};var hasES6Generators;try{new Function("(function* (){ yield 1; })"),hasES6Generators=!0}catch(e){hasES6Generators=!1}var STACK_JUMP_SEPARATOR="From previous event:";Q.resolve=Q,Q.nextTick=nextTick,Q.longStackSupport=!1,Q.defer=defer,defer.prototype.makeNodeResolver=function(){var self=this;return function(error,value){if(error)self.reject(error);else if(arguments.length>2)self.resolve(array_slice(arguments,1));else self.resolve(value)}},Q.promise=promise,Q.passByCopy=function(object){return object},Promise.prototype.passByCopy=function(){return this},Q.join=function(x,y){return Q(x).join(y)},Promise.prototype.join=function(that){return Q([this,that]).spread(function(x,y){if(x===y)return x;else throw new Error("Can't join: not the same: "+x+" "+y)})},Q.race=race,Promise.prototype.race=function(){return this.then(Q.race)},Q.makePromise=Promise,Promise.prototype.toString=function(){return"[object Promise]"},Promise.prototype.then=function(fulfilled,rejected,progressed){function _fulfilled(value){try{return"function"==typeof fulfilled?fulfilled(value):value}catch(exception){return reject(exception)}}function _rejected(exception){if("function"==typeof rejected){makeStackTraceLong(exception,self);try{return rejected(exception)}catch(newException){return reject(newException)}}return reject(exception)}function _progressed(value){return"function"==typeof progressed?progressed(value):value}var self=this,deferred=defer(),done=!1;return nextTick(function(){self.promiseDispatch(function(value){if(done)return;done=!0,deferred.resolve(_fulfilled(value))},"when",[function(exception){if(done)return;done=!0,deferred.resolve(_rejected(exception))}])}),self.promiseDispatch(void 0,"when",[void 0,function(value){var newValue,threw=!1;try{newValue=_progressed(value)}catch(e){if(threw=!0,Q.onerror)Q.onerror(e);else throw e}if(!threw)deferred.notify(newValue)}]),deferred.promise},Q.when=when,Promise.prototype.thenResolve=function(value){return this.then(function(){return value})},Q.thenResolve=function(promise,value){return Q(promise).thenResolve(value)},Promise.prototype.thenReject=function(reason){return this.then(function(){throw reason})},Q.thenReject=function(promise,reason){return Q(promise).thenReject(reason)},Q.nearer=nearer,Q.isPromise=isPromise,Q.isPromiseAlike=isPromiseAlike,Q.isPending=isPending,Promise.prototype.isPending=function(){return"pending"===this.inspect().state},Q.isFulfilled=isFulfilled,Promise.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},Q.isRejected=isRejected,Promise.prototype.isRejected=function(){return"rejected"===this.inspect().state};var unhandledReasons=[],unhandledRejections=[],unhandledReasonsDisplayed=!1,trackUnhandledRejections=!0;Q.resetUnhandledRejections=resetUnhandledRejections,Q.getUnhandledReasons=function(){return unhandledReasons.slice()},Q.stopUnhandledRejectionTracking=function(){if(resetUnhandledRejections(),"undefined"!=typeof process&&process.on)process.removeListener("exit",logUnhandledReasons);trackUnhandledRejections=!1},resetUnhandledRejections(),Q.reject=reject,Q.fulfill=fulfill,Q.master=master,Q.spread=spread,Promise.prototype.spread=function(fulfilled,rejected){return this.all().then(function(array){return fulfilled.apply(void 0,array)},rejected)},Q.async=async,Q.spawn=spawn,Q["return"]=_return,Q.promised=promised,Q.dispatch=dispatch,Promise.prototype.dispatch=function(op,args){var self=this,deferred=defer();return nextTick(function(){self.promiseDispatch(deferred.resolve,op,args)}),deferred.promise},Q.get=function(object,key){return Q(object).dispatch("get",[key])},Promise.prototype.get=function(key){return this.dispatch("get",[key])},Q.set=function(object,key,value){return Q(object).dispatch("set",[key,value])},Promise.prototype.set=function(key,value){return this.dispatch("set",[key,value])},Q.del=Q["delete"]=function(object,key){return Q(object).dispatch("delete",[key])},Promise.prototype.del=Promise.prototype["delete"]=function(key){return this.dispatch("delete",[key])},Q.mapply=Q.post=function(object,name,args){return Q(object).dispatch("post",[name,args])},Promise.prototype.mapply=Promise.prototype.post=function(name,args){return this.dispatch("post",[name,args])},Q.send=Q.mcall=Q.invoke=function(object,name){return Q(object).dispatch("post",[name,array_slice(arguments,2)])},Promise.prototype.send=Promise.prototype.mcall=Promise.prototype.invoke=function(name){return this.dispatch("post",[name,array_slice(arguments,1)])
},Q.fapply=function(object,args){return Q(object).dispatch("apply",[void 0,args])},Promise.prototype.fapply=function(args){return this.dispatch("apply",[void 0,args])},Q["try"]=Q.fcall=function(object){return Q(object).dispatch("apply",[void 0,array_slice(arguments,1)])},Promise.prototype.fcall=function(){return this.dispatch("apply",[void 0,array_slice(arguments)])},Q.fbind=function(object){var promise=Q(object),args=array_slice(arguments,1);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}},Promise.prototype.fbind=function(){var promise=this,args=array_slice(arguments);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}},Q.keys=function(object){return Q(object).dispatch("keys",[])},Promise.prototype.keys=function(){return this.dispatch("keys",[])},Q.all=all,Promise.prototype.all=function(){return all(this)},Q.allResolved=deprecate(allResolved,"allResolved","allSettled"),Promise.prototype.allResolved=function(){return allResolved(this)},Q.allSettled=allSettled,Promise.prototype.allSettled=function(){return this.then(function(promises){return all(array_map(promises,function(promise){function regardless(){return promise.inspect()}return promise=Q(promise),promise.then(regardless,regardless)}))})},Q.fail=Q["catch"]=function(object,rejected){return Q(object).then(void 0,rejected)},Promise.prototype.fail=Promise.prototype["catch"]=function(rejected){return this.then(void 0,rejected)},Q.progress=progress,Promise.prototype.progress=function(progressed){return this.then(void 0,void 0,progressed)},Q.fin=Q["finally"]=function(object,callback){return Q(object)["finally"](callback)},Promise.prototype.fin=Promise.prototype["finally"]=function(callback){return callback=Q(callback),this.then(function(value){return callback.fcall().then(function(){return value})},function(reason){return callback.fcall().then(function(){throw reason})})},Q.done=function(object,fulfilled,rejected,progress){return Q(object).done(fulfilled,rejected,progress)},Promise.prototype.done=function(fulfilled,rejected,progress){var onUnhandledError=function(error){nextTick(function(){if(makeStackTraceLong(error,promise),Q.onerror)Q.onerror(error);else throw error})},promise=fulfilled||rejected||progress?this.then(fulfilled,rejected,progress):this;if("object"==typeof process&&process&&process.domain)onUnhandledError=process.domain.bind(onUnhandledError);promise.then(void 0,onUnhandledError)},Q.timeout=function(object,ms,message){return Q(object).timeout(ms,message)},Promise.prototype.timeout=function(ms,message){var deferred=defer(),timeoutId=setTimeout(function(){deferred.reject(new Error(message||"Timed out after "+ms+" ms"))},ms);return this.then(function(value){clearTimeout(timeoutId),deferred.resolve(value)},function(exception){clearTimeout(timeoutId),deferred.reject(exception)},deferred.notify),deferred.promise},Q.delay=function(object,timeout){if(void 0===timeout)timeout=object,object=void 0;return Q(object).delay(timeout)},Promise.prototype.delay=function(timeout){return this.then(function(value){var deferred=defer();return setTimeout(function(){deferred.resolve(value)},timeout),deferred.promise})},Q.nfapply=function(callback,args){return Q(callback).nfapply(args)},Promise.prototype.nfapply=function(args){var deferred=defer(),nodeArgs=array_slice(args);return nodeArgs.push(deferred.makeNodeResolver()),this.fapply(nodeArgs).fail(deferred.reject),deferred.promise},Q.nfcall=function(callback){var args=array_slice(arguments,1);return Q(callback).nfapply(args)},Promise.prototype.nfcall=function(){var nodeArgs=array_slice(arguments),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.fapply(nodeArgs).fail(deferred.reject),deferred.promise},Q.nfbind=Q.denodeify=function(callback){var baseArgs=array_slice(arguments,1);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments)),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(callback).fapply(nodeArgs).fail(deferred.reject),deferred.promise}},Promise.prototype.nfbind=Promise.prototype.denodeify=function(){var args=array_slice(arguments);return args.unshift(this),Q.denodeify.apply(void 0,args)},Q.nbind=function(callback,thisp){var baseArgs=array_slice(arguments,2);return function(){function bound(){return callback.apply(thisp,arguments)}var nodeArgs=baseArgs.concat(array_slice(arguments)),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(bound).fapply(nodeArgs).fail(deferred.reject),deferred.promise}},Promise.prototype.nbind=function(){var args=array_slice(arguments,0);return args.unshift(this),Q.nbind.apply(void 0,args)},Q.nmapply=Q.npost=function(object,name,args){return Q(object).npost(name,args)},Promise.prototype.nmapply=Promise.prototype.npost=function(name,args){var nodeArgs=array_slice(args||[]),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Q.nsend=Q.nmcall=Q.ninvoke=function(object,name){var nodeArgs=array_slice(arguments,2),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),Q(object).dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Promise.prototype.nsend=Promise.prototype.nmcall=Promise.prototype.ninvoke=function(name){var nodeArgs=array_slice(arguments,1),deferred=defer();return nodeArgs.push(deferred.makeNodeResolver()),this.dispatch("post",[name,nodeArgs]).fail(deferred.reject),deferred.promise},Q.nodeify=nodeify,Promise.prototype.nodeify=function(nodeback){if(nodeback)this.then(function(value){nextTick(function(){nodeback(null,value)})},function(error){nextTick(function(){nodeback(error)})});else return this};var qEndingLine=captureLine();return Q}),define("js/core/origami",["jquery","underscore","backbone","require","js/lib/modals","js/core/confirmNavigation.html","i18n!js/core/nls/confirmNavigation","js/lib/q"],function($,_,Backbone,require,Modal,confirmNavigationTemplate,confirmNavigationTemplate_t,Q){Backbone.View.prototype._super=function(funcName){return this.constructor.__super__[funcName].apply(this,_.rest(arguments))};var _singleton=null,_private={current:null,body:"#origami",views:{},beforeUnloadMessage:"There are unsaved changes that will be lost if you reload or leave this page.",regionHasUnsavedModel:function(region){if(!region)return!1;var viewHasUnsavedModel=region.view.hasUnsavedModel?region.view.hasUnsavedModel():!1;if(viewHasUnsavedModel)return!0;else{for(var name in region.regions){var subRegion=region.regions[name];if(_private.regionHasUnsavedModel(subRegion))return!0}return!1}}};if(window.location.hash.match(/^#!/))window.location.hash=window.location.hash.replace(/^#!/,"#");var router=Backbone.Router.extend({initialize:function(){var self=this;self.routePrefix="",self.linkClass="internal",$("body").on("click","a.internal",function(e){if(!e.ctrlKey&&!e.metaKey)e.preventDefault(),self.navigate($(e.currentTarget).attr("href"),!0)}),this.$confirmNavigation=$(confirmNavigationTemplate({_t:confirmNavigationTemplate_t})),$("body").append(this.$confirmNavigation),$(window).on("beforeunload.origami",function(){if(_private.regionHasUnsavedModel(_private.current))return _private.beforeUnloadMessage})},setupLinks:function(routePrefix,linkClass){var self=this;this.routePrefix=routePrefix,this.linkClass=linkClass,$("body").on("click","a."+this.linkClass,function(e){if(!e.ctrlKey&&!e.metaKey)e.preventDefault(),self.navigateTo($(e.currentTarget).attr("href"),!0)})},navigateTo:function(href,silent){this.navigate(href.replace(this.routePrefix,""),silent)},navigate:function(fragment,options){if(_private.current&&_private.regionHasUnsavedModel(_private.current)){var $message=$(".confirm-navigation-message");$message.text(_private.beforeUnloadMessage);var $leave=$(".confirm-navigation-leave");$leave.one("click",function(){Backbone.Router.prototype.navigate.call(this,fragment,options)});var modalOptions={"overlay.class":"coursera-overlay"};Modal(".confirm-navigation",modalOptions).open()}else Backbone.Router.prototype.navigate.call(this,fragment,options)},addRoutes:function(routes){var self=this;for(var route in routes)self.route(route,route,routes[route]),self.route(route+"/",route+"/",function(){var url=Backbone.history.getFragment(),rewrite=url.replace(/\/(?:\?.*)*$/,"");self.navigate(rewrite,{trigger:!0,replace:!0})})}}),animateManager={resize:function(outgoing,incoming,callback){$("body").append(incoming.$el.css({visibility:"hidden"}));var height={from:outgoing.$el.outerHeight(),to:incoming.$el.outerHeight()};outgoing.$el.animate({height:height.to},300,function(){if(outgoing.$el.replaceWith(incoming.$el.css({visibility:"visible"})),incoming.$el.find("img").on("load",function(){incoming.$el.animate({height:incoming.$el.outerHeight()})}),callback)callback()})},slideLeft:function(outgoing,incoming,callback){var going=outgoing.$el,coming=incoming.$el,position=going.position(),width=going.outerWidth(),height=going.outerHeight(),parent=$("<div>").css({position:"relative",width:width,height:height}),restoreIn={position:coming.css("absolute")||"static",width:coming.get(0).style.width,left:coming.get(0).style.left},restoreOut={position:going.css("absolute")||"static",width:going.get(0).style.width,left:going.get(0).style.left};going.wrap(parent),going.css({width:width,left:position.left,position:"absolute"}),coming.css({width:width,left:position.left+width,position:"absolute"}),going.parent().append(coming),going.animate({left:-width},{duration:500,step:function(moved){coming.css({left:position.left+width+moved})},complete:function(){if(coming.css(restoreIn),going.css(restoreOut).hide(),going.unwrap(),callback)callback()}})},slideRight:function(outgoing,incoming,callback){var going=outgoing.$el,coming=incoming.$el,position=going.position(),width=going.outerWidth(),height=going.outerHeight(),parent=$("<div>").css({position:"relative",width:width,height:height}),restoreIn={position:coming.css("absolute")||"static",width:coming.get(0).style.width,left:coming.get(0).style.left},restoreOut={position:going.css("absolute")||"static",width:going.get(0).style.width,left:going.get(0).style.left};going.wrap(parent),going.css({width:width,left:position.left,position:"absolute"}),coming.css({width:width,left:-(position.left+width),position:"absolute"}),going.parent().append(coming),going.animate({left:width},{duration:500,step:function(moved){coming.css({left:-(position.left+width)+moved})},complete:function(){if(coming.css(restoreIn),going.css(restoreOut).hide(),going.unwrap(),callback)callback()}})},replace:function(outgoing,incoming,callback){if(outgoing.$el.replaceWith(incoming.el),callback)callback()}},region=function(type,_options){var self=this,options=_options||{};self.type=type,self.animate=options.animate||{},self.regions=options.regions||{},self.initialize=options.initialize||{},self.options={},self.id=options.id||type.prototype.name,self.name=type.prototype.name,self.view=null,self.regions=$.extend(!0,{},type.prototype.subregions,options.regions||{})};region.prototype.close=function(keep){var self=this;if(_.each(self.regions,function(_region,key){delete self.regions[key],_region.close(keep)}),!keep)self.view.remove();self.view.undelegateEvents(),self.view.trigger("view:closed"),self.view.off("view")},region.prototype.closing=function(){this.view.trigger("view:closing"),delete _private.views[this.view.cid]},region.prototype.render=function(origami){var self=this;if(_.each(self.regions,function(view,key){if(!view)return;view.render(),view.parent=self}),self.view=new self.type(self.initialize),self.view.region=self,self.view.render(self.render),origami)self.view.on("view:appended",function(){origami.trigger("region:appended",{name:self.name})});return self},region.prototype.appended=function(){var that=this;if(that.view)setTimeout(function(){that.view.trigger("view:appended")},0)},region.prototype.append=function(view,options){var that=this,appended=Q.defer();if(!this.regions)this.regions={};var render_and_append=function(_region){for(var key=view,count=0,$el;that.regions[key];)key+=++count;if(that.regions[key]=_region,_region.render(_singleton),options.to)$el=_.isElement(options.to)?that.view.$(options.to):options.to;else $el=that.view.$el;$el.append(_region.view.el),_region.appended(),_singleton.trigger("region:rendered",{name:_region}),appended.resolve(_region)};if("string"==typeof view)_singleton.region.fetch(view,options,render_and_append);else render_and_append(new region(view,options));return appended.promise},region.prototype.is=function(_region){return _region.type==this.type&&_region.id==this.id},region.prototype.replace=function(incoming,callback){var outgoing=this,how="replace",animate={incoming:incoming.view.animate,outgoing:outgoing.view.animate};if(_.isString(animate.incoming))how=animate.incoming;else if(_.isFunction(animate.incoming))how=animate.incoming();else if(_.isString(animate.outgoing))how=animate.outgoing;else if(_.isFunction(animate.outgoing))how=animate.outgoing();if(!animateManager[how])how="replace";animateManager[how](outgoing.view,incoming.view,callback)},region.prototype.merge=function(incoming,origami){var self=this;if(self.is(incoming))_.each(incoming.regions,function(_region,view){self.regions[view].view.trigger("view:merging",_region.initialize),self.regions[view].merge(_region,origami),self.regions[view].view.trigger("view:merged",_region.initialize)});else if(self.name==incoming.name)self.closing(),incoming.render(origami),self.replace(incoming,function(){if(self.parent)self.parent.regions[incoming.name]=incoming,incoming.parent=self.parent,self.parent.appended();self.close(),incoming.appended()})};var Origami=function(body,current){if(_singleton)return _singleton;_singleton=this;var that=this;_private.body=body,_private.current=current,$(window).on("resize",function(){for(var cid in _private.views)_private.views[cid].trigger("view:resize")}),this.region={make:function(type,options){return new region(type,options)},fetch:function(_region,conf,callback){var uid=_.uniqueId();that.trigger("region:fetching",{name:_region,uid:uid}),require([_region],function(view){that.trigger("region:fetched",{name:_region,uid:uid}),callback(new region(view,conf))})},append:function(parent,view,options,callback){if(!parent)parent={regions:{}};var render_and_append=function(_region){for(var key=view,count=0;parent.regions[key];)key+=++count;if(parent.regions[key]=_region,_region.render(that),callback)callback(_region);return _region.appended(),that.trigger("region:rendered",{name:_region}),_region};if("string"==typeof view)that.region.fetch(view,options,render_and_append);else return render_and_append(new region(view,options))},open:function(name,callback){var view=name,conf={};if(_.isObject(name))view=_.keys(name)[0],conf=name[view];that.region.fetch(view,conf,callback||function(parent){var validRegions=_(parent.regions).filter(function(region){return region}),render=_.after(_.keys(validRegions||{}).length+1,function(){if(_private.current){if(_private.current.is(parent))return void _private.current.merge(parent,that);else if(_private.current.name==parent.name)return parent.render(that),void _private.current.replace(parent,function(){_private.current.close(),_private.current=parent,_private.current.appended()});_private.current.close(!0)}_private.current=parent,$(_private.body).html(_private.current.render(that).view.el),_private.current.appended(),_.each(_private.current.regions,function(_region){if(_region)_region.appended()})});render(that),_.each(parent.regions,function(subregion,name){if(!subregion)return;that.region.open(subregion,function(_region){parent.regions[name]=_region,render(that)})})})}},this.animate=animateManager,this.router=new router,this.store={},this.tracker=[]};return _.extend(Origami.prototype,Backbone.Events),Origami}),function(wndw){var config={environment:"production",out:"js/core/config.js",log:"error",debug:!1,url:{maestro:"/maestro/api/",base:"https://www.coursera.org/",api:"/maestro/api/",cloudfront_api:"https://d1hpa2gdx2lr6r.cloudfront.net/maestro/api/",accounts:"https://accounts.coursera.org/",assets:"https://d2wvvaown1ul17.cloudfront.net/site-static/",resource_assets:"https://coursera_assets.s3.amazonaws.com/",app_assets:"https://d2wvvaown1ul17.cloudfront.net/site-static/bce8de59b7e5c3244ee0791a0e32b18a937a7bbe/"},version:"bce8de59b7e5c3244ee0791a0e32b18a937a7bbe",dir:{home:"/"},gapi_eventing_data:{project_number:"274249572679",api_key:"",client_id:"274249572679-al8nc3ttcavj0n91due232a3h6s3r9vk.apps.googleusercontent.com"},bigquery:{dataset:"mydataset",table_prefix:"livedata_"}};if("function"==typeof define&&define.amd)define("js/core/config",[],function(){return config});else return wndw.configure=config}(window),define("js/lib/supports",[],function(){var supports={},prefix="supports-";if(document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"))document.documentElement.className=prefix+"svg",supports.svg=!0;if(window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE 10.0")<0)supports.cors=!0;var userAgent=navigator.userAgent.toLowerCase();if(/safari/.test(userAgent)&&!/chrome/.test(userAgent))supports.accepts=!1;else supports.accepts=!0;return supports}),function(wndw){var module=function(_,$){var thirdparty={loadScript:function(url,success,body){var newScript=document.createElement("script"),scripts=document.getElementsByTagName("script");if(newScript.type="text/javascript",newScript.async=!0,newScript.src=url,body)newScript.innerHTML=body;if(success)newScript.onload=newScript.onreadystatechange=function(){newScript.onreadystatechange=newScript.onload=null,success()};if(scripts&&scripts.length)scripts[0].parentNode.insertBefore(newScript,scripts[0]);else if(window.document&&window.document.body)window.document.body.appendChild(newScript)},isDefined:function(parent,name){for(var parts=name.split("."),part=parts.shift(),cur=parent;part;)if(cur[part])cur=cur[part],part=parts.shift();else cur=null,part=null;return null!==cur},ready:function(global,callback){if(thirdparty.isDefined(window,global))callback.call();else{var base=global.split(".")[0];if(_.isArray(pool[global]))pool[global].push(callback);else pool[global]=[callback],third_party_globals[base].call(null,global)}}},pool={},poll=function(global){if(thirdparty.isDefined(window,global))for(var base=global.split(".")[0];pool[global]&&pool[global].length;)pool[global].pop().call();else window.setTimeout(function(){poll(global)},100)},third_party_globals={IN:function(x){var funcName="itsThirdPartyTime"+(new Date).getTime();window[funcName]=function(){delete window[funcName],poll(x)},thirdparty.loadScript("https://platform.linkedin.com/in.js",function(){},"onLoad:"+funcName+"\napi_key: v7ah6tdxsqt6")},google:function(x){var funcName;if(/^google\.maps.places/.test(x))funcName="itsThirdPartyTime"+(new Date).getTime(),window[funcName]=function(){delete window[funcName],poll(x)},thirdparty.loadScript("https://maps.googleapis.com/maps/api/js?sensor=false&key=AIzaSyC7XENXcXiE_oj0HvDUC_MiLY9zI3xTW0g&libraries=places&callback="+funcName);if(/^google\.maps\.Map/.test(x))funcName="itsThirdPartyTime"+(new Date).getTime(),window[funcName]=function(){delete window[funcName],poll(x)},thirdparty.loadScript("https://maps.googleapis.com/maps/api/js?sensor=false&key=AIzaSyCzodUI0p0hH-8n6tZ45vMNlaNfKEpuEMU&callback="+funcName)},FB:function(x){thirdparty.loadScript("https://connect.facebook.net/en_US/all.js#xfbml=1&appId=274998519252278",function(){poll(x)})},gapi:function(x){window.___gcfg={lang:"en-US",parsetags:"explicit"},thirdparty.loadScript("https://apis.google.com/js/plusone.js",function(){delete window.___gcfg,poll(x)})},twttr:function(x){thirdparty.loadScript("https://platform.twitter.com/widgets.js",function(){poll(x)})},MathJax:function(x){thirdparty.loadScript("https://d2265nx4vomwra.cloudfront.net/2.1/MathJax.js?delayStartupUntil=configured",function(){poll(x)})}};return thirdparty};if("function"==typeof define&&define.amd)define("js/lib/third-parties",["underscore","jquery"],function(_,$){return module(_,$)});else window.thirdparties=module(window._,window.$)}(window),function(wndw){var module=function(){if(wndw.console=wndw.console||{},wndw.console.log=wndw.console.log||function(){},wndw.console.error=wndw.console.error||function(){},wndw.console.warn=wndw.console.warn||function(){},wndw.console.info=wndw.console.info||function(){},!wndw.console.log.apply)wndw.console.log=Function.prototype.bind.call(wndw.console.log,wndw.console),wndw.console.error=Function.prototype.bind.call(wndw.console.error,wndw.console),wndw.console.warn=Function.prototype.bind.call(wndw.console.warn,wndw.console),wndw.console.info=Function.prototype.bind.call(wndw.console.info,wndw.console);var Logger=function(options){this.options=options||{}};Logger.prototype.customize=function(options){return this.options=options||{},this},Logger.prototype.info=function(){if("info"==this.options.level)wndw.console.info.apply(wndw.console,arguments);return this},Logger.prototype.warn=function(){if(/info|warn/.test(this.options.level))wndw.console.warn.apply(wndw.console,arguments);return this},Logger.prototype.error=function(){if(/error|warn|info/.test(this.options.level))wndw.console.error.apply(wndw.console,arguments);return this};var exports=function(options){return new Logger(options)};return exports};if("function"==typeof define&&define.amd)define("js/lib/log",[],function(){return module()});else if("undefined"!=typeof wndw&&"undefined"==typeof ender)wndw.Log=module()}(window),function(){var JSON;if(!JSON)JSON={};var json=function(){function f(n){return 10>n?"0"+n:n}function quote(string){return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&"object"==typeof value&&"function"==typeof value.toJSON)value=value.toJSON(key);if("function"==typeof rep)value=rep.call(holder,key,value);switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep){for(length=rep.length,i=0;length>i;i+=1)if("string"==typeof rep[i])if(k=rep[i],v=str(k,value))partial.push(quote(k)+(gap?": ":":")+v)}else for(k in value)if(Object.prototype.hasOwnProperty.call(value,k))if(v=str(k,value))partial.push(quote(k)+(gap?": ":":")+v);return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}if("function"!=typeof Date.prototype.toJSON)Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if("function"!=typeof JSON.stringify)JSON.stringify=function(value,replacer,space){var i;if(gap="",indent="","number"==typeof space)for(i=0;space>i;i+=1)indent+=" ";else if("string"==typeof space)indent=space;if(rep=replacer,replacer&&"function"!=typeof replacer&&("object"!=typeof replacer||"number"!=typeof replacer.length))throw new Error("JSON.stringify");return str("",{"":value})};if("function"!=typeof JSON.parse)JSON.parse=function(text,reviver){function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)if(Object.prototype.hasOwnProperty.call(value,k))if(v=walk(value,k),void 0!==v)value[k]=v;else delete value[k];return reviver.call(holder,key,value)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text))text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}};if("function"==typeof define&&define.amd)define("js/lib/json2",[],function(){return json(),JSON});else if("undefined"!=typeof window&&"undefined"==typeof ender)json(),window.JSON=JSON}(),function(wndw){var module=function(_){var MultiTracker=function(opts){var options=opts||{};this.trackers={},this.logger=options.logger||Log({level:"error"})};MultiTracker.prototype.register=function(name,queue,type,parser){this.trackers[name]={queue:queue||[],type:type||"key-value",parse:parser}},MultiTracker.prototype.get=function(name){return this.trackers[name]},MultiTracker.prototype.push=function(){for(var trackings=arguments,k=0;k<trackings.length;k++){var tracking=_.isArray(trackings[k])?trackings[k]:[trackings[k]];for(var tracker in this.trackers){var trackEvent,i,handler;if("google"==this.trackers[tracker].type){if("pageview"==tracking[0])for(trackEvent=["_trackPageview"],i=1;i<tracking.length;i++)trackEvent.push(_.isString(tracking[i])?tracking[i]:JSON.stringify(tracking[i]))}else if("key-value"==this.trackers[tracker].type){for(var value=[],a=1;a<tracking.length;a++)if("function"==typeof tracking[a])handler=tracking[a];else value.push(_.isString(tracking[a])?tracking[a]:JSON.stringify(tracking[a]));if(value.length)trackEvent={key:tracking[0],value:value.join(".")};else trackEvent={key:tracking[0]}}else if("custom"==this.trackers[tracker].type&&this.trackers[tracker].parse)trackEvent=this.trackers[tracker].parse.apply(this,tracking);if(trackEvent)if(handler)this.trackers[tracker].queue.push(["send",trackEvent,handler]);else this.trackers[tracker].queue.push(trackEvent)}this.logger.info.apply(this.logger,tracking)}};var external=function(options){return new MultiTracker(options)};return external};if("function"==typeof define&&define.amd)define("js/lib/multitracker",["underscore","js/lib/json2"],function(_){return module(_)});else wndw.MultiTracker=module(wndw._)}(window),define("js/lib/metatags",["jquery","underscore"],function($,_){function nameToType(name){return nameToTypeMapping[name]||"name"}function select(name){return $("meta["+nameToType(name)+"='"+name+"']")}function stripTags(str){return(str||"").replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,"")}function setMetaTag(name,value){var $metaTag=select(name);if(0===$metaTag.length){var metaHtml="<meta "+nameToType(name)+'="'+name+'" />';$metaTag=$(metaHtml).appendTo("head")}$metaTag.attr("content",stripTags(value))}function set(name,value){if("object"==typeof name)_.each(name,function(val,key){setMetaTag(key,val)});else setMetaTag(name,value)}function share(title,image,description,url){set({"og:title":title,"og:url":url,"og:image":image,"og:site_name":title,"og:description":description,description:description,image:image})}function setDocumentDefault(){set({"og:title":document.title,"og:url":window.location.href,"og:site_name":document.title,name:document.title})}function clear(name){var $metaTag=select(name);$metaTag.remove()}var nameToTypeMapping={"og:title":"property","og:url":"property","og:image":"property","og:site_name":"property","og:description":"property",description:"name",image:"name"};return{set:set,setDocumentDefault:setDocumentDefault,clear:clear,share:share}}),define("js/lib/language",["jquery","underscore"],function($,_){function shortenLanguageCode(code){return(normalizeLanguageCode(code)||"").split("-")[0]}function languageCodeCSVtoLanguages(csv){var subtitlesLangs=_.compact((csv||"").split(/,\s*/g));return _.reduce(subtitlesLangs,function(memo,code){return memo[code]=languageCodeToName(code),memo},{})}function isRightToLeft(language){var rightToLeftLanguages=["ar","he"];return _.contains(rightToLeftLanguages,shortenLanguageCode(language))}function languageCodeToName(code){code=normalizeLanguageCode(code||"");var components=code.split("-"),language,languageMappingExists=_.any(components,function(c,i){var codeToTest=components.slice(0,components.length-i).join("-");return language=languageCodeToNameObj[codeToTest],!!language});return languageMappingExists?language:code}function normalizeLanguageCode(languageCode){var code=(languageCode||"").toLowerCase().replace(/_/g,"-");return code.split(/[;=,]/)[0]}function getLanguageCode(){var code;try{code=window.require.s.contexts._.config.config.i18n.locale}catch(e){code=normalizeLanguageCode($("#_require").attr("data-locale"))||"en"}return code}function latinizeText(string){return string.replace(/[^A-Za-z0-9\[\] ]/g,function(a){return LATIN_MAP[a]||a})}var languageCodeToNameObj={ab:"Abkhaz",aa:"Afar",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",ba:"Bashkir",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari",bi:"Bislama",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",ny:"Chichewa",zh:"Chinese","zh-cn":"Chinese (Simplified)","zh-tw":"Chinese (Traditional)",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Divehi",nl:"Dutch",dz:"Dzongkha",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",fr:"French",ff:"Fula",gl:"Galician",ka:"Georgian",de:"German",el:"Greek",gn:"Guaraní",gu:"Gujarati",ht:"Haitian",ha:"Hausa",he:"Hebrew",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hu:"Hungarian",ia:"Interlingua",id:"Indonesian",ie:"Interlingue",ga:"Irish",ig:"Igbo",ik:"Inupiaq",io:"Ido",is:"Icelandic",it:"Italian",iu:"Inuktitut",ja:"Japanese",jv:"Javanese",kl:"Kalaallisut",kn:"Kannada",kr:"Kanuri",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ki:"Kikuyu",rw:"Kinyarwanda",ky:"Kyrgyz",kv:"Komi",kg:"Kongo",ko:"Korean",ku:"Kurdish",kj:"Kwanyama",la:"Latin",lb:"Luxembourgish",lg:"Ganda",li:"Limburgish",ln:"Lingala",lo:"Lao",lt:"Lithuanian",lu:"Luba-Katanga",lv:"Latvian",gv:"Manx",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Māori",mr:"Marathi",mh:"Marshallese",mn:"Mongolian",na:"Nauru",nv:"Navajo",nb:"Norwegian Bokmål",nd:"North Ndebele",ne:"Nepali",ng:"Ndonga",nn:"Norwegian Nynorsk",no:"Norwegian",ii:"Nuosu",nr:"South Ndebele",oc:"Occitan",oj:"Ojibwe",cu:"Old Church Slavonic",om:"Oromo",or:"Oriya",os:"Ossetian",pa:"Panjabi",pi:"Pāli",fa:"Persian",pl:"Polish",ps:"Pashto",pt:"Portuguese","pt-br":"Portuguese (Brazilian)",qu:"Quechua",rm:"Romansh",rn:"Kirundi",ro:"Romanian",ru:"Russian",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",se:"Northern Sami",sm:"Samoan",sg:"Sango",sr:"Serbian",gd:"Gaelic",sn:"Shona",si:"Sinhala",sk:"Slovak",sl:"Slovene",so:"Somali",st:"Southern Sotho",es:"Spanish",su:"Sundanese",sw:"Swahili",ss:"Swati",sv:"Swedish",ta:"Tamil",te:"Telugu",tg:"Tajik",th:"Thai",ti:"Tigrinya",bo:"Tibetan",tk:"Turkmen",tl:"Tagalog",tn:"Tswana",to:"Tonga",tr:"Turkish",ts:"Tsonga",tt:"Tatar",tw:"Twi",ty:"Tahitian",ug:"Uighur",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",ve:"Venda",vi:"Vietnamese",vo:"Volapük",wa:"Walloon",cy:"Welsh",wo:"Wolof",fy:"Western Frisian",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang",zu:"Zulu"},LATIN_MAP={A:"Á Ă Ắ Ặ Ằ Ẳ Ẵ Ǎ Â Ấ Ậ Ầ Ẩ Ẫ Ä Ǟ Ȧ Ǡ Ạ Ȁ À Ả Ȃ Ā Ą Å Ǻ Ḁ Ⱥ Ã Ɐ ᴀ",AA:"Ꜳ",AE:"Æ Ǽ Ǣ ᴁ",AO:"Ꜵ",AU:"Ꜷ",AV:"Ꜹ Ꜻ",AY:"Ꜽ",B:"Ḃ Ḅ Ɓ Ḇ Ƀ Ƃ ʙ ᴃ",C:"Ć Č Ç Ḉ Ĉ Ċ Ƈ Ȼ Ꜿ ᴄ",D:"Ď Ḑ Ḓ Ḋ Ḍ Ɗ Ḏ ǲ ǅ Đ Ƌ Ꝺ ᴅ",DZ:"Ǳ Ǆ",E:"É Ĕ Ě Ȩ Ḝ Ê Ế Ệ Ề Ể Ễ Ḙ Ë Ė Ẹ Ȅ È Ẻ Ȇ Ē Ḗ Ḕ Ę Ɇ Ẽ Ḛ Ɛ Ǝ ᴇ ⱻ",ET:"Ꝫ",F:"Ḟ Ƒ Ꝼ ꜰ",G:"Ǵ Ğ Ǧ Ģ Ĝ Ġ Ɠ Ḡ Ǥ Ᵹ ɢ ʛ",H:"Ḫ Ȟ Ḩ Ĥ Ⱨ Ḧ Ḣ Ḥ Ħ ʜ",I:"Í Ĭ Ǐ Î Ï Ḯ İ Ị Ȉ Ì Ỉ Ȋ Ī Į Ɨ Ĩ Ḭ ɪ",R:"Ꞃ Ŕ Ř Ŗ Ṙ Ṛ Ṝ Ȑ Ȓ Ṟ Ɍ Ɽ ʁ ʀ ᴙ ᴚ",S:"Ꞅ Ś Ṥ Š Ṧ Ş Ŝ Ș Ṡ Ṣ Ṩ ꜱ",T:"Ꞇ Ť Ţ Ṱ Ț Ⱦ Ṫ Ṭ Ƭ Ṯ Ʈ Ŧ ᴛ",IS:"Ꝭ",J:"Ĵ Ɉ ᴊ",K:"Ḱ Ǩ Ķ Ⱪ Ꝃ Ḳ Ƙ Ḵ Ꝁ Ꝅ ᴋ",L:"Ĺ Ƚ Ľ Ļ Ḽ Ḷ Ḹ Ⱡ Ꝉ Ḻ Ŀ Ɫ ǈ Ł Ꞁ ʟ ᴌ",LJ:"Ǉ",M:"Ḿ Ṁ Ṃ Ɱ Ɯ ᴍ",N:"Ń Ň Ņ Ṋ Ṅ Ṇ Ǹ Ɲ Ṉ Ƞ ǋ Ñ ɴ ᴎ",NJ:"Ǌ",O:"Ó Ŏ Ǒ Ô Ố Ộ Ồ Ổ Ỗ Ö Ȫ Ȯ Ȱ Ọ Ő Ȍ Ò Ỏ Ơ Ớ Ợ Ờ Ở Ỡ Ȏ Ꝋ Ꝍ Ō Ṓ Ṑ Ɵ Ǫ Ǭ Ø Ǿ Õ Ṍ Ṏ Ȭ Ɔ ᴏ ᴐ",OI:"Ƣ",OO:"Ꝏ",OU:"Ȣ ᴕ",P:"Ṕ Ṗ Ꝓ Ƥ Ꝕ Ᵽ Ꝑ ᴘ",Q:"Ꝙ Ꝗ",V:"Ʌ Ꝟ Ṿ Ʋ Ṽ ᴠ",TZ:"Ꜩ",U:"Ú Ŭ Ǔ Û Ṷ Ü Ǘ Ǚ Ǜ Ǖ Ṳ Ụ Ű Ȕ Ù Ủ Ư Ứ Ự Ừ Ử Ữ Ȗ Ū Ṻ Ų Ů Ũ Ṹ Ṵ ᴜ",VY:"Ꝡ",W:"Ẃ Ŵ Ẅ Ẇ Ẉ Ẁ Ⱳ ᴡ",X:"Ẍ Ẋ",Y:"Ý Ŷ Ÿ Ẏ Ỵ Ỳ Ƴ Ỷ Ỿ Ȳ Ɏ Ỹ ʏ",Z:"Ź Ž Ẑ Ⱬ Ż Ẓ Ȥ Ẕ Ƶ ᴢ",IJ:"Ĳ",OE:"Œ ɶ",a:"á ă ắ ặ ằ ẳ ẵ ǎ â ấ ậ ầ ẩ ẫ ä ǟ ȧ ǡ ạ ȁ à ả ȃ ā ą ᶏ ẚ å ǻ ḁ ⱥ ã ɐ ₐ",aa:"ꜳ",ae:"æ ǽ ǣ ᴂ",ao:"ꜵ",au:"ꜷ",av:"ꜹ ꜻ",ay:"ꜽ",b:"ḃ ḅ ɓ ḇ ᵬ ᶀ ƀ ƃ",o:"ɵ ó ŏ ǒ ô ố ộ ồ ổ ỗ ö ȫ ȯ ȱ ọ ő ȍ ò ỏ ơ ớ ợ ờ ở ỡ ȏ ꝋ ꝍ ⱺ ō ṓ ṑ ǫ ǭ ø ǿ õ ṍ ṏ ȭ ɔ ᶗ ᴑ ᴓ ₒ",c:"ć č ç ḉ ĉ ɕ ċ ƈ ȼ ↄ ꜿ",d:"ď ḑ ḓ ȡ ḋ ḍ ɗ ᶑ ḏ ᵭ ᶁ đ ɖ ƌ ꝺ",i:"ı í ĭ ǐ î ï ḯ ị ȉ ì ỉ ȋ ī į ᶖ ɨ ĩ ḭ ᴉ ᵢ",j:"ȷ ɟ ʄ ǰ ĵ ʝ ɉ ⱼ",dz:"ǳ ǆ",e:"é ĕ ě ȩ ḝ ê ế ệ ề ể ễ ḙ ë ė ẹ ȅ è ẻ ȇ ē ḗ ḕ ⱸ ę ᶒ ɇ ẽ ḛ ɛ ᶓ ɘ ǝ ₑ",et:"ꝫ",f:"ḟ ƒ ᵮ ᶂ ꝼ",g:"ǵ ğ ǧ ģ ĝ ġ ɠ ḡ ᶃ ǥ ᵹ ɡ ᵷ",h:"ḫ ȟ ḩ ĥ ⱨ ḧ ḣ ḥ ɦ ẖ ħ ɥ ʮ ʯ",hv:"ƕ",r:"ꞃ ŕ ř ŗ ṙ ṛ ṝ ȑ ɾ ᵳ ȓ ṟ ɼ ᵲ ᶉ ɍ ɽ ɿ ɹ ɻ ɺ ⱹ ᵣ",s:"ꞅ ſ ẜ ẛ ẝ ś ṥ š ṧ ş ŝ ș ṡ ṣ ṩ ʂ ᵴ ᶊ ȿ",t:"ꞇ ť ţ ṱ ț ȶ ẗ ⱦ ṫ ṭ ƭ ṯ ᵵ ƫ ʈ ŧ ʇ",is:"ꝭ",k:"ḱ ǩ ķ ⱪ ꝃ ḳ ƙ ḵ ᶄ ꝁ ꝅ ʞ",l:"ĺ ƚ ɬ ľ ļ ḽ ȴ ḷ ḹ ⱡ ꝉ ḻ ŀ ɫ ᶅ ɭ ł ꞁ",lj:"ǉ",m:"ḿ ṁ ṃ ɱ ᵯ ᶆ ɯ ɰ",n:"ń ň ņ ṋ ȵ ṅ ṇ ǹ ɲ ṉ ƞ ᵰ ᶇ ɳ ñ",nj:"ǌ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ṕ ṗ ꝓ ƥ ᵱ ᶈ ꝕ ᵽ ꝑ",q:"ꝙ ʠ ɋ ꝗ",u:"ᴝ ú ŭ ǔ û ṷ ü ǘ ǚ ǜ ǖ ṳ ụ ű ȕ ù ủ ư ứ ự ừ ử ữ ȗ ū ṻ ų ᶙ ů ũ ṹ ṵ ᵤ",th:"ᵺ",oe:"ᴔ œ",v:"ʌ ⱴ ꝟ ṿ ʋ ᶌ ⱱ ṽ ᵥ",w:"ʍ ẃ ŵ ẅ ẇ ẉ ẁ ⱳ ẘ",y:"ʎ ý ŷ ÿ ẏ ỵ ỳ ƴ ỷ ỿ ȳ ẙ ɏ ỹ",tz:"ꜩ",ue:"ᵫ",um:"ꝸ",vy:"ꝡ",x:"ẍ ẋ ᶍ ₓ",z:"ź ž ẑ ʑ ⱬ ż ẓ ȥ ẕ ᵶ ᶎ ʐ ƶ ɀ",ff:"ﬀ",ffi:"ﬃ",ffl:"ﬄ",fi:"ﬁ",fl:"ﬂ",ij:"ĳ",st:"ﬆ"};
return LATIN_MAP=_.chain(LATIN_MAP).map(function(value,key){return _.map(value.split(" "),function(v){return[v,key]})}).flatten(!0).reduce(function(memo,pair){return memo[pair[0]]=pair[1],memo},{}).value(),{shortenLanguageCode:shortenLanguageCode,languageCodeCSVtoLanguages:languageCodeCSVtoLanguages,languageCodeToName:languageCodeToName,latinizeText:latinizeText,isRightToLeft:isRightToLeft,normalizeLanguageCode:normalizeLanguageCode,getLanguageCode:getLanguageCode}}),function(undefined){function padToken(func,count){return function(a){return leftZeroFill(func.call(this,a),count)}}function ordinalizeToken(func,period){return function(a){return this.lang().ordinal(func.call(this,a),period)}}function Language(){}function Moment(config){checkOverflow(config),extend(this,config)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._input=duration,this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+12*years,this._data={},this._bubble()}function extend(a,b){for(var i in b)if(b.hasOwnProperty(i))a[i]=b[i];if(b.hasOwnProperty("toString"))a.toString=b.toString;if(b.hasOwnProperty("valueOf"))a.valueOf=b.valueOf;return a}function absRound(number){if(0>number)return Math.ceil(number);else return Math.floor(number)}function leftZeroFill(number,targetLength){for(var output=number+"";output.length<targetLength;)output="0"+output;return output}function addOrSubtractDurationFromMoment(mom,duration,isAdding,ignoreUpdateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months,minutes,hours;if(milliseconds)mom._d.setTime(+mom._d+milliseconds*isAdding);if(days||months)minutes=mom.minute(),hours=mom.hour();if(days)mom.date(mom.date()+days*isAdding);if(months)mom.month(mom.month()+months*isAdding);if(milliseconds&&!ignoreUpdateOffset)moment.updateOffset(mom);if(days||months)mom.minute(minutes),mom.hour(hours)}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return"[object Date]"===Object.prototype.toString.call(input)}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;len>i;i++)if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))diffs++;return diffs+lengthDiff}function normalizeUnits(units){return units?unitAliases[units]||units.toLowerCase().replace(/(.)s$/,"$1"):units}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop,index;for(prop in inputObject)if(inputObject.hasOwnProperty(prop))if(normalizedProp=normalizeUnits(prop))normalizedInput[normalizedProp]=inputObject[prop];return normalizedInput}function makeList(field){var count,setter;if(0===field.indexOf("week"))count=7,setter="day";else if(0===field.indexOf("month"))count=12,setter="month";else return;moment[field]=function(format,index){var i,getter,method=moment.fn._lang[field],results=[];if("number"==typeof format)index=format,format=undefined;if(getter=function(i){var m=moment().utc().set(setter,i);return method.call(moment.fn._lang,m,format||"")},index)return getter(index);else{for(i=0;count>i;i++)results.push(getter(i));return results}}}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(0!==coercedNumber&&isFinite(coercedNumber))if(coercedNumber>=0)value=Math.floor(coercedNumber);else value=Math.ceil(coercedNumber);return value}function daysInMonth(year,month){return moment.utc([year,month+1,0]).date()}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}function checkOverflow(m){var overflow;if(m._a&&-2===m._pf.overflow){if(overflow=m._a[MONTH]<0||m._a[MONTH]>11?MONTH:m._a[DATE]<1||m._a[DATE]>daysInMonth(m._a[YEAR],m._a[MONTH])?DATE:m._a[HOUR]<0||m._a[HOUR]>23?HOUR:m._a[MINUTE]<0||m._a[MINUTE]>59?MINUTE:m._a[SECOND]<0||m._a[SECOND]>59?SECOND:m._a[MILLISECOND]<0||m._a[MILLISECOND]>999?MILLISECOND:-1,m._pf._overflowDayOfYear&&(YEAR>overflow||overflow>DATE))overflow=DATE;m._pf.overflow=overflow}}function initializeParsingFlags(config){config._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,userInvalidated:!1}}function isValid(m){if(null==m._isValid)if(m._isValid=!isNaN(m._d.getTime())&&m._pf.overflow<0&&!m._pf.empty&&!m._pf.invalidMonth&&!m._pf.nullInput&&!m._pf.userInvalidated,m._strict)m._isValid=m._isValid&&0===m._pf.charsLeftOver&&0===m._pf.unusedTokens.length;return m._isValid}function normalizeLanguage(key){return key?key.toLowerCase().replace("_","-"):key}function loadLang(key,values){if(values.abbr=key,!languages[key])languages[key]=new Language;return languages[key].set(values),languages[key]}function unloadLang(key){delete languages[key]}function getLangDefinition(key){var i=0,j,lang,next,split,get=function(k){if(!languages[k]&&hasModule)try{require("./lang/"+k)}catch(e){}return languages[k]};if(!key)return moment.fn._lang;if(!isArray(key)){if(lang=get(key))return lang;key=[key]}for(;i<key.length;){for(split=normalizeLanguage(key[i]).split("-"),j=split.length,next=normalizeLanguage(key[i+1]),next=next?next.split("-"):null;j>0;){if(lang=get(split.slice(0,j).join("-")))return lang;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return moment.fn._lang}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/))return input.replace(/^\[|\]$/g,"");return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;length>i;i++)if(formatTokenFunctions[array[i]])array[i]=formatTokenFunctions[array[i]];else array[i]=removeFormattingTokens(array[i]);return function(mom){var output="";for(i=0;length>i;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}function formatMoment(m,format){if(!m.isValid())return m.lang().invalidDate();if(format=expandFormat(format,m.lang()),!formatFunctions[format])formatFunctions[format]=makeFormatFunction(format);return formatFunctions[format](m)}function expandFormat(format,lang){function replaceLongDateFormatTokens(input){return lang.longDateFormat(input)||input}var i=5;for(localFormattingTokens.lastIndex=0;i>=0&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}function getParseRegexForToken(token,config){var a;switch(token){case"DDDD":return parseTokenThreeDigits;case"YYYY":return parseTokenFourDigits;case"YYYYY":return parseTokenSixDigits;case"S":case"SS":case"SSS":case"DDD":return parseTokenOneToThreeDigits;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return parseTokenWord;case"a":case"A":return getLangDefinition(config._l)._meridiemParse;case"X":return parseTokenTimestampMs;case"Z":case"ZZ":return parseTokenTimezone;case"T":return parseTokenT;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return parseTokenOneOrTwoDigits;default:return a=new RegExp(regexpEscape(unescapeFormat(token.replace("\\","")),"i"))}}function timezoneMinutesFromString(string){var tzchunk=(parseTokenTimezone.exec(string)||[])[0],parts=(tzchunk+"").match(parseTimezoneChunker)||["-",0,0],minutes=+(60*parts[1])+toInt(parts[2]);return"+"===parts[0]?-minutes:minutes}function addTimeToArrayFromToken(token,input,config){var a,datePartArray=config._a;switch(token){case"M":case"MM":if(null!=input)datePartArray[MONTH]=toInt(input)-1;break;case"MMM":case"MMMM":if(a=getLangDefinition(config._l).monthsParse(input),null!=a)datePartArray[MONTH]=a;else config._pf.invalidMonth=input;break;case"D":case"DD":if(null!=input)datePartArray[DATE]=toInt(input);break;case"DDD":case"DDDD":if(null!=input)config._dayOfYear=toInt(input);break;case"YY":datePartArray[YEAR]=toInt(input)+(toInt(input)>68?1900:2e3);break;case"YYYY":case"YYYYY":datePartArray[YEAR]=toInt(input);break;case"a":case"A":config._isPm=getLangDefinition(config._l).isPM(input);break;case"H":case"HH":case"h":case"hh":datePartArray[HOUR]=toInt(input);break;case"m":case"mm":datePartArray[MINUTE]=toInt(input);break;case"s":case"ss":datePartArray[SECOND]=toInt(input);break;case"S":case"SS":case"SSS":datePartArray[MILLISECOND]=toInt(1e3*("0."+input));break;case"X":config._d=new Date(1e3*parseFloat(input));break;case"Z":case"ZZ":config._useUTC=!0,config._tzm=timezoneMinutesFromString(input)}}function dateFromConfig(config){var i,date,input=[],currentDate,yearToUse;if(config._d)return;if(currentDate=currentDateArray(config),config._dayOfYear){if(yearToUse=null==config._a[YEAR]?currentDate[YEAR]:config._a[YEAR],config._dayOfYear>(isLeapYear(yearToUse)?364:365))config._pf._overflowDayOfYear=!0;date=makeUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()}for(i=0;3>i&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;7>i;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];input[HOUR]+=toInt((config._tzm||0)/60),input[MINUTE]+=toInt((config._tzm||0)%60),config._d=(config._useUTC?makeUTCDate:makeDate).apply(null,input)}function dateFromObject(config){var normalizedInput;if(config._d)return;normalizedInput=normalizeObjectUnits(config._i),config._a=[normalizedInput.year,normalizedInput.month,normalizedInput.day,normalizedInput.hour,normalizedInput.minute,normalizedInput.second,normalizedInput.millisecond],dateFromConfig(config)}function currentDateArray(config){var now=new Date;if(config._useUTC)return[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()];else return[now.getFullYear(),now.getMonth(),now.getDate()]}function makeDateFromStringAndFormat(config){config._a=[],config._pf.empty=!0;var lang=getLangDefinition(config._l),string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,lang).match(formattingTokens)||[],i=0;i<tokens.length;i++){if(token=tokens[i],parsedInput=(getParseRegexForToken(token,config).exec(string)||[])[0]){if(skipped=string.substr(0,string.indexOf(parsedInput)),skipped.length>0)config._pf.unusedInput.push(skipped);string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput)config._pf.empty=!1;else config._pf.unusedTokens.push(token);addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput)config._pf.unusedTokens.push(token)}if(config._pf.charsLeftOver=stringLength-totalParsedInputLength,string.length>0)config._pf.unusedInput.push(string);if(config._isPm&&config._a[HOUR]<12)config._a[HOUR]+=12;if(config._isPm===!1&&12===config._a[HOUR])config._a[HOUR]=0;dateFromConfig(config),checkOverflow(config)}function unescapeFormat(s){return s.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4})}function regexpEscape(s){return s.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}function makeDateFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat=1e3,i,currentScore;for(i=0;i<config._f.length;i++){if(currentScore=0,tempConfig=extend({},config),initializeParsingFlags(tempConfig),tempConfig._f=config._f[i],makeDateFromStringAndFormat(tempConfig),!isValid(tempConfig))continue;if(currentScore+=tempConfig._pf.charsLeftOver,currentScore+=10*tempConfig._pf.unusedTokens.length,tempConfig._pf.score=currentScore,scoreToBeat>currentScore)scoreToBeat=currentScore,bestMoment=tempConfig}extend(config,bestMoment||tempConfig)}function makeDateFromString(config){var i,string=config._i,match=isoRegex.exec(string);if(match){for(config._f="YYYY-MM-DD"+(match[2]||" "),i=0;4>i;i++)if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}if(parseTokenTimezone.exec(string))config._f+=" Z";makeDateFromStringAndFormat(config)}else config._d=new Date(string)}function makeDateFromInput(config){var input=config._i,matched=aspNetJsonRegex.exec(input);if(input===undefined)config._d=new Date;else if(matched)config._d=new Date(+matched[1]);else if("string"==typeof input)makeDateFromString(config);else if(isArray(input))config._a=input.slice(0),dateFromConfig(config);else if(isDate(input))config._d=new Date(+input);else if("object"==typeof input)dateFromObject(config);else config._d=new Date(input)}function makeDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(1970>y)date.setFullYear(y);return date}function makeUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(1970>y)date.setUTCFullYear(y);return date}function substituteTimeAgo(string,number,withoutSuffix,isFuture,lang){return lang.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function relativeTime(milliseconds,withoutSuffix,lang){var seconds=round(Math.abs(milliseconds)/1e3),minutes=round(seconds/60),hours=round(minutes/60),days=round(hours/24),years=round(days/365),args=45>seconds&&["s",seconds]||1===minutes&&["m"]||45>minutes&&["mm",minutes]||1===hours&&["h"]||22>hours&&["hh",hours]||1===days&&["d"]||25>=days&&["dd",days]||45>=days&&["M"]||345>days&&["MM",round(days/30)]||1===years&&["y"]||["yy",years];return args[2]=withoutSuffix,args[3]=milliseconds>0,args[4]=lang,substituteTimeAgo.apply({},args)}function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end)daysToDayOfWeek-=7;if(end-7>daysToDayOfWeek)daysToDayOfWeek+=7;return adjustedMoment=moment(mom).add("d",daysToDayOfWeek),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function makeMoment(config){var input=config._i,format=config._f;if("undefined"==typeof config._pf)initializeParsingFlags(config);if(null===input)return moment.invalid({nullInput:!0});if("string"==typeof input)config._i=input=getLangDefinition().preparse(input);if(moment.isMoment(input))config=extend({},input),config._d=new Date(+input._d);else if(format)if(isArray(format))makeDateFromStringAndArray(config);else makeDateFromStringAndFormat(config);else makeDateFromInput(config);return new Moment(config)}function makeGetterAndSetter(name,key){moment.fn[name]=moment.fn[name+"s"]=function(input){var utc=this._isUTC?"UTC":"";if(null!=input)return this._d["set"+utc+key](input),moment.updateOffset(this),this;else return this._d["get"+utc+key]()}}function makeDurationGetter(name){moment.duration.fn[name]=function(){return this._data[name]}}function makeDurationAsGetter(name,factor){moment.duration.fn["as"+name]=function(){return+this/factor}}function makeGlobal(){if("undefined"==typeof ender)this.moment=moment}for(var moment,VERSION="2.2.1",round=Math.round,i,YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6,languages={},hasModule="undefined"!=typeof module&&module.exports,aspNetJsonRegex=/^\/?Date\((\-?\d+)/i,aspNetTimeSpanJsonRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,isoDurationRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,parseTokenOneOrTwoDigits=/\d\d?/,parseTokenOneToThreeDigits=/\d{1,3}/,parseTokenThreeDigits=/\d{3}/,parseTokenFourDigits=/\d{1,4}/,parseTokenSixDigits=/[+\-]?\d{1,6}/,parseTokenWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,parseTokenTimezone=/Z|[\+\-]\d\d:?\d\d/i,parseTokenT=/T/i,parseTokenTimestampMs=/[\+\-]?\d+(\.\d{1,3})?/,isoRegex=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?$/,isoFormat="YYYY-MM-DDTHH:mm:ssZ",isoTimes=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],parseTimezoneChunker=/([\+\-]|\d\d)/gi,proxyGettersAndSetters="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),unitMillisecondFactors={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},unitAliases={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",W:"isoweek",M:"month",y:"year"},formatFunctions={},ordinalizeTokens="DDD w W M D d".split(" "),paddedTokens="M D H h m s w W".split(" "),formatTokenFunctions={M:function(){return this.month()+1},MMM:function(format){return this.lang().monthsShort(this,format)},MMMM:function(format){return this.lang().months(this,format)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(format){return this.lang().weekdaysMin(this,format)},ddd:function(format){return this.lang().weekdaysShort(this,format)},dddd:function(format){return this.lang().weekdays(this,format)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return leftZeroFill(this.year()%100,2)},YYYY:function(){return leftZeroFill(this.year(),4)},YYYYY:function(){return leftZeroFill(this.year(),5)},gg:function(){return leftZeroFill(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return leftZeroFill(this.weekYear(),5)},GG:function(){return leftZeroFill(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return leftZeroFill(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return toInt(this.milliseconds()/100)},SS:function(){return leftZeroFill(toInt(this.milliseconds()/10),2)},SSS:function(){return leftZeroFill(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";if(0>a)a=-a,b="-";return b+leftZeroFill(toInt(a/60),2)+":"+leftZeroFill(toInt(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";if(0>a)a=-a,b="-";return b+leftZeroFill(toInt(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},lists=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ordinalizeTokens.length;)i=ordinalizeTokens.pop(),formatTokenFunctions[i+"o"]=ordinalizeToken(formatTokenFunctions[i],i);for(;paddedTokens.length;)i=paddedTokens.pop(),formatTokenFunctions[i+i]=padToken(formatTokenFunctions[i],2);for(formatTokenFunctions.DDDD=padToken(formatTokenFunctions.DDD,3),extend(Language.prototype,{set:function(config){var prop,i;for(i in config)if(prop=config[i],"function"==typeof prop)this[i]=prop;else this["_"+i]=prop},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(m){return this._months[m.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(m){return this._monthsShort[m.month()]},monthsParse:function(monthName){var i,mom,regex;if(!this._monthsParse)this._monthsParse=[];for(i=0;12>i;i++){if(!this._monthsParse[i])mom=moment.utc([2e3,i]),regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i");if(this._monthsParse[i].test(monthName))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(m){return this._weekdays[m.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(m){return this._weekdaysShort[m.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(m){return this._weekdaysMin[m.day()]},weekdaysParse:function(weekdayName){var i,mom,regex;if(!this._weekdaysParse)this._weekdaysParse=[];for(i=0;7>i;i++){if(!this._weekdaysParse[i])mom=moment([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i");if(this._weekdaysParse[i].test(weekdayName))return i}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()])output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key]=output;return output},isPM:function(input){return"p"===(input+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(hours,minutes,isLower){if(hours>11)return isLower?"pm":"PM";else return isLower?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(key,mom){var output=this._calendar[key];return"function"==typeof output?output.apply(mom):output},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},pastFuture:function(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)},ordinal:function(number){return this._ordinal.replace("%d",number)},_ordinal:"%d",preparse:function(string){return string},postformat:function(string){return string},week:function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),moment=function(input,format,lang,strict){if("boolean"==typeof lang)strict=lang,lang=undefined;return makeMoment({_i:input,_f:format,_l:lang,_strict:strict,_isUTC:!1})},moment.utc=function(input,format,lang,strict){var m;if("boolean"==typeof lang)strict=lang,lang=undefined;return m=makeMoment({_useUTC:!0,_isUTC:!0,_l:lang,_i:input,_f:format,_strict:strict}).utc()},moment.unix=function(input){return moment(1e3*input)},moment.duration=function(input,key){var isDuration=moment.isDuration(input),isNumber="number"==typeof input,duration=isDuration?input._input:isNumber?{}:input,match=null,sign,ret,parseIso,timeEmpty,dateTimeEmpty;if(isNumber)if(key)duration[key]=input;else duration.milliseconds=input;else if(match=aspNetTimeSpanJsonRegex.exec(input))sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign};else if(match=isoDurationRegex.exec(input))sign="-"===match[1]?-1:1,parseIso=function(inp){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign},duration={y:parseIso(match[2]),M:parseIso(match[3]),d:parseIso(match[4]),h:parseIso(match[5]),m:parseIso(match[6]),s:parseIso(match[7]),w:parseIso(match[8])};if(ret=new Duration(duration),isDuration&&input.hasOwnProperty("_lang"))ret._lang=input._lang;return ret},moment.version=VERSION,moment.defaultFormat=isoFormat,moment.updateOffset=function(){},moment.lang=function(key,values){var r;if(!key)return moment.fn._lang._abbr;if(values)loadLang(normalizeLanguage(key),values);else if(null===values)unloadLang(key),key="en";else if(!languages[key])getLangDefinition(key);return r=moment.duration.fn._lang=moment.fn._lang=getLangDefinition(key),r._abbr},moment.langData=function(key){if(key&&key._lang&&key._lang._abbr)key=key._lang._abbr;return getLangDefinition(key)},moment.isMoment=function(obj){return obj instanceof Moment},moment.isDuration=function(obj){return obj instanceof Duration},i=lists.length-1;i>=0;--i)makeList(lists[i]);for(moment.normalizeUnits=function(units){return normalizeUnits(units)},moment.invalid=function(flags){var m=moment.utc(0/0);if(null!=flags)extend(m._pf,flags);else m._pf.userInvalidated=!0;return m},moment.parseZone=function(input){return moment(input).parseZone()},extend(moment.fn=Moment.prototype,{clone:function(){return moment(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return formatMoment(moment(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var m=this;return[m.year(),m.month(),m.date(),m.hours(),m.minutes(),m.seconds(),m.milliseconds()]},isValid:function(){return isValid(this)},isDSTShifted:function(){if(this._a)return this.isValid()&&compareArrays(this._a,(this._isUTC?moment.utc(this._a):moment(this._a)).toArray())>0;return!1},parsingFlags:function(){return extend({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(inputString){var output=formatMoment(this,inputString||moment.defaultFormat);return this.lang().postformat(output)},add:function(input,val){var dur;if("string"==typeof input)dur=moment.duration(+val,input);else dur=moment.duration(input,val);return addOrSubtractDurationFromMoment(this,dur,1),this},subtract:function(input,val){var dur;if("string"==typeof input)dur=moment.duration(+val,input);else dur=moment.duration(input,val);return addOrSubtractDurationFromMoment(this,dur,-1),this},diff:function(input,units,asFloat){var that=this._isUTC?moment(input).zone(this._offset||0):moment(input).local(),zoneDiff=6e4*(this.zone()-that.zone()),diff,output;if(units=normalizeUnits(units),"year"===units||"month"===units){if(diff=432e5*(this.daysInMonth()+that.daysInMonth()),output=12*(this.year()-that.year())+(this.month()-that.month()),output+=(this-moment(this).startOf("month")-(that-moment(that).startOf("month")))/diff,output-=6e4*(this.zone()-moment(this).startOf("month").zone()-(that.zone()-moment(that).startOf("month").zone()))/diff,"year"===units)output/=12}else diff=this-that,output="second"===units?diff/1e3:"minute"===units?diff/6e4:"hour"===units?diff/36e5:"day"===units?(diff-zoneDiff)/864e5:"week"===units?(diff-zoneDiff)/6048e5:diff;return asFloat?output:absRound(output)},from:function(time,withoutSuffix){return moment.duration(this.diff(time)).lang(this.lang()._abbr).humanize(!withoutSuffix)},fromNow:function(withoutSuffix){return this.from(moment(),withoutSuffix)},calendar:function(){var diff=this.diff(moment().zone(this.zone()).startOf("day"),"days",!0),format=-6>diff?"sameElse":-1>diff?"lastWeek":0>diff?"lastDay":1>diff?"sameDay":2>diff?"nextDay":7>diff?"nextWeek":"sameElse";return this.format(this.lang().calendar(format,this))},isLeapYear:function(){return isLeapYear(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=input){if("string"==typeof input)if(input=this.lang().weekdaysParse(input),"number"!=typeof input)return this;return this.add({d:input-day})}else return day},month:function(input){var utc=this._isUTC?"UTC":"",dayOfMonth;if(null!=input){if("string"==typeof input)if(input=this.lang().monthsParse(input),"number"!=typeof input)return this;return dayOfMonth=this.date(),this.date(1),this._d["set"+utc+"Month"](input),this.date(Math.min(dayOfMonth,this.daysInMonth())),moment.updateOffset(this),this}else return this._d["get"+utc+"Month"]()},startOf:function(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoweek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if("week"===units)this.weekday(0);else if("isoweek"===units)this.isoWeekday(1);return this},endOf:function(units){return units=normalizeUnits(units),this.startOf(units).add("isoweek"===units?"week":units,1).subtract("ms",1)},isAfter:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)>+moment(input).startOf(units)},isBefore:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)<+moment(input).startOf(units)},isSame:function(input,units){return units="undefined"!=typeof units?units:"millisecond",+this.clone().startOf(units)===+moment(input).startOf(units)},min:function(other){return other=moment.apply(null,arguments),this>other?this:other},max:function(other){return other=moment.apply(null,arguments),other>this?this:other},zone:function(input){var offset=this._offset||0;if(null!=input){if("string"==typeof input)input=timezoneMinutesFromString(input);if(Math.abs(input)<16)input=60*input;if(this._offset=input,this._isUTC=!0,offset!==input)addOrSubtractDurationFromMoment(this,moment.duration(offset-input,"m"),1,!0)}else return this._isUTC?offset:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if("string"==typeof this._i)this.zone(this._i);return this},hasAlignedHourOffset:function(input){if(!input)input=0;else input=moment(input).zone();return(this.zone()-input)%60===0},daysInMonth:function(){return daysInMonth(this.year(),this.month())},dayOfYear:function(input){var dayOfYear=round((moment(this).startOf("day")-moment(this).startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add("d",input-dayOfYear)},weekYear:function(input){var year=weekOfYear(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==input?year:this.add("y",input-year)},isoWeekYear:function(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add("y",input-year)},week:function(input){var week=this.lang().week(this);return null==input?week:this.add("d",7*(input-week))},isoWeek:function(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add("d",7*(input-week))},weekday:function(input){var weekday=(this.day()+7-this.lang()._week.dow)%7;return null==input?weekday:this.add("d",input-weekday)},isoWeekday:function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},get:function(units){return units=normalizeUnits(units),this[units.toLowerCase()]()},set:function(units,value){return units=normalizeUnits(units),this[units.toLowerCase()](value),this},lang:function(key){if(key===undefined)return this._lang;else return this._lang=getLangDefinition(key),this}}),i=0;i<proxyGettersAndSetters.length;i++)makeGetterAndSetter(proxyGettersAndSetters[i].toLowerCase().replace(/s$/,""),proxyGettersAndSetters[i]);makeGetterAndSetter("year","FullYear"),moment.fn.days=moment.fn.day,moment.fn.months=moment.fn.month,moment.fn.weeks=moment.fn.week,moment.fn.isoWeeks=moment.fn.isoWeek,moment.fn.toJSON=moment.fn.toISOString,extend(moment.duration.fn=Duration.prototype,{_bubble:function(){var milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data,seconds,minutes,hours,years;data.milliseconds=milliseconds%1e3,seconds=absRound(milliseconds/1e3),data.seconds=seconds%60,minutes=absRound(seconds/60),data.minutes=minutes%60,hours=absRound(minutes/60),data.hours=hours%24,days+=absRound(hours/24),data.days=days%30,months+=absRound(days/30),data.months=months%12,years=absRound(months/12),data.years=years
},weeks:function(){return absRound(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},humanize:function(withSuffix){var difference=+this,output=relativeTime(difference,!withSuffix,this.lang());if(withSuffix)output=this.lang().pastFuture(difference,output);return this.lang().postformat(output)},add:function(input,val){var dur=moment.duration(input,val);return this._milliseconds+=dur._milliseconds,this._days+=dur._days,this._months+=dur._months,this._bubble(),this},subtract:function(input,val){var dur=moment.duration(input,val);return this._milliseconds-=dur._milliseconds,this._days-=dur._days,this._months-=dur._months,this._bubble(),this},get:function(units){return units=normalizeUnits(units),this[units.toLowerCase()+"s"]()},as:function(units){return units=normalizeUnits(units),this["as"+units.charAt(0).toUpperCase()+units.slice(1)+"s"]()},lang:moment.fn.lang,toIsoString:function(){var years=Math.abs(this.years()),months=Math.abs(this.months()),days=Math.abs(this.days()),hours=Math.abs(this.hours()),minutes=Math.abs(this.minutes()),seconds=Math.abs(this.seconds()+this.milliseconds()/1e3);if(!this.asSeconds())return"P0D";return(this.asSeconds()<0?"-":"")+"P"+(years?years+"Y":"")+(months?months+"M":"")+(days?days+"D":"")+(hours||minutes||seconds?"T":"")+(hours?hours+"H":"")+(minutes?minutes+"M":"")+(seconds?seconds+"S":"")}});for(i in unitMillisecondFactors)if(unitMillisecondFactors.hasOwnProperty(i))makeDurationAsGetter(i,unitMillisecondFactors[i]),makeDurationGetter(i.toLowerCase());if(makeDurationAsGetter("Weeks",6048e5),moment.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},moment.lang("en",{ordinal:function(number){var b=number%10,output=1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return number+output}}),hasModule)module.exports=moment,makeGlobal();else if("function"==typeof define&&define.amd)define("js/lib/moment",[],function(){return moment});else makeGlobal()}.call(this),define("js/lib/nls/moment.lang",{es:!0,fr:!0,pt:!0,ru:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),define("js/core/coursera",["js/core/origami","js/core/config","jquery","underscore","backbone","js/lib/supports","js/lib/third-parties","js/lib/log","js/lib/multitracker","js/lib/metatags","js/lib/language","js/lib/moment","i18n!js/lib/nls/moment.lang"],function(Origami,config,$,_,Backbone,supports,thirdparty,Logger,MultiTracker,metatags,language,moment){moment.lang(language.getLanguageCode());var Coursera=new Origami("#origami");if(Coursera.config=config,Coursera.supports=supports,Coursera.log=Logger({level:config.log}),"production"==config.environment)requirejs.onError=function(Error){Coursera.multitracker.push(["page.error.requirejs",{url:location.href,message:Error.message,type:Error.requireType,modules:Error.requireModules}]),Coursera.log.error(Error);var match=Error.message.match(/context:\s*(.*)\s*\n/);if(match&&"_"==match[1]){var message="<div>oooops! something unexpected happened, please <a href='"+location.href+"'>refresh</a> your browser</div>",$screen=$("<div>").addClass("fullscreen");Coursera.message.add($(message).addClass("message")),$screen.appendTo("body").show()}};return Coursera.multitracker=MultiTracker({logger:Coursera.log}),Coursera.multitracker.register("204",[]),Coursera.multitracker.register("ga",window._gaq=[],"google"),$(document).ready(function(){if(/staging|production/.test(Coursera.config.environment))requirejs.config({context:"204js",paths:{_204:"https://eventing.coursera.org/204.min"}})(["_204"],function(_204){if(!_204)return;for(var parts=location.host.split(".");parts.length>2;)parts.shift();Coursera.multitracker.get("204").queue.push(["domain","."+parts.join(".")]),Coursera.multitracker.get("204").queue=_204.batch(Coursera.multitracker.get("204").queue)}),Coursera.multitracker.get("ga").queue.push(["_setAccount","UA-28377374-1"],["_setDomainName","coursera.org"],["_setAllowLinker",!0],["_trackPageview"]),thirdparty.loadScript(("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",function(){Coursera.multitracker.get("ga").queue=window._gaq});var routerEvent="0.9.2"==Backbone.VERSION?"all":"route";Coursera.router.on(routerEvent,function(){var currentURL=Coursera.config.url.base+Backbone.history.getFragment();metatags.share("Coursera","http://s3.amazonaws.com/coursera/media/Coursera_Computer_Narrow.png","Take free online classes from 80+ top universities and organizations. Coursera is a social entrepreneurship company partnering with Stanford University, Yale University, Princeton University and others around the world to offer courses online for anyone to take, for free. We believe in connecting people to a great education so that anyone around the world can learn without limits.",currentURL),Coursera.multitracker.push(["pageview",currentURL])});var $window=$(window),scrollTracker=function(){var source=_.compact((window.location.pathname||"").split("/")).join("-")||"homepage";Coursera.multitracker.push(["user.scroll."+source,$window.scrollTop()])};$window.scroll(_.throttle(scrollTracker,2e3))}),Coursera}),function(wndw){var config={debug:!1,out:"pages/auth/config.js",url:{api:"/api/v1/",www:"https://www.coursera.org/",assets:"https://d2wvvaown1ul17.cloudfront.net/site-static/",app_assets:"/assets/bce8de59b7e5c3244ee0791a0e32b18a937a7bbe/"},dir:{home:"/"}};if("function"==typeof define&&define.amd)define("pages/auth/config",[],function(){return config});else return wndw.configure=config}(window),function(wndw){var cookie=function($){var cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||null===value||void 0===value)){if(options=$.extend({},options),null===value||void 0===value)options.expires=-1;if(!options.path)options.path="/";if("number"==typeof options.expires){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}return value=String(value),wndw.document.cookie=[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}options=value||{};for(var decode=options.raw?function(s){return s}:decodeURIComponent,pairs=wndw.document.cookie.split("; "),i=0,pair;pairs[i];i++)if(pair=pairs[i].split("="),decode(pair[0])===key)return decode(pair[1]||"");return null};return{get:cookie,set:cookie,clear:function(key,options){for(var cookies=wndw.document.cookie.split("; "),i=0;i<cookies.length;i++){var equals=cookies[i].indexOf("="),name=equals>-1?cookies[i].substr(0,equals):cookies[i];if(!key||key==name)cookie(name,null,options)}}}};if("function"==typeof define&&define.amd)define("js/lib/cookie",["jquery"],function($){return cookie($)});else if("undefined"!=typeof wndw&&"undefined"==typeof ender)wndw.Cookie=cookie(wndw.$)}(window),!function(wndw){var globalActiveAjaxCount=0,api=function($,_,cookie,Backbone){var _private={defaults:{type:"normal","csrf.token":"X-CSRFToken","csrf.cookie":"csrftoken","csrf.path":null,"csrf.domain":null,"csrf.secure":!0,"csrf2.token_header":"X-CSRF2-Token","csrf2.cookie_name_header":"X-CSRF2-Cookie","csrf2.cookie_prefix":"csrf2_token_","emulate.patch":!0,"emulate.put":!1,"emulate.delete":!1,"custom.header.name":null,"custom.header.value":null},csrfGet:function(){var token=cookie.get(this.options["csrf.cookie"]);if(token)return token;else return _private.csrfSet.call(this,_private.csrfMake())},csrfClear:function(){cookie.clear(this.options["csrf.cookie"],{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"]})},csrfSet:function(token){return cookie.set(this.options["csrf.cookie"],token,{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"],expires:new Date((new Date).getTime()+6e4)}),token},csrfMake:function(length,chars){var output=[];chars=chars||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",length=length||24;for(var i=0;length>i;i++)output.push(chars[Math.floor(Math.random()*chars.length)]);return output.join("")},csrf2SetUp:function(ajaxOptions){if("GET"==ajaxOptions.type)return{};var cookieName=this.options["csrf2.cookie_prefix"]+_private.csrfMake(8),token=_private.csrfMake();cookie.set(cookieName,token,{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"],expires:new Date((new Date).getTime()+6e4)}),ajaxOptions.headers[this.options["csrf2.cookie_name_header"]]=cookieName,ajaxOptions.headers[this.options["csrf2.token_header"]]=token},csrf2TearDown:function(ajaxHeaders){var cookieName=ajaxHeaders[this.options["csrf2.cookie_name_header"]];if(cookieName)cookie.clear(cookieName,{secure:this.options["csrf.secure"],path:this.options["csrf.path"],domain:this.options["csrf.domain"]})},invoke:function(path,_options){_options=_.extend({},_options);var options=_options||{},url;if(0!==path.indexOf("http"))url=this.root+path;else url=path;this.trigger("before",url,options);var params="GET"==options.type?options.data:null,remove=function(e,item){this.remove(item.options.id)},message=options.message||{},codes=message.codes?_.keys(message.codes):[],asyncMessage=this.options.message,that=this;if(delete options.message,"GET"!=options.type&&_.isUndefined(options.processData)&&"rest"==this.options.type)options.contentType="application/json; charset=utf-8",options.processData=!1,options.data=JSON.stringify(options.data);options.beforeSend=function(){globalActiveAjaxCount++};var jqXHR=$.ajax(url,options);if(asyncMessage){if(message.waiting){var waitID=asyncMessage.add($("<div>").append(message.waiting).addClass("waiting"),{delay:100});jqXHR.always(function(jqXHR,textStatus){asyncMessage.remove(waitID)})}if(message.success||message.codes&&_.min(codes)<300)jqXHR.done(function(jqXHR,textStatus){if(message.codes&&message.codes[jqXHR.status])asyncMessage.add($("<div>").append(message.codes[jqXHR.status]).addClass("success"),{timeout:500});else if(message.success)asyncMessage.add($("<div>").append(message.success).addClass("success"),{timeout:500})});if(message.error||message.timeout||message.codes&&_.max(codes)>=300)jqXHR.fail(function(jqXHR,textStatus){if(message.timeout&&"timeout"==textStatus)asyncMessage.add($("<div>").append(message.timeout).addClass("error"),{events:{click:remove}});else if(message.codes&&message.codes[jqXHR.status])asyncMessage.add($("<div>").append(message.codes[jsXHR.status]).addClass("error"),{events:{click:remove}});else if(message.error)asyncMessage.add($("<div>").append(message.error).addClass("error"),{events:{click:remove}})})}var start=(new Date).getTime();return that.trigger("send",{xhr:jqXHR,url:url}),jqXHR.always(function(){if(0===--globalActiveAjaxCount)_private.csrfClear.call(that);_private.csrf2TearDown.call(that,options.headers||{}),that.trigger("always",{xhr:jqXHR,url:url,params:params,timing:(new Date).getTime()-start})}),jqXHR.fail(function(){that.trigger("fail",{xhr:jqXHR,url:url,params:params})}),jqXHR},restify:function(method,_options){var options=_options||{};switch(options.data=options.data||{},options.headers=options.headers||{},method){case"POST":options.type="POST";break;case"PATCH":if(this.options["emulate.patch"])options.type="POST",options.headers["X-HTTP-Method-Override"]="PATCH";else options.type="PATCH";break;case"PUT":if(this.options["emulate.put"])options.type="POST",options.headers["X-HTTP-Method-Override"]="PUT";else options.type="PUT";break;case"DELETE":if(this.options["emulate.delete"])options.type="POST",options.headers["X-HTTP-Method-Override"]="DELETE";else options.type="DELETE";break;default:options.type="GET"}if("GET"!=options.type)options.headers[this.options["csrf.token"]]=_private.csrfGet.call(this),_private.csrf2SetUp.call(this,options);if(this.options["custom.header.name"])options.headers[this.options["custom.header.name"]]=this.options["custom.header.value"];return options}},api=function(root,options){this.root=root,this.options=_.extend({},_private.defaults,options)};return api.prototype.customize=function(options){return this.options=_.extend(this.options,options),this},api.prototype.get=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"GET",options))},api.prototype.patch=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"PATCH",options))},api.prototype["delete"]=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"DELETE",options))},api.prototype.post=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"POST",options))},api.prototype.put=function(path,options){return _private.invoke.call(this,path,_private.restify.call(this,"PUT",options))},_.extend(api.prototype,Backbone.Events),function(root,options){return new api(root,options)}};if("function"==typeof define&&define.amd)define("js/lib/api",["jquery","underscore","js/lib/cookie","backbone","js/lib/json2"],function($,_,Cookie,Backbone){return api($,_,Cookie,Backbone)});else wndw.API=api(wndw.$,wndw._,wndw.Cookie,wndw.Backbone)}(window),define("js/lib/asyncMessages",["jquery","underscore","js/lib/cookie","backbone"],function($,_,cookie,Backbone){var _private={defaults:{selector:null},defaults_item:{timeout:0},item_remove:function(item){var index=_.indexOf(this.stack,item.options.id);if(-1!=index){this.stack.splice(index,1);for(var _event in item.options.events)item.$ele.off(_event+".asyncMessage");item.$ele.remove()}delete this.items[item.options.id]},item_show:function(item){var that=this;if(this.stack.length){var previous=this.items[this.stack[0]];if(previous)previous.$ele.remove()}if(this.$container.append(item.$ele),this.trigger("showing",item.$ele),this.$container.show(),this.stack.unshift(item.options.id),this.trigger("show",item),item.options.timeout)setTimeout(function(){that.trigger("hiding",item),that.remove(item.options.id),that.trigger("hide",item)},item.options.timeout);for(var _event in item.options.events)item.$ele.on(_event+".asyncMessage",function(e){item.options.events[_event].call(that,e,item)})}},asyncMessage=function(ele,options){this.options=$.extend({},_private.defaults,options),this.$ele=$(ele||$("<div>").appendTo("body")),this.$container=this.options.selector?this.$ele.find(this.options.selector):this.$ele,this.stack=[],this.items={}};return asyncMessage.prototype.add=function(ele,_options){var $item=$(ele),options=$.extend({},_private.defaults_item,_options),that=this;if(options.id=options.id||_.uniqueId(),_.has(this.items,options.id))return options.id;this.items[options.id]={$ele:$item,options:options,timer:null};var show=function(){if(!that.stack.length)that.trigger("opening");if(_private.item_show.call(that,that.items[options.id]),1==that.stack.length)that.trigger("open")};if(options.delay)this.items[options.id].timer=setTimeout(show,options.delay);else show();return options.id},asyncMessage.prototype.remove=function(id){var item=this.items[id];if(item)if(clearTimeout(item.timer),1==this.stack.length)this.trigger("closing"),_private.item_remove.call(this,item),this.$container.hide(),this.trigger("close");else{if(this.stack.length){var toShow=this.items[this.stack.shift()];if(toShow)_private.item_show.call(this,toShow)}_private.item_remove.call(this,item)}},_.extend(asyncMessage.prototype,Backbone.Events),{create:function(ele,options){return new asyncMessage(ele,options)}}}),define("pages/auth/app",["jquery","underscore","backbone","js/core/coursera","pages/auth/config","js/lib/api","js/lib/asyncMessages","pages/auth/authConfig"],function($,_,Backbone,Coursera,config,API,asyncMessages,authConfig){config.environment=authConfig.environment,Coursera.config=config;var $message=$("<div>").appendTo("body").addClass("coursera-async-message");Coursera.message=asyncMessages.create($message),Coursera.api=API(Coursera.config.url.api,{message:Coursera.message,"csrf.secure":!0}),Coursera.api.on("always",function(api){if(api.xhr.status>=400)Coursera.multitracker.push(["api.error."+api.xhr.status,{timing:api.timing,url:api.url,status:api.xhr.status,response:api.xhr.responseText}]);else Coursera.multitracker.push(["api.ok."+api.xhr.status,{timing:api.timing,url:api.url,status:api.xhr.status}])});var urlPatterns=[/^http(s)?:\/\/([A-z0-9\-]+).coursera.org\//,/^http(s)?:\/\/([A-z0-9\-]+).dev-coursera.org\//,/^\//];return Coursera.safeRedirect=function(redirectUrl,altUrl){var validUrl=!1;if(-1!=redirectUrl.indexOf("?r=")){var redirectPart=redirectUrl.substr(redirectUrl.indexOf("?r=")+3),originalPart=redirectUrl.substr(0,redirectUrl.indexOf("?r=")+3);redirectUrl=originalPart+encodeURIComponent(redirectPart)}if(redirectUrl=redirectUrl.replace(/%26$/,""),_.each(urlPatterns,function(pattern){if(null!=redirectUrl.match(pattern))validUrl=!0,location.href=redirectUrl}),!validUrl)location.href=altUrl},Coursera.on("region:fetching",function(region){Coursera.message.add($("<div>loading page</div>").addClass("waiting"),{id:region.name+region.uid})}),Coursera.on("region:fetched",function(region){Coursera.message.remove(region.name+region.uid)}),Coursera}),define("js/lib/backbone.queryparams.0.2.4",["underscore","backbone"],function(_,Backbone){function _getFragment(fragment,forcePushState){if(null==fragment)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=this.location.pathname;var root=this.root.replace(trailingSlash,""),search=this.location.search;if(!fragment.indexOf(root))fragment=fragment.substr(root.length);if(search)fragment+=search}else fragment=this.getHash();return fragment.replace(routeStripper,"")}function parseParams(value){return decodeURIComponent(value.replace(/\+/g," "))}function iterateQueryString(queryString,callback){var keyValues=queryString.split("&");_.each(keyValues,function(keyValue){var arr=keyValue.split("=");callback(arr.shift(),arr.join("="))})}var queryStringParam=/^\?(.*)/,optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g,queryStrip=/(\?.*)$/,fragmentStrip=/^([^\?]*)/,hasQueryString=/(\?)[\w-]+/i,namesPattern=/[\:\*]([^\:\?\/]+)/g,routeStripper=/^[#\/]|\s+$/g,trailingSlash=/\/$/;Backbone.Router.arrayValueSplit="|",_.extend(Backbone.History.prototype,{getFragment:function(fragment,forcePushState){var excludeQueryString=this._wantsHashChange&&this._wantsPushState&&!this._hasPushState,_fragment=_getFragment.apply(this,arguments);if(null==fragment&&null==_fragment&&!hasQueryString.test(_fragment))_fragment+=this.location.search;else if(excludeQueryString)_fragment=_fragment.replace(queryStrip,"");return _fragment},getQueryParameters:function(fragment,forcePushState){fragment=_getFragment.apply(this,arguments);var queryString=fragment.replace(fragmentStrip,""),match=queryString.match(queryStringParam);if(match){queryString=match[1];var rtn={};return iterateQueryString(queryString,function(name,value){if(value=parseParams(value),!rtn[name])rtn[name]=value;else if(_.isString(rtn[name]))rtn[name]=[rtn[name],value];else rtn[name].push(value)}),rtn}else return{}}}),_.extend(Backbone.Router.prototype,{initialize:function(options){this.encodedSplatParts=options&&options.encodedSplatParts},getFragment:function(fragment,forcePushState,excludeQueryString){if(fragment=_getFragment.apply(this,arguments),excludeQueryString)fragment=fragment.replace(queryStrip,"");return fragment},_routeToRegExp:function(route){var splatMatch=splatParam.exec(route)||{index:-1},namedMatch=namedParam.exec(route)||{index:-1},paramNames=route.match(namesPattern)||[];route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^\\/\\?]+)"}).replace(splatParam,"([^??]*?)"),route+="(\\?.*)?";var rtn=new RegExp("^"+route+"$");if(splatMatch.index>=0)if(namedMatch>=0)rtn.splatMatch=splatMatch.index-namedMatch.index;else rtn.splatMatch=-1;return rtn.paramNames=_.map(paramNames,function(name){return name.substring(1)}),rtn.namedParameters=this.namedParameters,rtn},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1),namedParams={};if(params.length>0&&_.isUndefined(params[params.length-1]))params.splice(params.length-1,1);var match=params.length&&params[params.length-1]&&params[params.length-1].match(queryStringParam);if(match){var queryString=match[1],data={};if(queryString){var self=this;iterateQueryString(queryString,function(name,value){self._setParamValue(name,value,data)})}params[params.length-1]=data,_.extend(namedParams,data)}var length=params.length;if(route.splatMatch&&this.encodedSplatParts)if(route.splatMatch<0)return params;else length-=1;for(var i=0;length>i;i++)if(_.isString(params[i]))if(params[i]=parseParams(params[i]),route.paramNames&&route.paramNames.length>=i-1)namedParams[route.paramNames[i]]=params[i];return Backbone.Router.namedParameters||route.namedParameters?[namedParams]:params},_setParamValue:function(key,value,data){key=key.replace("[]",""),key=key.replace("%5B%5D","");for(var parts=key.split("."),_data=data,i=0;i<parts.length;i++){var part=parts[i];if(i===parts.length-1)_data[part]=this._decodeParamValue(value,_data[part]);else _data=_data[part]=_data[part]||{}}},_decodeParamValue:function(value,currentValue){var splitChar=Backbone.Router.arrayValueSplit;if(splitChar&&value.indexOf(splitChar)>=0){for(var values=value.split(splitChar),i=values.length-1;i>=0;i--)if(!values[i])values.splice(i,1);else values[i]=parseParams(values[i]);return values}if(value=parseParams(value),!currentValue)return value;else if(_.isArray(currentValue))return currentValue.push(value),currentValue;else return[currentValue,value]},toFragment:function(route,queryParameters){if(queryParameters){if(!_.isString(queryParameters))queryParameters=this._toQueryString(queryParameters);if(queryParameters)route+="?"+queryParameters}return route},_toQueryString:function(val,namePrefix){function encodeSplit(val){return String(val).replace(splitChar,encodeURIComponent(splitChar))}var splitChar=Backbone.Router.arrayValueSplit;if(!val)return"";namePrefix=namePrefix||"";var rtn="";for(var name in val){var _val=val[name];if(_.isString(_val)||_.isNumber(_val)||_.isBoolean(_val)||_.isDate(_val)){if(_val=this._toQueryParam(_val),_.isBoolean(_val)||_.isNumber(_val)||_.isString(_val)||_val)rtn+=(rtn?"&":"")+this._toQueryParamName(name,namePrefix)+"="+encodeSplit(encodeURIComponent(_val))}else if(_.isArray(_val)){for(var str="",i=0;i<_val.length;i++){var param=this._toQueryParam(_val[i]);if(_.isBoolean(param)||null!==param)str+=splitChar+encodeSplit(param)}if(str)rtn+=(rtn?"&":"")+this._toQueryParamName(name,namePrefix)+"="+str}else{var result=this._toQueryString(_val,this._toQueryParamName(name,namePrefix,!0));if(result)rtn+=(rtn?"&":"")+result}}return rtn},_toQueryParamName:function(name,prefix,isPrefix){return prefix+name+(isPrefix?".":"")},_toQueryParam:function(param){if(_.isNull(param)||_.isUndefined(param))return null;return param}})}),define("pages/auth/template/nls/page",{}),function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp;return buf.push('<div><div class="coursera-page"><div class="coursera-header"></div><div class="coursera-banner"></div><div class="coursera-body"></div></div><div class="coursera-footer"></div></div>'),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/auth/template/page.html",["js/lib/jade","i18n!pages/auth/template/nls/page"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.auth.template.page"]=jadify(wndw.jade.helpers)}(window),define("pages/auth/template/page",["jquery","backbone","underscore","js/core/coursera","pages/auth/template/page.html"],function($,Backbone,_,Coursera,template){var page=Backbone.View.extend({name:"page",subregions:{header:"pages/auth/template/header",footer:"pages/auth/template/footer",body:"pages/auth/template/body",banner:"pages/auth/template/banner"},initialize:function(){this.bind("view:appended",this.scroll),this.bind("view:updated",this.scroll)},scroll:function(){$("html, body").scrollTop(0)},render:function(){var regions=this.region.regions,self=this,page=$(template());return self.$el.append(page),_.each(["header","banner","body","footer"],function(type){if(!regions[type])return void page.find(".coursera-"+type).hide();page.find(".coursera-"+type).replaceWith(regions[type].view.el)}),self}});return page}),define("pages/auth/template/nls/header",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(config,_t){buf.push('<div class="container"><div class="row"><div class="coursera-header-primary"><a'+jade.attr("href",config.url.www,!0,!1)+' class="internal-home coursera-logo"></a></div><div style="float:left;" class="coursera-header-secondary"><span style="margin:0px 0px 0px 37px;color:#717171;"> | </span><span class="coursera-header-university-label">'+jade.escape(null==(jade_interp=_t("Accounts"))?"":jade_interp)+"</span></div></div></div>")}("config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/auth/template/header.html",["js/lib/jade","i18n!pages/auth/template/nls/header"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.auth.template.header"]=jadify(wndw.jade.helpers)}(window),function(wndw){function UserAgent(source){if(void 0===source)source=navigator.userAgent;this.source=source.replace(/^\s*/,"").replace(/\s*$/,""),this.browser_name=browser_name(this.source),this.browser_version=browser_version(this.source),this.os=os(this.source),this.platform=platform(this.source)}var Browsers,OS,Platform,Versions,browser_name,browser_version,os,platform;if(Versions={Firefox:/firefox\/([\d\w\.\-]+)/i,IE:/msie\s([\d\.]+[\d])/i,Chrome:/chrome\/([\d\w\.\-]+)/i,Safari:/version\/([\d\w\.\-]+)/i,Ps3:/([\d\w\.\-]+)\)\s*$/i,Psp:/([\d\w\.\-]+)\)?\s*$/i},Browsers={Konqueror:/konqueror/i,Chrome:/chrome/i,Safari:/safari/i,IE:/msie/i,Opera:/opera/i,PS3:/playstation 3/i,PSP:/playstation portable/i,Firefox:/firefox/i},OS={WindowsVista:/windows nt 6\.0/i,Windows7:/windows nt 6\.\d+/i,Windows2003:/windows nt 5\.2/i,WindowsXP:/windows nt 5\.1/i,Windows2000:/windows nt 5\.0/i,OSX:/os x (\d+)[._](\d+)/i,Linux:/linux/i,Wii:/wii/i,PS3:/playstation 3/i,PSP:/playstation portable/i,Ipad:/\(iPad.*os (\d+)[._](\d+)/i,Iphone:/\(iPhone.*os (\d+)[._](\d+)/i},Platform={Windows:/windows/i,Mac:/macintosh/i,Linux:/linux/i,Wii:/wii/i,Playstation:/playstation/i,Ipad:/ipad/i,Ipod:/ipod/i,Iphone:/iphone/i,Android:/android/i,Blackberry:/blackberry/i},browser_name=function(string){if(Browsers.Konqueror.test(string))return"Konqueror";else if(Browsers.Chrome.test(string))return"Chrome";else if(Browsers.Safari.test(string))return"Safari";else if(Browsers.IE.test(string))return"IE";else if(Browsers.Opera.test(string))return"Opera";else if(Browsers.PS3.test(string))return"PS3";else if(Browsers.PSP.test(string))return"PSP";else if(Browsers.Firefox.test(string))return"Firefox";else return"unknown"},browser_version=function(string){var regex;switch(browser_name(string)){case"Chrome":if(Versions.Chrome.test(string))return RegExp.$1;break;case"Safari":if(Versions.Safari.test(string))return RegExp.$1;break;case"Firefox":if(Versions.Firefox.test(string))return RegExp.$1;break;case"IE":if(Versions.IE.test(string))return RegExp.$1;break;case"PS3":if(Versions.Ps3.test(string))return RegExp.$1;break;case"PSP":if(Versions.Psp.test(string))return RegExp.$1;break;default:if(regex=/#\{name\}[\/ ]([\d\w\.\-]+)/i,regex.test(string))return RegExp.$1}},os=function(string){if(OS.WindowsVista.test(string))return"Windows Vista";else if(OS.Windows7.test(string))return"Windows 7";else if(OS.Windows2003.test(string))return"Windows 2003";else if(OS.WindowsXP.test(string))return"Windows XP";else if(OS.Windows2000.test(string))return"Windows 2000";else if(OS.Linux.test(string))return"Linux";else if(OS.Wii.test(string))return"Wii";else if(OS.PS3.test(string))return"Playstation";else if(OS.PSP.test(string))return"Playstation";else if(OS.OSX.test(string))return string.match(OS.OSX)[0].replace("_",".");else if(OS.Ipad.test(string))return string.match(OS.Ipad)[0].replace("_",".").replace("(","");else if(OS.Iphone.test(string))return string.match(OS.Iphone)[0].replace("_",".").replace("(","");else return"unknown"},platform=function(string){if(Platform.Windows.test(string))return"Microsoft Windows";else if(Platform.Mac.test(string))return"Apple Mac";else if(Platform.Android.test(string))return"Android";else if(Platform.Blackberry.test(string))return"Blackberry";else if(Platform.Linux.test(string))return"Linux";else if(Platform.Wii.test(string))return"Wii";else if(Platform.Playstation.test(string))return"Playstation";else if(Platform.Ipad.test(string))return"iPad";else if(Platform.Ipod.test(string))return"iPod";else if(Platform.Iphone.test(string))return"iPhone";else return"unknown"},"function"==typeof define&&define.amd)define("js/lib/useragent",[],function(){return UserAgent});else window.UserAgent=UserAgent}(window),function(wndw){function BrowserBanner($,UserAgent){function browserFileAccept(inputButton){var userAgent=new UserAgent;if("safari"==userAgent.browser_name.toLowerCase())$(inputButton).removeAttr("accept")}function isSupportedBrowser(){var userAgent=new UserAgent;if("ie"==userAgent.browser_name.toLowerCase()&&userAgent.browser_version<9)return!1;if("firefox"==userAgent.browser_name.toLowerCase()&&userAgent.browser_version<12)return!1;if("safari"==userAgent.browser_name.toLowerCase()&&userAgent.browser_version<5)return!1;return!0}function maybeShowBanner(){if(!isSupportedBrowser())showBanner()}function showBanner(){if($(".coursera-browser-banner").length>0)return;var $browserBanner=$('<div class="coursera-browser-banner">');$browserBanner.css({"text-align":"center","font-size":"16px",padding:"10px 0px",background:"#FFEEA9","margin-top":"-100px","border-bottom":"1px solid #CCC"}),$browserBanner.html('You are using an unsupported browser, so some features may not work. <br> Please upgrade to a <a href="http://help.coursera.org/customer/portal/articles/823684-what-kind-of-computer-and-web-browser-do-i-need-">modern browser</a>.'),$(document.body).prepend($browserBanner),$browserBanner.animate({"margin-top":"+=100px"},1e3)}return $(document).ready(maybeShowBanner),{isSupportedBrowser:isSupportedBrowser,browserFileAccept:browserFileAccept,showBanner:showBanner}}if("function"==typeof define&&define.amd)define("js/lib/browser",["jquery","js/lib/useragent"],function($,UserAgent){return new BrowserBanner($,UserAgent)});else new BrowserBanner(wndw.$,wndw.UserAgent)}(window),define("pages/auth/template/header",["underscore","backbone","js/core/coursera","pages/auth/template/header.html","i18n!pages/auth/template/nls/header","jquery","js/lib/browser"],function(_,Backbone,Coursera,template,_t,$){var header=Backbone.View.extend({name:"header",className:"coursera-header",attributes:{role:"menubar"},initialize:function(options){var self=this;this.options=options,self.bind("view:appended",function(){}),self.bind("view:closed",function(){})},render:function(){var self=this;if(self.$el.html(template({_t:_t,config:Coursera.config})),this.options&&this.options.params&&this.options.params.is_mobile_app)this.$el.find(".coursera-logo").removeAttr("href");
return self}});return header}),define("pages/auth/template/banner",["underscore","backbone","js/core/coursera"],function(_,Backbone,Coursera){var banner=Backbone.View.extend({name:"banner",className:"coursera-banner",attributes:{role:"navigation"}});return banner}),define("pages/auth/template/nls/footer",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,config){buf.push('<div class="container"><div class="row-fluid"><div class="coursera-footer-content-primary span5"><a class="coursera-footer-link coursera-logo"></a><p>'+jade.escape(null==(jade_interp=_t("Coursera empowers people to improve their lives, the lives of their families, and the"))?"":jade_interp)+"\n"+jade.escape(null==(jade_interp=_t("communities they live in with education."))?"":jade_interp)+'</p><p class="coursera-footer-copyright">'+jade.escape(null==(jade_interp=_t("© 2014 Coursera Inc. All rights reserved."))?"":jade_interp)+'</p></div><div class="span7"><div class="row-fluid"><div class="coursera-footer-content-column span3"><h6>'+jade.escape(null==(jade_interp=_t("Company"))?"":jade_interp)+"</h6><a"+jade.attr("href",config.url.www+"about",!0,!1)+' class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("About"))?"":jade_interp)+"</a><a"+jade.attr("href",config.url.www+"about/leadership",!0,!1)+' class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Leadership"))?"":jade_interp)+"</a><a"+jade.attr("href",config.url.www+"about/people",!0,!1)+' class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("People"))?"":jade_interp)+"</a><a"+jade.attr("href",config.url.www+"about/careers",!0,!1)+' class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Careers"))?"":jade_interp)+'</a></div><div class="coursera-footer-content-column span3"><h6>'+jade.escape(null==(jade_interp=_t("Friends"))?"":jade_interp)+"</h6><a"+jade.attr("href",config.url.www+"about/partners",!0,!1)+' class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Partners"))?"":jade_interp)+"</a><a"+jade.attr("href",config.url.www+"about/community",!0,!1)+' class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Community"))?"":jade_interp)+"</a><a"+jade.attr("href",config.url.www+"about/programs",!0,!1)+' class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Programs"))?"":jade_interp)+'</a><a href="http://tech.coursera.org/app-platform" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Developers"))?"":jade_interp)+'</a></div><div class="coursera-footer-content-column span3"><h6>'+jade.escape(null==(jade_interp=_t("Connect"))?"":jade_interp)+'</h6><a target="_blank" href="https://plus.google.com/111950594039269281469" title="Follow Coursera on Google Plus" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Google+"))?"":jade_interp)+'</a><a target="_blank" href="http://twitter.com/coursera" title="Follow Coursera on Twitter" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Twitter"))?"":jade_interp)+'</a><a target="_blank" href="http://facebook.com/Coursera" title="Follow Coursera on Facebook" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Facebook"))?"":jade_interp)+'</a><a target="_blank" href="http://blog.coursera.org" title="Read the Coursera blog" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Blog"))?"":jade_interp)+'</a><a href="http://tech.coursera.org" class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Tech Blog"))?"":jade_interp)+'</a></div><div class="coursera-footer-content-column span3"><h6>'+jade.escape(null==(jade_interp=_t("More"))?"":jade_interp)+"</h6><a"+jade.attr("href",config.url.www+"about/terms",!0,!1)+' class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Terms"))?"":jade_interp)+"</a><a"+jade.attr("href",config.url.www+"about/privacy",!0,!1)+' class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Privacy"))?"":jade_interp)+'</a><a href="http://help.coursera.org">'+jade.escape(null==(jade_interp=_t("Help"))?"":jade_interp)+"</a><a"+jade.attr("href",config.url.www+"about/press",!0,!1)+' class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Press"))?"":jade_interp)+"</a><a"+jade.attr("href",config.url.www+"about/contact",!0,!1)+' class="coursera-footer-link">'+jade.escape(null==(jade_interp=_t("Contact"))?"":jade_interp)+"</a></div></div></div></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/auth/template/footer.html",["js/lib/jade","i18n!pages/auth/template/nls/footer"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.auth.template.footer"]=jadify(wndw.jade.helpers)}(window),define("pages/auth/template/footer",["underscore","backbone","js/core/coursera","pages/auth/template/footer.html","i18n!pages/auth/template/nls/footer"],function(_,Backbone,Coursera,template,_t){var footer=Backbone.View.extend({name:"footer",className:"coursera-footer",attributes:{role:"menubar"},render:function(){return this.$el.html(template({_t:_t,config:Coursera.config})),this}});return footer}),define("pages/auth/template/body",["underscore","backbone"],function(_,Backbone){var body=Backbone.View.extend({name:"body",attributes:{role:"article"},className:"coursera-body"});return body}),define("js/lib/schema",["underscore"],function(_){var Rules=function(param,rules){this.param=param,this.rules=rules};Rules.prototype.Error=function(message,rule,value){switch(typeof this.rules.error){case"string":message=this.rules.error;break;case"object":if(this.rules.error[rule])message=this.rules.error[rule];else if(this.rules.error["default"])message=this.rules.error["default"]}if(_.isString(value))message=message.replace(/%v/,value.toString());if(_.isString(rule))message=message.replace(/%r/,rule);return message.replace(/%p/,this.param).replace(/%v/,"value").replace(/%r/,"rule")},Rules.prototype.apply=function(value){if(_.isEmpty(value)&&!_.isUndefined(this.rules["default"]))value=this.rules["default"];if(this.rules.required){if(this.rules.required&&(_.isUndefined(value)||_.isUndefined(this.rules.type)&&/^\s*$/.test(value)))throw this.Error("%p is a required parameter","required",value)}else if(_.isUndefined(value))return value;if(this.rules.filters)value=this.filter(value);if(this.rules.type)if("string"==typeof this.rules.type&&"function"==typeof is[this.rules.type]){if(!is[this.rules.type](value))throw this.Error("%p is not a "+this.rules.type,"type",value)}else if(true){if(!this.rules.type(value))throw this.Error("%p is not a valid type","type",value)}else throw this.Error("%p is not a valid type","type",value);if(this.rules.properties)this.check(value);return value},Rules.prototype.filter=function(value){switch(typeof this.rules.filters){case"function":value=this.rules.filters(value);break;case"string":if("function"==typeof filters[this.rules.filters])value=filters[this.rules.filters](value);break;case"object":if(_.isArray(this.rules.filters))this.rules.filters.forEach(function(filter){value=filters[filter](value)})}return value},Rules.prototype.check=function(value){switch(typeof this.rules.properties){case"function":if(!this.rules.properties(value))throw this.Error("%p is not valid");break;case"object":for(var properties=_.keys(this.rules.properties),i=0;i<properties.length;i++){var property=properties[i];if("function"==typeof checks[property]){var args=this.rules.properties[property];if(!checks[property].apply(null,[value,args]))throw this.Error("%p failed %r with %v",property)}else if("function"==typeof this.rules.properties[property])if(!this.rules.properties[property].apply(null,[value]))throw this.Error("%p failed on %r with %v",property)}}};var checks={max:function(value,length){if(_.isArray(value)||"string"==typeof value)return value.length<=length;else if("number"==typeof value)return length>=value;else return!1},min:function(value,length){if(_.isArray(value)||"string"==typeof value)return value.length>=length;else if("number"==typeof value)return value>=length;else return!1},regex:function(value,regex){return regex.test(value)},"in":function(value,list){return-1!=list.indexOf(value)}},is={"string+":function(value){return"string"==typeof value&&""!==value},string:function(value){return"string"==typeof value},alphanum:function(value){return/^[a-zA-Z0-9]+$/i.test(value)},alpha:function(value){return/^[a-zA-Z]+$/i.test(value)},object:function(value){return"object"==typeof value&&!_.isArray(value)},array:function(value){return _.isArray(value)},date:function(value){return _.isDate(value)&&!isNaN(value.getTime())},number:function(value){return"number"==typeof value&&!isNaN(value)},"int":function(value){return"number"==typeof value&&value%1===0&&!isNaN(value)},"boolean":function(value){return _.isBoolean(value)},"float":function(value){return"number"==typeof value&&!isNaN(value)},email:function(value){return/[a-zA-Z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-zA-Z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z])?$/.test(value)},url:function(value){return/^(http(s)?:\/\/)?([\w\-]+\.{1})*(([\w\-]*){1}(\.{1}[A-Za-z]{2,4}){1}){1}(\:{1}\d*)?([\?\/|\#]+[\@\~\;\+\'\#\,\.\%\-\/\&\?\=\w\$\s]*)*$/i.test(value)},zipcode:function(value){return/\d{5}/.test(value)}},filters={toInt:function(value){return parseInt(value,10)},toFloat:function(value){return parseFloat(value,10)},toString:function(value){return value.toString()},toDate:function(value){return new Date(value)},toBoolean:function(value){if(1===value||value===!0||/true|on|yes|1/.test(value))return!0;else if(0===value||value===!1||/false|off|no|0/.test(value))return!1;else return value},trim:function(value){return _.isString(value)?value.replace(/^\s\s*/,"").replace(/\s\s*$/,""):value},lowercase:function(value){return _.isString(value)?value.toLowerCase():value},uppercase:function(value){return _.isString(value)?value.toUpperCase():value}},rules={create:function(param,rules){return new Rules(param,rules)},types:is,filters:filters,properties:checks},Schema=function(schema){this.schema=schema};Schema.prototype.validate=function(data){for(var params=_.keys(this.schema),errors={},values={},value,get="function"==typeof data?data:function(p){return data[p]},i=0;i<params.length;i++){var schema=this.schema[params[i]];try{if(value=rules.create(params[i],schema).apply(get(params[i])),!_.isUndefined(value))values[params[i]]=value;if("object"==typeof schema.schema&&!_.isArray(schema.schema)&&_.keys(schema.schema).length&&!_.isUndefined(values[params[i]]))if("object"==schema.type)_.keys(schema.schema).forEach(function(param){try{if(value=rules.create(params[i]+"."+param,schema.schema[param]).apply(get(params[i])[param]),!_.isUndefined(value))values[params[i]][param]=value}catch(error){if(!errors[params[i]]||"object"!=typeof errors[params[i]])errors[params[i]]={};errors[params[i]][param]=error}});else if("array"==schema.type)values[params[i]].forEach(function(value,index){try{values[params[i]][index]=rules.create(params[i]+"["+index+"]",schema.schema).apply(value)}catch(error){if(!_.isArray(errors[params[i]]))errors[params[i]]=[];errors[params[i]][index]=error}})}catch(error){errors[params[i]]=error}}return{data:values,errors:errors,valid:0===_.keys(errors).length}};var schema={test:function(value,schema){return new Schema({input:schema}).validate({input:value})},create:function(schema){return new Schema(schema)},rules:rules};return schema}),define("pages/auth/account/nls/signInBody",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(organization,_t,config,topicName,userAction,logged_out,email,resetUrl,allowSignup,signUpUrl){if(buf.push('<div class="container"><div class="coursera-full-canvas"><div class="row"><div class="span12"><div class="heading-banner">'),organization)buf.push("<h1>"+jade.escape(null==(jade_interp=_t("Sign into your"))?"":jade_interp)+" <em>"+jade.escape(null==(jade_interp=_t(organization.name))?"":jade_interp)+" </em>"+jade.escape(null==(jade_interp=_t("account:"))?"":jade_interp)+"</h1>");else if(buf.push("<a"+jade.attr("href",config.url.www+"about/reporter?area=signin",!0,!1)+' target="_blank" style="display:none;" class="coursera-reporter-link">'+jade.escape(null==(jade_interp=_t("Help"))?"":jade_interp)+"</a>"),!topicName)buf.push("<h1>"+jade.escape(null==(jade_interp=_t("Sign In"))?"":jade_interp)+"</h1>");else if("enroll"==userAction||"class"==userAction)buf.push("<h1>"+jade.escape(null==(jade_interp=_t("Take '#{topicName}'",{topicName:topicName}))?"":jade_interp)+"</h1><p>"+jade.escape(null==(jade_interp=_t("Sign in with your Coursera account to enroll. It's free!"))?"":jade_interp)+"</p>");else if("subscribe"==userAction)buf.push("<h1>"+jade.escape(null==(jade_interp=_t("Watch '#{topicName}'",{topicName:topicName}))?"":jade_interp)+"</h1><p>"+jade.escape(null==(jade_interp=_t("Sign in with your Coursera account to watch that course. We'll let you know when new sessions are offered."))?"":jade_interp)+"</p>");if(buf.push("</div></div></div>"),logged_out)buf.push('<div style="padding-top:20px;" class="alert alert-warning"><strong>'+jade.escape(null==(jade_interp=_t("Why do I need to log in again?"))?"":jade_interp)+"</strong><p>"+jade.escape(null==(jade_interp=_t("We require you to log in to your account occasionally to protect your account's security. Please log in below to continue using Coursera."))?"":jade_interp)+"</p></div>");if(buf.push('<div class="row"><div class="span6 auth-border-right"><div style="padding-top:20px;"><form action="javascript:void(0);" class="coursera-signin-form"><div id="signin-fail" role="alert" aria-live="assertive" class="control-group hide error"><span class="help-inline">'+jade.escape(null==(jade_interp=_t("Login did not work, check your email and password and try again."))?"":jade_interp)+'</span></div><div id="signin-geo-fail" role="alert" aria-live="assertive" class="control-group hide error"><span class="help-inline">'+jade.escape(null==(jade_interp=_t("Our system indicates that you are attempting to access the Coursera site from an IP address associated with a country currently subject to U.S. economic and trade sanctions. In order for Coursera to comply with U.S. export controls, we cannot allow you access to the site."))?"":jade_interp)+'<a href="http://help.coursera.org/customer/portal/articles/1425714-why-is-my-country-blocked">'+(null==(jade_interp=_t("&nbsp;Help"))?"":jade_interp)+'</a></span></div><div id="signin-error" role="alert" aria-live="assertive" class="control-group hide error"><span class="help-inline">'+(null==(jade_interp=_t('Sorry, but we ran into an error trying to process your request. please try again later or contact <a href="mailto:technical@coursera.org">technical@coursera.org</a> for more help.'))?"":jade_interp)+'</span></div><div class="control-group"><label for="signin-email">'+jade.escape(null==(jade_interp=_t("Email"))?"":jade_interp)+'</label><div class="controls"><input type="text" title="Your Email Address" id="signin-email"'+jade.attr("value",email,!0,!1)+'/></div></div><div class="control-group"><label for="signin-password">'+jade.escape(null==(jade_interp=_t("Password"))?"":jade_interp)+'</label><div class="controls"><input type="password" title="Your Password" id="signin-password"/></div></div><div><div class="control-group"><div class="controls auth-signin-box"><button type="submit" style="margin-right:10px" class="btn btn-success coursera-signin-button">'+jade.escape(null==(jade_interp=_t("Sign In"))?"":jade_interp)+'</button><button class="btn coursera-signin-button-waiting hide"><img'+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+"/></button><a"+jade.attr("href",resetUrl,!0,!1)+' class="internal-auth">'+(null==(jade_interp=_t("&nbsp;&nbsp;&nbsp;  forgot password?"))?"":jade_interp)+'</a></div></div></div></form></div></div><div style="margin-left:-1px;" class="span5"><div class="auth-no-account-yet">'),allowSignup)buf.push("<h3>"+jade.escape(null==(jade_interp=_t("No Account Yet?"))?"":jade_interp)+"</h3><p><a"+jade.attr("href",signUpUrl,!0,!1)+' class="internal-auth">'+jade.escape(null==(jade_interp=_t("Sign up"))?"":jade_interp)+"</a>"+(null==(jade_interp=_t("&nbsp;today."))?"":jade_interp)+" </p>");if(organization&&organization.logoUrl)buf.push("<img"+jade.attr("src",organization.logoUrl,!0,!1)+"/>");buf.push("</div></div></div></div></div>")}("organization"in locals_for_with?locals_for_with.organization:"undefined"!=typeof organization?organization:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"topicName"in locals_for_with?locals_for_with.topicName:"undefined"!=typeof topicName?topicName:void 0,"userAction"in locals_for_with?locals_for_with.userAction:"undefined"!=typeof userAction?userAction:void 0,"logged_out"in locals_for_with?locals_for_with.logged_out:"undefined"!=typeof logged_out?logged_out:void 0,"email"in locals_for_with?locals_for_with.email:"undefined"!=typeof email?email:void 0,"resetUrl"in locals_for_with?locals_for_with.resetUrl:"undefined"!=typeof resetUrl?resetUrl:void 0,"allowSignup"in locals_for_with?locals_for_with.allowSignup:"undefined"!=typeof allowSignup?allowSignup:void 0,"signUpUrl"in locals_for_with?locals_for_with.signUpUrl:"undefined"!=typeof signUpUrl?signUpUrl:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/auth/account/signInBody.html",["js/lib/jade","i18n!pages/auth/account/nls/signInBody"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.auth.account.signInBody"]=jadify(wndw.jade.helpers)}(window),define("js/lib/util",["jquery","underscore","js/lib/moment","js/lib/cookie","js/core/coursera"],function($,_,moment,cookie,Coursera){function handleAPIError(err,requestUrl){if(404==err)Coursera.router.trigger("error",404,requestUrl,{message:"this page does not exist"});else if(500==err)Coursera.router.trigger("error",500,requestUrl,{message:"backend server has seen an error"});else if(401==err)location.href=Coursera.config.url.accounts+"signin?post_redirect="+page;else if(403==err)Coursera.router.trigger("error",403,requestUrl,{message:"you do not have permission to view this page"})}function handleRedirect(redirect){if(!redirect)return;var parse=/^(?:https?:\/\/)?((?:[\d\w\-]+?\.)?[\w\d-]+(?:\.[\w]+)?)(\/.*|$)/,parts=parse.exec(redirect),host=(parts&&parts.length?parts[1]:"").split("."),hostm=parse.exec(location.host)[1].split(".");if(host&&host.length&&host[host.length-1]==hostm[hostm.length-1]&&host[host.length-2]==hostm[hostm.length-2])location.href=redirect;else if(/^\/.*/.test(redirect))location.href=redirect;else Coursera.router.navigate(Coursera.config.dir.home,!0)}function redirectToAccounts(page){location.href=Coursera.config.url.accounts+page}function createAccountsUrl(page,params){if(void 0!==params){if(void 0!==params.r)params.post_redirect=params.r,delete params.r;var urlParams=$.param(params);return Coursera.config.url.accounts+page+"?"+urlParams.split("+").join("%20")}return Coursera.config.url.accounts+page}function scrollToInternalLink($dom,section){var $target=$dom.find('[data-section="'+section+'"]');if(!$target.length)return;var newTop=$target.position().top,scrollDiff=Math.abs($(document).scrollTop()-newTop);if(scrollDiff>1e3)$("html,body").scrollTop(newTop);else $("html,body").animate({scrollTop:newTop});if(Coursera.multitracker)Coursera.multitracker.push([document.title.split(" |")[0]+" "+section,"Open"])}function setupInternalLinks(view){view.bind("view:appended",function(){scrollToInternalLink(view.$el,this.options.section)}),view.$el.on("click","a.internal-page",function(e){if(!e.ctrlKey&&!e.metaKey){var linkPath=e.currentTarget.pathname,section=linkPath.substr(linkPath.lastIndexOf("/")+1);if(view.$("[data-section="+section+"]").length)e.preventDefault(),scrollToInternalLink(view.$el,section),Coursera.router.navigateTo(linkPath,{trigger:!1})}})}function getToday(){return new Date}function prettyJoin(items){if(items)if(items.length>1)return items.slice(0,-1).join(", ")+" and "+items[items.length-1];else return items.toString()}function addCommas(numberStr){return numberStr.replace(/(^|[^\w.])(\d{4,})/g,function($0,$1,$2){return $1+$2.replace(/\d(?=(?:\d\d\d)+(?!\d))/g,"$&,")})}function makeHttps(url){return url.replace(/^http:\/\//i,"https://")}function getUrlParam(url,name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regexS="[\\?&]"+name+"=([^&#]*)",regex=new RegExp(regexS),results=regex.exec(unescape(url));if(null===results)return null;else return results[1]}function changeUrlParam(uri,key,value){var re=new RegExp("([?&])"+key+"=[^&]*(&|$)","i");if(separator=-1!==uri.indexOf("?")?"&":"?",uri.match(re))return uri.replace(re,"$1"+key+"="+value+"$2");else return uri+separator+key+"="+value}function getUrlPath(url){return(url||"").replace(Coursera.config.url.base,"/")}function setupFormSave($form,xhrOptions,autoSave){function changeButtonText(message){var messageText=$saveButton.attr("data-"+message+"-message");$saveButton.html(messageText)}function resetButton(){var $requiredCheckboxes=$form.find('input[type="checkbox"]').filter("[required]");if($requiredCheckboxes.length&&!$requiredCheckboxes.is(":checked"))return void $saveButton.attr("disabled","disabled");$saveButton.removeAttr("disabled"),changeButtonText("default")}function sendXHR(){lastFormData=$form.serialize();var type=(xhrOptions.type||"POST").toLowerCase();if(Coursera.api[type])Coursera.api[type](xhrOptions.url,{data:xhrOptions.data||$form.serialize()||null,headers:xhrOptions.headers||{},dataType:xhrOptions.dataType||"json"}).done(function(responseJSON,textStatus,xhr){if(xhrOptions.success)xhrOptions.success(responseJSON,textStatus,xhr);changeButtonText("success"),$saveStatus.html("(Saved!)"),renderAllErrors($form,null)}).fail(function(xhr,textStatus,errorThrown){var data=$.parseJSON(xhr.responseText);if(xhrOptions.error)xhrOptions.error(xhr,textStatus,errorThrown);resetButton(),$form.find("input").off(".validate"),renderAllErrors($form,data)})}function triggerSave(){if($form.serialize()!=lastFormData)$saveButton.trigger("click"),$saveStatus.html("(Saving...)")}xhrOptions=xhrOptions||{};var lastFormData=$form.serialize();xhrOptions.url=xhrOptions.url||$form.attr("action"),xhrOptions.type=xhrOptions.type||$form.attr("type");var $saveButton=$form.find('button[type="submit"]'),$saveStatus=$($saveButton.attr("data-update"));$form.find("input, select").on("change",resetButton),$form.find("input, textarea").on("keyup",resetButton);var $allInputs=$form.find("input, select");$allInputs.each(function(ind,elem){if(ind!=$allInputs.length-1)$(elem).on("keypress",function(event){return 13!=event.keyCode})});var shouldValidateForm="true"==$form.attr("data-validate");if(shouldValidateForm)$form.find("input").each(function(){var $field=$(this);if("checkbox"==$field.attr("type"))return;$field.on("keyup.validate",function(){if(!validateField($field))renderFieldErrors($field,null)}),$field.on("blur.validate paste.validate",function(){renderFieldErrors($field,validateField($field))})});if($saveButton.on("click",function(event){if(event.preventDefault(),!shouldValidateForm||shouldValidateForm&&!validateForm($form))changeButtonText("inflight"),$saveButton.attr("disabled","disabled"),sendXHR(xhrOptions)}),autoSave){var triggerSaveD=_.debounce(triggerSave,1e3);$form.find("input, select").on("change.autosave",triggerSaveD),$form.find("input, textarea").on("keyup.autosave",triggerSaveD),$form.find("input, select, blur").on("blur.autosave paste.autosave",triggerSave)}}function validateForm($form){var foundError=null;if($form.find("input").each(function(){var $field=$(this),fieldError=validateField($field);if(renderFieldErrors($field,fieldError),foundError=foundError||fieldError,fieldError&&!foundError&&0===$("input:focus").length)$field.focus()}),foundError){var invalidMessage=$form.attr("data-invalid-message")||"Uh-oh, please check the form!";renderFormError($form,invalidMessage),$form.find('button[type="submit"]').animate({opacity:.4},100).animate({"margin-left":"-=10"},100).animate({"margin-left":"+=20"},100).animate({"margin-left":"-=20"},100).animate({"margin-left":"+=10"},100).animate({opacity:1},100)}return foundError}function validateField($field){var fieldType=$field.attr("type"),fieldValue=$field.val(),fieldPattern=$field.attr("pattern"),error=null,regEx=null;if("email"==fieldType)regEx=new RegExp(/[a-zA-Z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-zA-Z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?/);else if(fieldPattern)regEx=new RegExp(fieldPattern);if(regEx)if(!regEx.test(fieldValue))error=$field.attr("data-invalid-message")||"Invalid field";if($field.attr("required")){if("text"==fieldType&&0===fieldValue.length)error="This field is required.";if("checkbox"==fieldType&&!$field.is(":checked"))error="⬆ Please check this!"}return error}function renderAllErrors($form,data){var $errorsDom;if($form.find(".form-errors").remove(),$form.find(".error .help-inline").remove(),$form.find(".error").removeClass("error"),!data)return;if(data.error_message)renderFormError($form,data.error_message);if(data.field_errors)for(var fieldName in data.field_errors){var $fieldDom=$form.find('*[name="'+fieldName+'"]');renderFieldErrors($fieldDom,data.field_errors[fieldName]),$fieldDom.focus()}}function renderFormError($form,error){if($form.find(".form-errors").remove(),$errorsDom=$("<span></span>").addClass("form-errors").attr("role","alert").attr("aria-live","assertive").html(error),$form.find(".actions").length)$form.find(".actions").children(":last").after($errorsDom);else if($form.find(".modal-footer").length)$form.find(".modal-footer").children(":last").after($errorsDom);else if($form.find('button[type="submit"]'))$form.find('button[type="submit"]').after($errorsDom)}function renderFieldErrors($fieldDom,fieldErrors){var $parentGroup=$fieldDom.parents(".control-mini-group").length&&$fieldDom.parents(".control-mini-group")||$fieldDom.parents(".control-group");if($parentGroup.removeClass("error"),$parentGroup.find(".help-inline.error").remove(),fieldErrors){var errorId=($fieldDom.attr("id")||"")+"-form-field-error-"+(new Date).getTime(),describedBy=($fieldDom.attr("aria-describedby")||"").split(",");if(describedBy.push(errorId),$fieldDom.attr("aria-describedby",describedBy.join(",")),$errorsDom=$("<span></span>").addClass("help-inline error").attr("role","alert").attr("aria-live","assertive").attr("id",errorId),fieldErrors instanceof Array)for(var i=0;i<fieldErrors.length;i++)$errorsDom.append("<span>"+fieldErrors[i]+"</span>");else $errorsDom.append(fieldErrors);if($parentGroup.addClass("error"),"checkbox"==$fieldDom.attr("type"))$parentGroup.find(".controls").append($errorsDom);else $fieldDom.after($errorsDom)}}function isMobileDevice(){var ua=navigator.userAgent||navigator.vendor||window.opera;return/iPhone|iPod|iPad|Android|BlackBerry|Opera Mini|IEMobile/.test(ua)}function isIOS(){var ua=navigator.userAgent||navigator.vendor||window.opera;return/iPhone|iPod|iPad/.test(ua)}function isTouchSupported(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function isCanvasSupported(){var elem=document.createElement("canvas");return!(!elem.getContext||!elem.getContext("2d"))}function getViewportHeight(){var height=window.innerHeight,mode=document.compatMode;if(mode||!$.support.boxModel)height="CSS1Compat"==mode?document.documentElement.clientHeight:document.body.clientHeight;return height}function inView($elem,nearThreshold){nearThreshold=nearThreshold||0;var viewportHeight=getViewportHeight(),scrollTop=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,startRange=scrollTop-nearThreshold,endRange=scrollTop+viewportHeight+nearThreshold,elemTop=$elem.offset().top,elemHeight=$elem.height(),elemBottom=elemTop+elemHeight;return endRange>elemBottom&&elemBottom>startRange}function countCS(courses){var numCS=0,csCats=["cs-programming","cs-systems","cs-theory","cs-ai","cs","fmgb"];return courses.each(function(course){if(course.get("topic")&&_.intersection(course.get("topic").get("category-ids"),csCats).length>0)numCS++}),numCS}function setupPromos(){var $promos=$("[data-promo-id]");$promos.each(function(){var $promo=$(this);if($promo.find(".close").length){var promoId=$promo.attr("data-promo-id");if(cookie.get(promoId))$promo.hide();else $promo.show(),$promo.find(".close").on("click",function(){$promo.hide(),cookie.set(promoId,"closed")})}})}function prettifyTime($dom){var dateTime=moment.unix($dom.attr("datetime"));if(Math.abs(moment().diff(dateTime))<6e4)$dom.text("just now");else $dom.text(dateTime.fromNow());$dom.attr("title",dateTime.format("dddd, MMMM Do YYYY, h:mm a Z"))}function prettifyUrl(url){return url=url.replace(/^.*:\/\//,""),url=url.replace(/\/$/,"")}function extractFirstSubdir(url){var urlRegex=/(.*\/).*\//;return urlRegex.exec(url)[1]}function linkifyText(string){if(string)string=string.replace(/((https?\:\/\/)|(www\.))(\S+)(\w{2,4})(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,function(url){var full_url=url;if(!full_url.match("^https?://"))full_url="http://"+full_url;return'<a target="_blank" href="'+full_url+'">'+url+"</a>"});return string}function rgbToHsl(r,g,b){r/=255,g/=255,b/=255;var max=Math.max(r,g,b),min=Math.min(r,g,b),h,s,l=(max+min)/2;if(max==min)h=s=0;else{var d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return[h,s,l]}function hslToRgb(h,s,l){var r,g,b;if(0===s)r=g=b=l;else{var hue2rgb=function(p,q,t){if(0>t)t+=1;if(t>1)t-=1;if(1/6>t)return p+6*(q-p)*t;if(.5>t)return q;if(2/3>t)return p+(q-p)*(2/3-t)*6;return p},q=.5>l?l*(1+s):l+s-l*s,p=2*l-q;r=hue2rgb(p,q,h+1/3),g=hue2rgb(p,q,h),b=hue2rgb(p,q,h-1/3)}return[Math.round(255*r),Math.round(255*g),Math.round(255*b)]}function rgbToHsv(r,g,b){r/=255,g/=255,b/=255;var max=Math.max(r,g,b),min=Math.min(r,g,b),h,s,v=max,d=max-min;if(s=0===max?0:d/max,max==min)h=0;else{switch(max){case r:h=(g-b)/d+(b>g?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return[h,s,v]}function hsvToRgb(h,s,v){var r,g,b,i=Math.floor(6*h),f=6*h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q}return[Math.round(255*r),Math.round(255*g),Math.round(255*b)]}function sortedGroupBy(list,groupByIter,sortByIter){var groups=_.groupBy(list,groupByIter);return groups=_.sortBy(groups,sortByIter)}function splitIntoGroups(list,nGroups){var groups=[];if(!list)return groups;for(var groupSize=Math.ceil(list.length/nGroups),i=0;i<list.length;i+=groupSize)groups.push(list.slice(i,i+groupSize));return groups}function verticalCenterEl($container,$el){$el.css("position","relative"),$el.css("top",$container.height()/2-$el.height()/2)}function concatName(nameObj){var full_name=nameObj.first_name;if(nameObj.middle_name)full_name=full_name+" "+nameObj.middle_name;if(nameObj.last_name)full_name=full_name+" "+nameObj.last_name;return full_name}function removeDiacritics(str){for(var i=0;i<defaultDiacriticsRemovalMap.length;i++)str=str.replace(defaultDiacriticsRemovalMap[i].letters,defaultDiacriticsRemovalMap[i].base);
return str}function getCourseName(home_link){if(!_.isString(home_link))return null;var regexp=new RegExp("^https://([^.]+)\\.[^.]+\\.org/(.*)$"),match=regexp.exec(home_link);if(null===match)return null;else return{courseDomain:match[1],courseName:match[2]}}function isChina(){var subdomain=window.location.hostname.split(".")[0];return["cn","staging-china"].indexOf(subdomain)>=0}function styleRightToLeft($el){$el.find("[data-user-generated]").attr("dir","auto"),$el.find("[data-user-generated] code").attr("dir","ltr"),$el.find("[data-user-generated] > ol,ul").attr("dir","rtl"),$el.find("[data-user-generated] a,li").wrapInner("<bdi></bdi>")}function makeCheckCertFn(filename){return function(universityShortName){var deferred=$.Deferred();if(universityShortName=universityShortName||"_generic",universityShortName in ST_CERT_CACHE){if(ST_CERT_CACHE[universityShortName])deferred.resolve("https://s3.amazonaws.com/coursera/universities/"+universityShortName+"/"+filename);else deferred.resolve("https://s3.amazonaws.com/coursera/universities/_generic/"+filename);return deferred}var img=new Image;return img.onload=function(){ST_CERT_CACHE[universityShortName]=!0,deferred.resolve("https://s3.amazonaws.com/coursera/universities/"+universityShortName+"/"+filename)},img.onerror=function(){ST_CERT_CACHE[universityShortName]=!1,deferred.resolve("https://s3.amazonaws.com/coursera/universities/_generic/"+filename)},img.src="https://s3.amazonaws.com/coursera/universities/"+universityShortName+"/"+filename,deferred}}var defaultDiacriticsRemovalMap=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],ST_CERT_CACHE={_generic:!0};return{handleAPIError:handleAPIError,handleRedirect:handleRedirect,redirectToAccounts:redirectToAccounts,createAccountsUrl:createAccountsUrl,setupInternalLinks:setupInternalLinks,setupFormSave:setupFormSave,renderAllErrors:renderAllErrors,renderFieldErrors:renderFieldErrors,isMobileDevice:isMobileDevice,isIOS:isIOS,isTouchSupported:isTouchSupported,isCanvasSupported:isCanvasSupported,scrollToInternalLink:scrollToInternalLink,makeHttps:makeHttps,getToday:getToday,prettyJoin:prettyJoin,getUrlParam:getUrlParam,changeUrlParam:changeUrlParam,getUrlPath:getUrlPath,inView:inView,countCS:countCS,setupPromos:setupPromos,prettifyTime:prettifyTime,prettifyUrl:prettifyUrl,addCommas:addCommas,extractFirstSubdir:extractFirstSubdir,linkifyText:linkifyText,rgbToHsl:rgbToHsl,hslToRgb:hslToRgb,rgbToHsv:rgbToHsv,hsvToRgb:hsvToRgb,verticalCenterEl:verticalCenterEl,sortedGroupBy:sortedGroupBy,splitIntoGroups:splitIntoGroups,concatName:concatName,removeDiacritics:removeDiacritics,getCourseName:getCourseName,isChina:isChina,styleRightToLeft:styleRightToLeft,getSTCertCorner:makeCheckCertFn("signature-cert-corner.png"),getSTCertIcon:makeCheckCertFn("signature-cert-icon.png")}}),define("pages/auth/utils",["jquery","underscore","backbone"],function($,_,Backbone){var Utils={createRedirectUrl:function(path,params){var ignoreParams=["logged_out","email"],filteredParams=this.omitKeys(params,ignoreParams),urlParams=$.param(filteredParams);if(0===urlParams.length)return path;else return path+"?"+urlParams.split("+").join("%20")},omitKeys:function(obj,keyNames){var copy={};for(var key in obj)if(!_.contains(keyNames,key))copy[key]=obj[key];return copy}};return Utils}),define("js/lib/placeholder",["jquery"],function($){var c="placeholder",hasNativeSupport=c in document.createElement("input")&&c in document.createElement("textarea");$.fn.placeholder=function(){if(!this.length)return;return this.each(function(){function hideInput(el){el.css({position:"absolute",left:"-9999em",tabindex:-1})}function showInput(el){el.css({position:"",left:""}).removeAttr("tabindex")}function placeholderOnFocus(ev){if(!hasNativeSupport&&e.data("placeholder")){var el=ispassword?fakePassw.get(0):e.get(0);if(el.createTextRange){var range=el.createTextRange();range.moveStart("character",0),range.collapse(),range.select()}else if(el.setSelectionRange)el.setSelectionRange(0,0)}}function invisibleKeyCode(k){return k>-1&&48>k&&32!=k||k>90&&96>k||k>111&&186>k||k>192&&219>k||k>219&&220>k}function placeholderOnKeyDown(ev){if(e.hasClass(c)&&!invisibleKeyCode(ev.which)){if(!hasNativeSupport&&e.data("placeholder"))if(e.val(""),e.data("placeholder",!1),ispassword)hideInput(fakePassw),showInput(e),e.focus();e.removeClass(c)}}function placeholderOnKeyUp(ev){if(!hasNativeSupport&&""===e.attr("value")){if(e.data("placeholder",!0),ispassword)hideInput(e),showInput(fakePassw),fakePassw.focus();else e.addClass(c),e.val(d);if(e.get(0).createTextRange){var range=e.get(0).createTextRange();range.moveStart("character",0),range.collapse(),range.select()}else if(e.get(0).setSelectionRange)e.get(0).setSelectionRange(0,0)}}function placeholderOnBlur(ev){if(""===e.val())if(e.addClass(c),!hasNativeSupport)if(e.data("placeholder",!0),!ispassword)e.val(d);else showInput(fakePassw),hideInput(e)}var e=$(this),d=e.attr("placeholder"),ispassword="password"===e.attr("type"),fakePassw,inputCssClass,size;if(ispassword&&!hasNativeSupport)fakePassw=$("<input>").attr({type:"text",value:d,"class":e.attr("class"),style:e.attr("style")}),e.before(fakePassw),fakePassw.bind("keydown.placeholder",placeholderOnKeyDown),fakePassw.bind("focus.placeholder",placeholderOnFocus);else e.bind("keydown.placeholder",placeholderOnKeyDown);e.data("placeholder",!0),e.bind("blur.placeholder",placeholderOnBlur).trigger("blur.placeholder"),e.bind("focus.placeholder",placeholderOnFocus),e.bind("keyup.placeholder",placeholderOnKeyUp)})};var $val;if(!hasNativeSupport)$val=$.fn.val,$.fn.val=function(value){if(!arguments.length){var input=$(this);return input.data("placeholder")&&input.attr("value")==input.attr("placeholder")?"":$val.call(this)}return $val.call(this,value)}}),define("pages/auth/account/signInBody",["underscore","jquery","pages/auth/template/body","js/core/coursera","js/lib/schema","pages/auth/account/signInBody.html","i18n!pages/auth/account/nls/signInBody","js/lib/util","pages/auth/authConfig","pages/auth/utils","js/lib/placeholder"],function(_,$,body,Coursera,schema,template,_t,utils,authConfig,authUtils){var signIn=body.extend({initialize:function(options){var self=this;this.options=options,document.title="Sign In | Coursera",self.bind("view:appended",function(){self.$el.find("input[placeholder]").placeholder(),self.$el.find("input#signin-email").focus()})},events:{"submit form.coursera-signin-form":"validate"},createSignupUrl:function(organizationData){var signUpUrl=Coursera.config.dir.home+"signup";if(organizationData)signUpUrl=Coursera.config.dir.home+"o/"+organizationData.shortName+"/register";return authUtils.createRedirectUrl(signUpUrl,this.options.params)},createResetUrl:function(organizationData){var resetUrl=Coursera.config.dir.home+"reset";if(organizationData)resetUrl=Coursera.config.dir.home+"o/"+organizationData.shortName+"/reset";return authUtils.createRedirectUrl(resetUrl,this.options.params)},renderPage:function(organizationData){var params=this.options.params,logged_out=params&&params.logged_out?params.logged_out:null,email=params&&params.email?params.email:null,userAction=params&&params.user_action?params.user_action:null,topicName=params&&params.topic_name?params.topic_name:null,allowSignup=!organizationData||"class"==userAction;this.$el.append(template({_t:_t,config:Coursera.config,signUpUrl:this.createSignupUrl(organizationData),logged_out:logged_out,email:email,topicName:topicName,userAction:userAction,allowSignup:allowSignup,organization:organizationData,resetUrl:this.createResetUrl(organizationData)}))},badOrganization:function(){this.renderPage()},render:function(){var organization=this.options.organization;if(organization)Coursera.api.get("org/"+organization).done(_.bind(this.renderPage,this)).fail(_.bind(this.badOrganization,this));else this.renderPage();return this},validate:function(e){var organization=this.options.organization;e.preventDefault(),this.$("#signin-fail").hide();var self=this;self.$email=this.$el.find("input#signin-email"),self.$password=this.$el.find("input#signin-password");var data={email:self.$email.val(),password:self.$password.val(),org:organization,webrequest:!0};self.$(".coursera-signin-button").hide(),self.$(".coursera-signin-button-waiting").show(),Coursera.api.post("login",{data:data}).done(_.bind(this.onLoginSuccess,this)).fail(_.bind(this.onLoginFail,this))},onLoginFail:function(data){this.$(".coursera-reporter-link").show();var self=this;if(this.$(".coursera-reporter-link").show(),403==data.status||401==data.status||409==data.status||400==data.status){if(data.responseText.match("country is prohibited"))self.$("#signin-geo-fail").show();else self.$("#signin-fail").show();self.$(".coursera-signin-button").show(),self.$(".coursera-signin-button-waiting").hide(),self.$("button[type=submit]").animate({opacity:.4},100).animate({"margin-left":"-=10"},100).animate({"margin-left":"+=20"},100).animate({"margin-left":"-=20"},100).animate({"margin-left":"+=10"},100).animate({opacity:1},100),self.$email.focus()}else Coursera.router.trigger("error",data.status||500,location.href,{message:"error signing in"})},onLoginSuccess:function(data){var self=this,params=this.options.params,redirect=params&&params.r?params.r:null;Coursera.multitracker.push(["user.login",data]);var altRedirect=authUtils.createRedirectUrl(authConfig.coursera_url+"account/signedin",this.options.params);if(redirect)Coursera.safeRedirect(redirect,authConfig.coursera_url);else location.href=altRedirect}});return signIn}),define("js/lib/forms",["jquery","underscore","js/lib/schema","js/lib/lucid","js/lib/json2"],function($,_,Schema,Lucid){var defaults={"attribute.prefix":"data-form","attribute.ignore":"ignore","attribute.previous":"prev-value","attribute.schema":"schema","attribute.filter":"filter","attribute.properties":"properties","attribute.required":"required","class.warn":"warn"},getForm=function(el,options){var form=$(el).data("form.me");if(form&&form.constructor===Form.prototype.constructor)if(form)return form.customize(options);else return form;else return null},makeForm=function(el,settings){var $el=$(el),form=getForm($el);if(!form)form=new Form($el,settings),$el.data("form.me",form);return form},validate=function($input,_rules){var rules=_rules||{},rule={},test={},value=$input.val(),id=$input.attr("name")||$input.attr("id"),type=$input.attr("type");if(rules.schema)rule.type=rules.schema;if(rules.filter)rule.filters=_.isString(rules.filter)?(rules.filter||"").split(","):rules.filter;if(rules.required)rule.required=!0;if(rules.properties)rule.properties=_.isString(rules.properties)?JSON.parse(rules.properties):rules.properties;if(rules.schema||rules.filter||rules.required||rules.properties){if(rule.trim=!0,test=Schema.test(value,rule),/^checkbox|radio$/.test(type)&&rule.required&&!$input[0].checked)test.valid=!1;if(!test.valid)if(rules.required||""!==value)throw test.errors.input;else value=null;else if(_.isString(test.data.input)&&value!==test.data.input)value=test.data.input,$input.val(value)}return value},process=function(){var that=this,inputs=this.$form.find(":input"),result={},errors={},valid=!0,pattern=/^([^\[\]]+)(?:\[(.*)\])?$/;return _.each(inputs,function(input){var $input=$(input),type=$input.attr("type"),value=$input.val(),node=$input.prop("nodeName"),id=$input.attr("name")||$input.attr("id"),names=(id||"").split("."),part=result,name=names[0],ignore=$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.ignore"])||/button|submit/.test(type)||/button/i.test(node),schema=$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.schema"])||$input.data(that.options["attribute.prefix"]+"-"+that.options["attribute.schema"]),filter=$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.filter"])||$input.data(that.options["attribute.prefix"]+"-"+that.options["attribute.filter"]),props=$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.properties"])||$input.data(that.options["attribute.prefix"]+"-"+that.options["attribute.properties"]),required=void 0!==$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.required"]);if(!ignore&&(value!==$input.data(that.options["attribute.prefix"]+"-prev-value")||1!==names.length||/\[.*\]/.test(id))){if($input.data(that.options["attribute.prefix"]+"-dirty"))try{value=validate($input,{schema:schema,filter:filter,required:required,properties:props})}catch(e){valid=!1,errors[id]=e}else if(errors[id]=$input.data(that.options["attribute.prefix"]+"-error"),valid)valid=$input.data(that.options["attribute.prefix"]+"-valid");for(var i=0,match=null;i<names.length;i++){var last=i===names.length-1;if(match=names[i].match(pattern),name=match?match[1]:names[i],match){var index=match[2];if(void 0===part[name])if(!last)part[name]=void 0===index?{}:[];else if(void 0===index)part[name]=value;else part[name]=[],part[name][index]=value;if(!last)if(void 0!==index)if(part[name][index])part=part[name][index];else part=part[name][index]={};else part=part[name];else part[name]=value}}}return{data:result,errors:errors}}),{valid:valid,errors:errors,data:result}},prepare=function(){var that=this,inputs=this.$form.find(":input");_.each(inputs,function(input){var $input=$(input);if(!$input.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.ignore"])&&!/button|submit/.test($input.attr("type")))$input.data(that.options["attribute.prefix"]+"-"+that.options["attribure.previous"],$input.val()),$input.data(that.options["attribute.prefix"]+"-dirty",!0)});var validateIt=function(e){that.validate(e.currentTarget)},blurIt=function(e){var $el=$(e.currentTarget);that.emitter.trigger("blur",e,{valid:$el.data(that.options["attribute.prefix"]+"-valid"),error:$el.data(that.options["attribute.prefix"]+"-error")})};this.$form.on("change",":input",validateIt),this.$form.on("blur",":input",blurIt),this.$form.on("keydown cut paste",":input",_.debounce(validateIt,500)),this.$form.on("submit",function(e){that.emitter.trigger("submit",e,process.call(that))})},Form=function(form,_options){var that=this;this.$form=$(form),this.customize(_options),_.bindAll(this,"validate"),prepare.call(this,this.$form),this.emitter=Lucid.emitter(this)};Form.prototype.customize=function(_options){return this.options=_.extend({},defaults,_options||{}),this},Form.prototype.process=function(){return process.call(this)},Form.prototype.validate=function(el){var that=this,$el=$(el),schema=$el.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.schema"])||$el.data(that.options["attribute.prefix"]+"-"+that.options["attribute.schema"]),filter=$el.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.filter"])||$el.data(that.options["attribute.prefix"]+"-"+that.options["attribute.filter"]),props=$el.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.properties"])||$el.data(that.options["attribute.prefix"]+"-"+that.options["attribute.properties"]),required=void 0!==$el.attr(that.options["attribute.prefix"]+"-"+that.options["attribute.required"]),event=$.Event(null,{currentTarget:$el.get(0)});try{if(validate($el,{schema:schema,filter:filter,required:required,properties:props}),$el.hasClass(that.options["class.warn"]))$el.removeClass(that.options["class.warn"]),event.type="forms:corrected",that.emitter.trigger("corrected",event);$el.data(that.options["attribute.prefix"]+"-valid",!0),$el.data(that.options["attribute.prefix"]+"-error",null),event.type="forms:change",that.emitter.trigger("change",event,{valid:!0})}catch(error){if(!$el.hasClass(that.options["class.warn"]))$el.addClass(that.options["class.warn"]),event.type="forms:error",that.emitter.trigger("error",event,error);$el.data(that.options["attribute.prefix"]+"-valid",!1),$el.data(that.options["attribute.prefix"]+"-error",error),event.type="forms:change",that.emitter.trigger("change",event,{valid:!1,error:error})}$el.data(that.options["attribute.prefix"]+"-dirty",!1)};var external=function(){return getForm.apply(null,arguments)||makeForm.apply(this,arguments)};return external}),define("pages/auth/account/nls/signUpBody",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(config,_t,organization,topicName,userAction,resetUrl,signInUrl){if(buf.push('<div class="container"><div class="coursera-full-canvas"><div class="row"><div class="span12"><div class="heading-banner"><a'+jade.attr("href",config.url.www+"about/reporter?area=signin",!0,!1)+' target="_blank" style="display:none;" class="coursera-reporter-link">'+jade.escape(null==(jade_interp=_t("Help"))?"":jade_interp)+"</a>"),organization)buf.push("<h1>"+jade.escape(null==(jade_interp=_t("Sign up for your"))?"":jade_interp)+" <em>"+jade.escape(null==(jade_interp=_t(organization.name))?"":jade_interp)+" </em>"+jade.escape(null==(jade_interp=_t("account:"))?"":jade_interp)+"</h1>");else if(!topicName)buf.push('<h1 style="font-size:31px">'+jade.escape(null==(jade_interp=_t("Sign Up"))?"":jade_interp)+"</h1>");else if("enroll"==userAction)buf.push("<h1>"+jade.escape(null==(jade_interp=_t('Take "#{topicName}"',{topicName:topicName}))?"":jade_interp)+"</h1>");else if("subscribe"==userAction)buf.push("<h1>"+jade.escape(null==(jade_interp=_t('Watch "#{topicName}"',{topicName:topicName}))?"":jade_interp)+"</h1>");if(buf.push('</div></div></div><div class="row"><div class="span9 auth-border-right"><div style="padding-top:20px;padding-right:20px;"><form method="POST" class="coursera-signup form-horizontal"><div id="signup-duplicate" role="alert" class="control-group hide error alert alert-error">'+jade.escape(null==(jade_interp=_t("An account already exists with this email address. Please try again or consider"))?"":jade_interp)+" <a"+jade.attr("href",resetUrl,!0,!1)+' class="internal-home">'+jade.escape(null==(jade_interp=_t("resetting your password"))?"":jade_interp)+'</a>.</div><div id="signup-error" role="alert" class="control-group hide error alert alert-error">'+(null==(jade_interp=_t('Sorry, but we ran into an error trying to process your request. Please try again later or contact <a href="mailto:technical@coursera.org">technical@coursera.org</a> for more help.'))?"":jade_interp)+'</div><div class="control-group"><label for="coursera-signup-fullname" class="control-label">'+jade.escape(null==(jade_interp=_t("Full Name"))?"":jade_interp)+'</label><div class="controls"><input type="text" title="Your full name" id="coursera-signup-fullname" name="name" aria-describedby="coursera-signup-fullname-help" data-form-required="data-form-required" data-form-schema="string+"'+jade.attr("placeholder",_t("Full Name"),!0,!1)+jade.attr("data-form-error",_t("Please enter a real name"),!0,!1)+jade.attr("data-form-correct",_t("Nice to meet you!"),!0,!1)+'/><span id="coursera-signup-fullname-help" tabindex="-1" class="help-inline">'+jade.escape(null==(jade_interp=_t("Please use your real name"))?"":jade_interp)+'</span></div></div><div class="control-group"><label for="coursera-signup-email" class="control-label">'+jade.escape(null==(jade_interp=_t("Email Address"))?"":jade_interp)+'</label><div class="controls"><input type="email" title="Your email address" id="coursera-signup-email" name="email" required="required" aria-required="true"'+jade.attr("data-form-error",_t("This doesnt look like a valid email"),!0,!1)+' aria-describedby="coursera-signup-email-help,coursera-signup-email-error" data-form-required="data-form-required" data-form-schema="email"'+jade.attr("data-form-correct",_t("Looks good! We'll send you a welcome email."),!0,!1)+jade.attr("placeholder",_t("Email Address"),!0,!1)+' data-allow-email-suggestions="data-allow-email-suggestions"/><span id="coursera-signup-email-help" tabindex="-1" class="hide help-inline"></span></div></div><div class="control-group"><label for="coursera-signup-email-confirm" class="control-label">'+jade.escape(null==(jade_interp=_t("Confirm Email"))?"":jade_interp)+'</label><div class="controls"><input type="email" title="Confirm your email" id="coursera-signup-email-confirm" name="verifyEmail" required="required" aria-required="true"'+jade.attr("data-form-error",_t("This doesn't match the above email."),!0,!1)+jade.attr("data-form-correct",_t("Looks good!"),!0,!1)+' data-form-required="data-form-required" aria-describedby="coursera-signup-email-confirm-help,coursera-signup-email-error"'+jade.attr("placeholder",_t("Confirm Email"),!0,!1)+'/><span id="coursera-signup-email-confirm-help" tabindex="-1" class="hide help-inline"></span></div></div><div class="control-group"><label for="coursera-signup-password" class="control-label">'+jade.escape(null==(jade_interp=_t("Password"))?"":jade_interp)+'</label><div class="controls"><input type="password" title="Create a new password" id="coursera-signup-password" pattern=".{4,}" name="password" required="required" aria-required="true" data-form-required="data-form-required" data-form-properties="{&quot;min&quot;:4}"'+jade.attr("data-form-error",_t("Use a stronger password please!"),!0,!1)+jade.attr("data-form-correct",_t("Thanks. Don't forget it"),!0,!1)+' aria-describedby="coursera-signup-password-help,coursera-signup-password-error"'+jade.attr("placeholder",_t("Password"),!0,!1)+'/><span id="coursera-signup-password-help" tabindex="-1" class="hide help-inline"></span></div></div><div style="margin-top:-10px;" class="control-group"><label for="coursera-signup-agree" class="hidden-label control-label">'+jade.escape(null==(jade_interp=_t("Terms of Service"))?"":jade_interp)+'</label><div class="controls"><label class="checkbox"><input type="checkbox" name="agree" id="coursera-signup-agree" required="required" aria-required="true" aria-describedby="coursera-signup-terms-help" data-form-required="data-form-required"'+jade.attr("data-form-error",_t("Please agree to our Terms and the Honor Code"),!0,!1)+' value="1"/>'+(null==(jade_interp=_t("I agree to the&nbsp;"))?"":jade_interp)+"<a"+jade.attr("href",config.url.www+"about/terms",!0,!1)+' target="tab1">'+jade.escape(null==(jade_interp=_t("Terms of Service"))?"":jade_interp)+"</a>"+(null==(jade_interp=_t("&nbsp;and"))?"":jade_interp)+" <a"+jade.attr("href",config.url.www+"about/terms/honorcode",!0,!1)+' target="tab2">'+jade.escape(null==(jade_interp=_t("Honor Code"))?"":jade_interp)+'</a></label><span id="coursera-signup-terms-help" role="alert" tabindex="-1" class="hide help-inline"></span></div></div><div style="margin-top:15px;" class="control-group"><div class="controls auth-signup-box"><button type="submit" disabled="disabled" class="btn btn-success coursera-signup-button">'+jade.escape(null==(jade_interp=_t("Sign Up"))?"":jade_interp)+'</button><button disabled="disabled" class="btn coursera-signup-button-waiting hide"><img'+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+'/></button></div></div></form></div></div><div style="margin-left:-1px;" class="span3"><div class="auth-already-have-account">'),organization&&organization.logoUrl)buf.push("<img"+jade.attr("src",organization.logoUrl,!0,!1)+"/>");buf.push("<h3>"+jade.escape(null==(jade_interp=_t("Have an Account?"))?"":jade_interp)+"</h3><p> \n"+jade.escape(null==(jade_interp=_t("If you already have a password, please"))?"":jade_interp)+"<a"+jade.attr("href",signInUrl,!0,!1)+' class="internal-auth"> '+jade.escape(null==(jade_interp=_t("sign in"))?"":jade_interp)+"</a>.</p></div></div></div></div></div>")}("config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"organization"in locals_for_with?locals_for_with.organization:"undefined"!=typeof organization?organization:void 0,"topicName"in locals_for_with?locals_for_with.topicName:"undefined"!=typeof topicName?topicName:void 0,"userAction"in locals_for_with?locals_for_with.userAction:"undefined"!=typeof userAction?userAction:void 0,"resetUrl"in locals_for_with?locals_for_with.resetUrl:"undefined"!=typeof resetUrl?resetUrl:void 0,"signInUrl"in locals_for_with?locals_for_with.signInUrl:"undefined"!=typeof signInUrl?signInUrl:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/auth/account/signUpBody.html",["js/lib/jade","i18n!pages/auth/account/nls/signUpBody"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.auth.account.signUpBody"]=jadify(wndw.jade.helpers)}(window),define("js/lib/mailcheck",[],function(){var Mailcheck={threshold:3,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","outlook.com"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],run:function(opts){opts.domains=opts.domains||this.defaultDomains,opts.topLevelDomains=opts.topLevelDomains||this.defaultTopLevelDomains,opts.distanceFunction=opts.distanceFunction||Kicksend.sift3Distance;
var result=this.suggest(encodeURI(opts.email),opts.domains,opts.topLevelDomains,opts.distanceFunction);if(result){if(opts.suggested)opts.suggested(result)}else if(opts.empty)opts.empty()},suggest:function(email,domains,topLevelDomains,distanceFunction){email=email.toLowerCase();var emailParts=this.splitEmail(email),closestDomain=this.findClosestDomain(emailParts.domain,domains,distanceFunction);if(closestDomain){if(closestDomain!=emailParts.domain)return{address:emailParts.address,domain:closestDomain,full:emailParts.address+"@"+closestDomain}}else{var closestTopLevelDomain=this.findClosestDomain(emailParts.topLevelDomain,topLevelDomains);if(emailParts.domain&&closestTopLevelDomain&&closestTopLevelDomain!=emailParts.topLevelDomain){var domain=emailParts.domain;return closestDomain=domain.substring(0,domain.lastIndexOf(emailParts.topLevelDomain))+closestTopLevelDomain,{address:emailParts.address,domain:closestDomain,full:emailParts.address+"@"+closestDomain}}}return!1},findClosestDomain:function(domain,domains,distanceFunction){var dist,minDist=99,closestDomain=null;if(!domain||!domains)return!1;if(!distanceFunction)distanceFunction=this.sift3Distance;for(var i=0;i<domains.length;i++){if(domain===domains[i])return domain;if(dist=distanceFunction(domain,domains[i]),minDist>dist)minDist=dist,closestDomain=domains[i]}if(minDist<=this.threshold&&null!==closestDomain)return closestDomain;else return!1},sift3Distance:function(s1,s2){if(null==s1||0===s1.length)if(null==s2||0===s2.length)return 0;else return s2.length;if(null==s2||0===s2.length)return s1.length;for(var c=0,offset1=0,offset2=0,lcs=0,maxOffset=5;c+offset1<s1.length&&c+offset2<s2.length;){if(s1.charAt(c+offset1)==s2.charAt(c+offset2))lcs++;else{offset1=0,offset2=0;for(var i=0;maxOffset>i;i++){if(c+i<s1.length&&s1.charAt(c+i)==s2.charAt(c)){offset1=i;break}if(c+i<s2.length&&s1.charAt(c)==s2.charAt(c+i)){offset2=i;break}}}c++}return(s1.length+s2.length)/2-lcs},splitEmail:function(email){var parts=email.split("@");if(parts.length<2)return!1;for(var i=0;i<parts.length;i++)if(""===parts[i])return!1;var domain=parts.pop(),domainParts=domain.split("."),tld="";if(0===domainParts.length)return!1;else if(1==domainParts.length)tld=domainParts[0];else{for(var j=1;j<domainParts.length;j++)tld+=domainParts[j]+".";if(domainParts.length>=2)tld=tld.substring(0,tld.length-1)}return{topLevelDomain:tld,domain:domain,address:parts.join("@")}}};return Mailcheck}),function(wndw){var sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(message){this.toString=function(){return"CORRUPT: "+this.message},this.message=message},invalid:function(message){this.toString=function(){return"INVALID: "+this.message},this.message=message},bug:function(message){this.toString=function(){return"BUG: "+this.message},this.message=message},notReady:function(message){this.toString=function(){return"NOT READY: "+this.message},this.message=message}}};if("function"==typeof define&&define.amd)define("js/lib/sjcl",[],function(){return sjcl});else wndw.sjcl=sjcl}(window),function(wndw){var addBitArray=function(sjcl){sjcl.bitArray={bitSlice:function(a,bstart,bend){return a=sjcl.bitArray._shiftRight(a.slice(bstart/32),32-(31&bstart)).slice(1),void 0===bend?a:sjcl.bitArray.clamp(a,bend-bstart)},extract:function(a,bstart,blength){var x,sh=Math.floor(-bstart-blength&31);if(-32&(bstart+blength-1^bstart))x=a[bstart/32|0]<<32-sh^a[bstart/32+1|0]>>>sh;else x=a[bstart/32|0]>>>sh;return x&(1<<blength)-1},concat:function(a1,a2){if(0===a1.length||0===a2.length)return a1.concat(a2);var out,i,last=a1[a1.length-1],shift=sjcl.bitArray.getPartial(last);if(32===shift)return a1.concat(a2);else return sjcl.bitArray._shiftRight(a2,shift,0|last,a1.slice(0,a1.length-1))},bitLength:function(a){var l=a.length,x;if(0===l)return 0;return x=a[l-1],32*(l-1)+sjcl.bitArray.getPartial(x)},clamp:function(a,len){if(32*a.length<len)return a;a=a.slice(0,Math.ceil(len/32));var l=a.length;if(len=31&len,l>0&&len)a[l-1]=sjcl.bitArray.partial(len,a[l-1]&2147483648>>len-1,1);return a},partial:function(len,x,_end){if(32===len)return x;return(_end?0|x:x<<32-len)+1099511627776*len},getPartial:function(x){return Math.round(x/1099511627776)||32},equal:function(a,b){if(sjcl.bitArray.bitLength(a)!==sjcl.bitArray.bitLength(b))return!1;var x=0,i;for(i=0;i<a.length;i++)x|=a[i]^b[i];return 0===x},_shiftRight:function(a,shift,carry,out){var i,last2=0,shift2;if(void 0===out)out=[];for(;shift>=32;shift-=32)out.push(carry),carry=0;if(0===shift)return out.concat(a);for(i=0;i<a.length;i++)out.push(carry|a[i]>>>shift),carry=a[i]<<32-shift;return last2=a.length?a[a.length-1]:0,shift2=sjcl.bitArray.getPartial(last2),out.push(sjcl.bitArray.partial(shift+shift2&31,shift+shift2>32?carry:out.pop(),1)),out},_xor4:function(x,y){return[x[0]^y[0],x[1]^y[1],x[2]^y[2],x[3]^y[3]]}}};if("function"==typeof define&&define.amd)define("js/lib/sjcl-bitArray",["js/lib/sjcl"],function(sjcl){addBitArray(sjcl)});else addBitArray(wndw.sjcl)}(window),function(wndw){var addCodecHex=function(sjcl){sjcl.codec.hex={fromBits:function(arr){var out="",i,x;for(i=0;i<arr.length;i++)out+=((0|arr[i])+0xf00000000000).toString(16).substr(4);return out.substr(0,sjcl.bitArray.bitLength(arr)/4)},toBits:function(str){var i,out=[],len;for(str=str.replace(/\s|0x/g,""),len=str.length,str+="00000000",i=0;i<str.length;i+=8)out.push(0^parseInt(str.substr(i,8),16));return sjcl.bitArray.clamp(out,4*len)}}};if("function"==typeof define&&define.amd)define("js/lib/sjcl-codecHex",["js/lib/sjcl"],function(sjcl){return addCodecHex(sjcl)});else addCodecHex(wndw.sjcl)}(window),function(wndw){var addCodecString=function(sjcl){sjcl.codec.utf8String={fromBits:function(arr){var out="",bl=sjcl.bitArray.bitLength(arr),i,tmp;for(i=0;bl/8>i;i++){if(0===(3&i))tmp=arr[i/4];out+=String.fromCharCode(tmp>>>24),tmp<<=8}return decodeURIComponent(escape(out))},toBits:function(str){str=unescape(encodeURIComponent(str));var out=[],i,tmp=0;for(i=0;i<str.length;i++)if(tmp=tmp<<8|str.charCodeAt(i),3===(3&i))out.push(tmp),tmp=0;if(3&i)out.push(sjcl.bitArray.partial(8*(3&i),tmp));return out}}};if("function"==typeof define&&define.amd)define("js/lib/sjcl-codecString",["js/lib/sjcl","js/lib/sjcl-bitArray"],function(sjcl,bitArray){addCodecString(sjcl)});else addCodecString(wndw.sjcl)}(window),function(wndw){var addSHA1=function(sjcl){sjcl.hash.sha1=function(hash){if(hash)this._h=hash._h.slice(0),this._buffer=hash._buffer.slice(0),this._length=hash._length;else this.reset()},sjcl.hash.sha1.hash=function(data){return(new sjcl.hash.sha1).update(data).finalize()},sjcl.hash.sha1.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(data){if("string"==typeof data)data=sjcl.codec.utf8String.toBits(data);var i,b=this._buffer=sjcl.bitArray.concat(this._buffer,data),ol=this._length,nl=this._length=ol+sjcl.bitArray.bitLength(data);for(i=this.blockSize+ol&-this.blockSize;nl>=i;i+=this.blockSize)this._block(b.splice(0,16));return this},finalize:function(){var i,b=this._buffer,h=this._h;for(b=sjcl.bitArray.concat(b,[sjcl.bitArray.partial(1,1)]),i=b.length+2;15&i;i++)b.push(0);for(b.push(Math.floor(this._length/4294967296)),b.push(0|this._length);b.length;)this._block(b.splice(0,16));return this.reset(),h},_init:[1732584193,4023233417,2562383102,271733878,3285377520],_key:[1518500249,1859775393,2400959708,3395469782],_f:function(t,b,c,d){if(19>=t)return b&c|~b&d;else if(39>=t)return b^c^d;else if(59>=t)return b&c|b&d|c&d;else if(79>=t)return b^c^d},_S:function(n,x){return x<<n|x>>>32-n},_block:function(words){var t,tmp,a,b,c,d,e,w=words.slice(0),h=this._h,k=this._key;for(a=h[0],b=h[1],c=h[2],d=h[3],e=h[4],t=0;79>=t;t++){if(t>=16)w[t]=this._S(1,w[t-3]^w[t-8]^w[t-14]^w[t-16]);tmp=this._S(5,a)+this._f(t,b,c,d)+e+w[t]+this._key[Math.floor(t/20)]|0,e=d,d=c,c=this._S(30,b),b=a,a=tmp}h[0]=h[0]+a|0,h[1]=h[1]+b|0,h[2]=h[2]+c|0,h[3]=h[3]+d|0,h[4]=h[4]+e|0}}};if("function"==typeof define&&define.amd)define("js/lib/sjcl-sha1",["js/lib/sjcl","js/lib/sjcl-codecString","js/lib/sjcl-bitArray"],function(sjcl,codecString,bitArray){addSHA1(sjcl)});else addSHA1(wndw.sjcl)}(window),function(wndw){var Experiments={},ExperimentInstances={},ABCingletons=null,MAX_SYNC_TIME=3e3,sendConversionEvents=function(experimentNames,attribute,$convert,callback){var after;if(callback){var max_sync_time=parseInt($convert.attr(attribute+"-convert-time")||MAX_SYNC_TIME,10);if(max_sync_time>0)setTimeout(callback,max_sync_time);after=_.after(experimentNames.length,callback)}_.each(experimentNames,function(experimentName){var types=_.keys(ABCingletons),called=!1;if(_.each(types,function(type){var experiment=ABCingletons[type].getExperiment(experimentName);if(experiment)experiment.convert($convert.attr(attribute+"-convert"),after),called=!0}),!called&&after)after()})},extractExperimentNames=function($convert,attribute){var experimentNames=$convert.attr(attribute)||"";return experimentNames.split(",")},convertIfNotAlready=function($convert,attribute){var activeAttr=attribute+"-convert-for-sync-active",converted=$convert.data(activeAttr)===!0;if(!converted)$convert.data(activeAttr,!0);return converted},AB=function($,_,Log,Cookie,sjcl){var _private={listenForConversion:function(attribute){$("body").on("click.ab","["+attribute+"-convert-for]",function(){var $convert=$(this),experimentNames=extractExperimentNames($convert,attribute+"-convert-for");sendConversionEvents(experimentNames,attribute,$convert)}),$("body").on("submit.ab","form["+attribute+"-convert-for-sync]",function(e){var $convert=$(this);if(!convertIfNotAlready($convert,attribute)){e.preventDefault();var experimentNames=extractExperimentNames($convert,attribute+"-convert-for-sync"),goto=function(){$convert.submit()};sendConversionEvents(experimentNames,attribute,$convert,goto)}}),$("body").on("click.ab","a["+attribute+"-convert-for-sync]",function(e){var $convert=$(this);if(!convertIfNotAlready($convert,attribute)){e.preventDefault();var experimentNames=extractExperimentNames($convert,attribute+"-convert-for-sync"),href=$convert.attr("href");if(href){var goto=function(){window.location.href=href};sendConversionEvents(experimentNames,attribute,$convert,goto)}}})},chooseVariant:function(){var that=this;if(!that.valid)return null;if(that.options.debug){var overrideString="ab-"+that.type+"-"+that.name+"-override",chosen=Cookie.get(overrideString)||$(wndw.document).find("body").attr("data-"+overrideString);if(null!=chosen){var variant=_.find(that.options.variants,function(variant){return variant.name==chosen});if(variant)return variant;else that.options.logger.error("Invalid variant: "+chosen)}}var key=that.id+"_"+that.name,digest=sjcl.codec.hex.fromBits(sjcl.hash.sha1.hash(key)),hashValue=parseInt(digest.substr(digest.length-8),16),maxHashValue=Math.pow(2,32),totalWeight=0,i;for(i=0;i<that.weights.length;i++)totalWeight+=that.weights[i];var targetWeight=hashValue/maxHashValue*totalWeight;for(i=0;i<that.weights.length;i++)if(targetWeight-=that.weights[i],0>targetWeight)return that.options.variants[i];return that.options.variants[that.weights.length-1]}},module=function(id,type,_options){for(var that=this,options=_options||{},parts=location.host.split(".");parts.length>2;)parts.shift();this.id=id,this.type=type,this.options={},this.options.domain=options.domain||"."+parts.join("."),this.options.logger=options.logger||Log({level:"error"}),this.options.tracker=options.tracker||[],this.options.debug=options.debug||!1,this.options.attribute="data-ab-"+this.type,this.experiments={},Experiments[this.type]={},ExperimentInstances[this.type]={}};module.prototype.setId=function(id){if(!this.id)this.id=id;else if(this.id!==id)this.options.logger.error("can't change an existing id, create new AB test instead")},module.prototype.addExperiment=function(name,options){if(!Experiments[this.type][name])if(options&&options.variants){var variants=_.filter(options.variants,function(option){return option.baseline}),weights=_.reduce(_.pluck(options.variants,"weight"),function(memo,num){return memo+num},0);if(variants&&1==variants.length&&1==weights.toFixed(10))Experiments[this.type][name]=options;else if(variants.length>1)this.options.logger.error("experiment "+name+" contains more than one baseline variants");else if(1>weights)this.options.logger.error("experiment "+name+" contains variants that don't sum to 1.0");else this.options.logger.error("experiment "+name+" has no baseline variant")}else this.options.logger.error("experiment "+name+" has no variants");else this.options.logger.error("experiment "+name+" already exists")},module.prototype.addExperiments=function(experiments){var that=this,keys=_.keys(experiments);_.each(keys,function(name){that.addExperiment(name,experiments[name])})},module.prototype.getExperiment=function(name){if(Experiments[this.type][name]){if(!ExperimentInstances[this.type][name]){var options=Experiments[this.type][name];ExperimentInstances[this.type][name]=new Experiment(this.id,name,{type:this.type,variants:Experiments[this.type][name].variants,logger:this.options.logger,debug:this.options.debug,tracker:this.options.tracker,domain:this.options.domain})}return ExperimentInstances[this.type][name]}else return null},module.prototype.runExperimentsOn=function(dom){var that=this,$variants=$(dom).find("["+this.options.attribute+"-variant-for]");$variants.hide();var experimentNames=[];$variants.each(function(){$variant=$(this),experimentNames.push($variant.attr(that.options.attribute+"-variant-for"))}),experimentNames=_.uniq(experimentNames),_.each(experimentNames,function(experimentName){var experiment=that.getExperiment(experimentName);if(experiment){var chosen=experiment.getChosenVariant(),$chosen=$variants.filter("["+that.options.attribute+"-variant-for="+experimentName+"]").filter("["+that.options.attribute+"-variant="+chosen+"]");if($chosen.size())$chosen.show();else that.options.logger.error("variants "+chosen+" for "+that.type+" experiment "+experimentName+" not found in the dom")}else that.options.logger.error(that.type+" experiment "+experimentName+" found on page but not added yet")})};var Experiment=function(id,name,options){var self=this;if(self.id=id,self.options=options,self.name=name,self.type=self.options.type,self.weights=_.pluck(self.options.variants,"weight"),self.valid=self.sanityCheck(name,self.weights),self.valid)self.options.logger.info("Created experiment ["+name+"] with "+self.options.variants.length+" variants.");else self.options.logger.info("Error in experiment ["+name+"]; resorting to fail-safe.")};Experiment.prototype.sanityCheck=function(name,weights){var self=this,i;if("string"!=typeof name)return self.options.logger.error("name should be a string!"),!1;if("ab-"==name.substr(0,3))return self.options.logger.error('name should not begin with "ab-"!'),!1;if(!$.isArray(weights))return self.options.logger.error("weights should be an array!"),!1;else for(i=0;i<weights.length;i++)if(weights[i]<0)return self.options.logger.error("All weights must be non-negative!"),!1;return!0},Experiment.prototype.getChosenVariant=function(){var that=this,experimentName=that.name,memory=Cookie.get("ab-experiments-"+that.type)||"";if(-1==memory.indexOf(experimentName)){if(memory.length>0)memory=memory+","+experimentName;else memory=experimentName;Cookie.clear("ab-experiments-"+that.type),Cookie.set("ab-experiments-"+that.type,memory,{expires:365,domain:that.options.domain})}if(_.isUndefined(this.chosen))if(this.chosen=_private.chooseVariant.call(this),this.valid){var variant_detail=this.chosen.baseline?this.chosen.name+",baseline":this.chosen.name;this.options.tracker.push(["ab.show",this.type+","+this.name+","+variant_detail+":"+this.id])}else this.options.tracker.push(["ab.fail",this.type+","+this.name+":"+this.id]);return this.chosen.name},Experiment.prototype.convert=function(value,callback){var experimentNames=(Cookie.get("ab-experiments-"+this.type)||"").split(",");if(experimentNames&&-1!=experimentNames.indexOf(this.name)&&this.valid){if(_.isUndefined(this.chosen))this.chosen=_private.chooseVariant.call(this);var variant_detail=this.chosen.baseline?this.chosen.name+",baseline":this.chosen.name;if(_.isUndefined(value))value="default";var data=["ab.convert",this.type+","+this.name+","+variant_detail+","+value+":"+this.id];if(callback)data.push(callback);this.options.tracker.push(data)}else if(callback)callback()};var external=function(id,type,options){if(!ABCingletons)ABCingletons={};if(!ABCingletons[type]){var ab=ABCingletons[type]=new module(id,type,options);return _private.listenForConversion(ab.options.attribute),ab}else return ABCingletons[type].setId(id),ABCingletons[type]};return external.makeSession=function(name,options){var sessionId=Cookie.get(name);if(!sessionId)sessionId=(1e10*Math.random()).toFixed()+"-"+(new Date).getTime(),Cookie.set(name,sessionId,options||{expires:14,domain:options.domain});return sessionId},external};if("function"==typeof define&&define.amd)define("js/lib/ab",["jquery","underscore","js/lib/log","js/lib/cookie","js/lib/sjcl","js/lib/sjcl-bitArray","js/lib/sjcl-codecHex","js/lib/sjcl-codecString","js/lib/sjcl-sha1","js/lib/json2"],function($,_,Log,Cookie,sjcl,bitArray,codecHex,codecString,sha1){return AB($,_,Log,Cookie,sjcl)});else wndw.AB=AB(wndw.$,wndw._,wndw.Log,wndw.Cookie,wndw.sjcl)}(window),!function(){var experiments={session:{homepage_hardcode_data_science_specialization:{variants:[{name:"no",baseline:!0,weight:.1},{name:"yes",weight:.9}]},homepage_user_count:{variants:[{name:"show",baseline:!0,weight:.5},{name:"hide",weight:.5}]},coursepage_compress_language:{variants:[{name:"10px",weight:.5,baseline:!0},{name:"0px",weight:.5}]},coursepage_catalog_link:{variants:[{name:"no_arrow",weight:.5,baseline:!0},{name:"arrow",weight:.5}]},sigtrack_price_display_anchor:{variants:[{name:"no_display",weight:.3,baseline:!0},{name:"display",weight:.3},{name:"display_alot",weight:.4}]},sigtrack_checkout_button:{variants:[{name:"join",weight:.75,baseline:!0},{name:"checkout",weight:.25}]},specializations_list_subheader:{variants:[{name:"master",weight:.2,baseline:!0},{name:"focused",weight:.2},{name:"cert",weight:.2},{name:"further",weight:.2},{name:"leap",weight:.2}]},specializations_landing_swap:{variants:[{name:"base",weight:.5,baseline:!0},{name:"swap",weight:.5}]},sigtrack_student_stories:{variants:[{name:"disabled",weight:.33,baseline:!0},{name:"enabled",weight:.33},{name:"enabled-nexttocard",weight:.34}]},sigtrack_demonstrated_uses2:{variants:[{name:"base",weight:.071,baseline:!0},{name:"show-qualifications",weight:.071},{name:"further-qualifications",weight:.071},{name:"list-resume",weight:.071},{name:"list-cv",weight:.071},{name:"add-linkedin",weight:.071},{name:"official-rec",weight:.071},{name:"rec-achievement",weight:.071},{name:"link-identity",weight:.072},{name:"commitment-complete",weight:.072},{name:"share-certificate",weight:.072},{name:"share-records",weight:.072},{name:"advance-career",weight:.072},{name:"present-employer",weight:.072}]},specializations_subhead_field:{variants:[{name:"base",weight:.5,baseline:!0},{name:"learn-capstone",weight:.5}]},sigtrack_course_page_button:{variants:[{name:"right-side-col",weight:.5,baseline:!0},{name:"left-main-col",weight:.5}]},specializations_landing_detail:{variants:[{name:"base",weight:.2,baseline:!0},{name:"logo-image",weight:.2},{name:"instructors-images",weight:.2},{name:"context-text",weight:.2},{name:"school-cover-image",weight:.2}]},specializations_nielsen2:{variants:[{name:"base",weight:.34,baseline:!0},{name:"endorsement-basic",weight:.33},{name:"endorsement-employees",weight:.33}]},no_welcome_page:{variants:[{name:"welcome",weight:.34,baseline:!0},{name:"no-welcome",weight:.33},{name:"combined",weight:.33}]}},user:{in_class_qqs:{variants:[{name:"no_qqs",weight:.1,baseline:!0},{name:"time_1",weight:.03},{name:"time_2",weight:.03},{name:"time_3",weight:.03},{name:"time_4",weight:.03},{name:"time_5",weight:.03},{name:"time_6",weight:.03},{name:"time_7",weight:.03},{name:"time_8",weight:.03},{name:"time_9",weight:.03},{name:"time_10",weight:.03},{name:"time_11",weight:.03},{name:"time_12",weight:.03},{name:"time_13",weight:.03},{name:"time_14",weight:.03},{name:"time_15",weight:.03},{name:"time_16",weight:.03},{name:"time_17",weight:.03},{name:"time_18",weight:.03},{name:"time_19",weight:.03},{name:"time_20",weight:.03},{name:"time_21",weight:.03},{name:"time_22",weight:.03},{name:"time_23",weight:.03},{name:"time_24",weight:.03},{name:"time_25",weight:.03},{name:"time_26",weight:.03},{name:"time_27",weight:.03},{name:"time_28",weight:.03},{name:"time_29",weight:.03},{name:"time_30",weight:.03}]},in_class_qqs_skip:{variants:[{name:"yes_skip",weight:.5,baseline:!0},{name:"no_skip",weight:.5}]},in_class_qqs_feedback:{variants:[{name:"yes_feedback",weight:.5,baseline:!0},{name:"no_feedback",weight:.5}]},in_class_qqs_callout:{variants:[{name:"no_callout",weight:.5,baseline:!0},{name:"yes_callout",weight:.5}]},upcoming_window_leading2:{variants:[{name:"0",weight:.25,baseline:!0},{name:"7",weight:.25},{name:"14",weight:.25},{name:"21",weight:.25}]},upcoming_window_trailing2:{variants:[{name:"7",weight:.25,baseline:!0},{name:"14",weight:.25},{name:"21",weight:.25},{name:"28",weight:.25}]},honorcode_to_welcome2:{variants:[{name:"baseline",weight:.25,baseline:!0},{name:"no_welcome",weight:.25},{name:"no_intent",weight:.25},{name:"optional_intent",weight:.25}]},sigtrack_show_cert_name:{variants:[{name:"baseline",weight:.5,baseline:!0},{name:"show",weight:.5}]},specializations_list_subheader:{variants:[{name:"master",weight:.2,baseline:!0},{name:"focused",weight:.2},{name:"cert",weight:.2},{name:"further",weight:.2},{name:"leap",weight:.2}]},st_userprofile_after_payment:{variants:[{name:"baseline",weight:.4,baseline:!0},{name:"show_after",weight:.6}]},localized_prices2:{variants:[{name:"usd",weight:.5,baseline:!0},{name:"localized",weight:.5}]},painted_door_alipay2:{variants:[{name:"dont_show_alipay",weight:.5,baseline:!0},{name:"show_alipay",weight:.5}]},course_page_skills:{variants:[{name:"baseline",weight:.5,baseline:!0},{name:"showskills",weight:.5}]},records_page_eoc_stories_dropdown:{variants:[{name:"dont_show_dropdown",weight:.95,baseline:!0},{name:"show_dropdown",weight:.05}]}}};if("function"==typeof define&&define.amd)define("js/json/experiments.ab",[],function(){return experiments});else window.CourseraABExperiments=experiments}(),function(global){var module=function(AB,Coursera,Cookie,experiments,UserJSON){var init=function(){for(var parts=location.host.split(".");parts.length>2;)parts.shift();var domain="."+parts.join("."),_204SessionId=Cookie.get("__204u"),sessionId=AB.makeSession("__204u",{expires:365,domain:domain});if(!_204SessionId)Cookie.set("__204u",sessionId,{expires:365,domain:domain});var ab={user:null,session:null};if(ab.session=AB(sessionId,"session",{debug:!0,tracker:Coursera.multitracker,logger:Coursera.log,domain:domain}),experiments.session)ab.session.addExperiments(experiments.session);if(ab.user=AB(null,"user",{debug:!0,tracker:Coursera.multitracker,logger:Coursera.log,domain:domain}),experiments.user)ab.user.addExperiments(experiments.user);return ab};return init()};if("function"==typeof define&&define.amd)define("js/lib/coursera.ab",["js/lib/ab","js/core/coursera","js/lib/cookie","js/json/experiments.ab"],function(AB,Coursera,Cookie,experiments){return module(AB,Coursera,Cookie,experiments)});else;}(window),define("pages/auth/account/signUpBody",["pages/auth/template/body","underscore","js/core/coursera","js/lib/forms","pages/auth/account/signUpBody.html","i18n!pages/auth/account/nls/signUpBody","jquery","js/lib/mailcheck","js/lib/util","js/lib/coursera.ab","pages/auth/utils","pages/auth/authConfig"],function(body,_,Coursera,Form,template,_t,$,mailcheck,util,AB,authUtils,authConfig){var signUp=body.extend({initialize:function(options){var that=this;this.options=options||{},document.title="Sign Up | Coursera",this.bind("view:appended",function(){that.$form=that.$("form.coursera-signup"),that.$("input[placeholder]").placeholder(),that.$form.find("input:first").focus()})},events:{"click .coursera-signup-email-suggestion-link":"acceptEmailSuggestion"},createSigninUrl:function(organizationData){var signInUrl=Coursera.config.dir.home+"signin";if(organizationData)signInUrl="/o/"+organizationData.shortName;return authUtils.createRedirectUrl(signInUrl,this.options.params)},createResetUrl:function(organizationData){var resetUrl=Coursera.config.dir.home+"reset";if(organizationData)resetUrl=Coursera.config.dir.home+"o/"+organizationData.shortName+"/reset";return authUtils.createRedirectUrl(resetUrl,this.options.params)},topLevelDomains:["co.uk","com","net","org","info","edu","gov","mil","fr","de","ru","be","com.ar","es","com.mx","cn"],defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","hotmail.co.uk","yahoo.co.uk","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","outlook.com"],acceptEmailSuggestion:function(){var suggestion=this.$el.find("#coursera-signup-email").data("email-suggestion");this.$el.find("#coursera-signup-email").val(suggestion).trigger("change")},badOrganization:function(){this.renderPage()},renderPage:function(organizationData){var that=this,params=this.options.params,userAction=params&&params.user_action?params.user_action:null,topicName=params&&params.topic_name?params.topic_name:null;this.$el.append(template({_t:_t,config:Coursera.config,signInUrl:this.createSigninUrl(organizationData),resetUrl:this.createResetUrl(organizationData),topicName:topicName,userAction:userAction,organization:organizationData})),this.$el.find("#coursera-signup-email-confirm").data({"data-form-properties":{emailConfirm:_.bind(this.emailConfirm,this)}}).one("focus",function(){that.$el.on("keyup paste cut","#coursera-signup-email",_.bind(that.emailConfirmChange,that))}),this.form=Form(this.$el.find("form.coursera-signup")),this.form.on("change",_.bind(this.inputChange,this)),this.form.on("submit",_.bind(this.formSubmit,this))},render:function(){if(!this.options.params)this.options.params={};var organization=this.options.organization;if(organization)Coursera.api.get("org/"+organization).done(_.bind(this.renderPage,this)).fail(_.bind(this.badOrganization,this));else this.renderPage();return this},emailConfirmChange:function(){this.$el.find("#coursera-signup-email-confirm").trigger("change")},emailConfirm:function(){var email=this.$el.find("#coursera-signup-email").val(),email2=this.$el.find("#coursera-signup-email-confirm").val();return email==email2},inputChange:function(e,status){var $input=$(e.currentTarget);if($input.parents(".control-group").removeClass("success").removeClass("error").removeClass("warning").find(".help-inline").hide(),status.valid){if($input.attr("data-form-correct"))$input.parents(".control-group").addClass("success").find(".help-inline").text($input.attr("data-form-correct")).show();if(this.form.process().valid)this.$el.find(".coursera-signup-button").removeAttr("disabled")}else{if($input.attr("data-form-error"))$input.parents(".control-group").addClass("error").find(".help-inline").text($input.attr("data-form-error")).show();this.$el.find(".coursera-signup-button").attr({disabled:"disabled"})}if($input.attr("data-allow-email-suggestions")){var suggestion=mailcheck.suggest(encodeURI($input.val()),this.defaultDomains,this.topLevelDomains,mailcheck.sift3Distance);if(suggestion){var suggestionText="Did you mean <a class='coursera-signup-email-suggestion-link'>"+suggestion.address+"@<em>"+suggestion.domain+"</em></a>?";$input.parents(".control-group").removeClass("success").addClass("warning").find(".help-inline").html(suggestionText).show(),$input.data("email-suggestion",suggestion.full)}}},formSubmit:function(e,status){e.preventDefault(),status.data.org=this.options.organization;var $form=$(e.currentTarget);if(this.$el.find(".alert-error").hide(),status.valid)this.$(".coursera-signup-button-waiting, .coursera-signup-button").toggle(),Coursera.api.post("signup",{data:status.data,message:"account is being created"}).done(_.bind(this.formSubmitSuccess,this)).fail(_.bind(this.formSubmitError,this));else $form.find(":input").trigger("change"),$form.find("button.coursera-signup-button").animate({opacity:.4},100).animate({"margin-left":"-=10"},100).animate({"margin-left":"+=20"},100).animate({"margin-left":"-=20"},100).animate({"margin-left":"+=10"},100).animate({opacity:1},100)},formSubmitSuccess:function(data,xhr){this.options.params.registered=1;var altRedirect=authUtils.createRedirectUrl(authConfig.coursera_url+"account/signedin",this.options.params);if(this.options.redirect)Coursera.safeRedirect(this.options.redirect,authConfig.coursera_url);else location.href=altRedirect},formSubmitError:function(xhr){if(this.$(".coursera-reporter-link").show(),409==xhr.status||412==xhr.status)this.$el.find("#signup-duplicate").show(),this.$(".coursera-signup-button-waiting, .coursera-signup-button").toggle();else Coursera.router.trigger("error",xhr.status,location.href,{message:"error creating an account"})}});return signUp}),define("pages/auth/account/nls/reset",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,config){buf.push('<div class="container"><div class="coursera-full-canvas"><div class="row"><div class="span12"><div class="heading-banner"><h1>'+jade.escape(null==(jade_interp=_t("Reset your password"))?"":jade_interp)+'</h1></div></div></div><div class="row"><div class="span9 auth-border-right"><div style="padding-top:20px;"><form action="javascript:void(0);" class="coursera-reset-form form-inline"><div role="alert" aria-live="assertive" class="coursera-reset-fail control-group hide error"><span class="help-inline">'+jade.escape(null==(jade_interp=_t("Hmm, we couldn't find an account with the email address"))?"":jade_interp)+' <span class="coursera-reset-email"></span>'+jade.escape(null==(jade_interp=_t(". Check that you entered it correctly, or perhaps consider"))?"":jade_interp)+" <a"+jade.attr("href",config.dir.home+"signup",!0,!1)+' class="internal-auth">'+jade.escape(null==(jade_interp=_t("signing up."))?"":jade_interp)+'</a></span></div><div role="alert" aria-live="assertive" class="coursera-reset-success hide"><p>'+jade.escape(null==(jade_interp=_t("We just sent a password reset email to"))?"":jade_interp)+' <span class="coursera-reset-email"></span>.</p><p>'+jade.escape(null==(jade_interp=_t("When you receive the email, click on the link inside to reset your password."))?"":jade_interp)+"</p><p>"+jade.escape(null==(jade_interp=_t("If you don't see the email after a few minutes, check your spam folder."))?"":jade_interp)+"\n"+jade.escape(null==(jade_interp=_t("If you don't find it in your spam folder, it's possible you registered under a different email address. In that case, try"))?"":jade_interp)+" <a"+jade.attr("href",config.dir.home+"signin",!0,!1)+' class="internal-auth">'+jade.escape(null==(jade_interp=_t("logging in"))?"":jade_interp)+"</a> "+jade.escape(null==(jade_interp=_t("again."))?"":jade_interp)+'</p></div><div class="coursera-reset-fields"><p>'+jade.escape(null==(jade_interp=_t("Enter your email address below. We'll look for your account and send you a password reset email."))?"":jade_interp)+'</p><label for="reset-email" class="coursera-reset-label">'+jade.escape(null==(jade_interp=_t("Email Address"))?"":jade_interp)+'</label><input type="text" title="Your Email Address" id="reset-email"'+jade.attr("placeholder",_t("Your Email Address"),!0,!1)+' class="coursera-reset-input"/><button type="submit" class="btn btn-success coursera-reset-button">'+jade.escape(null==(jade_interp=_t("Send password reset"))?"":jade_interp)+'</button><button class="btn coursera-reset-button-waiting hide"><img'+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+'/></button></div></form></div></div><div style="margin-left:-1px;" class="span3"><div class="auth-no-account-yet"><h3>'+jade.escape(null==(jade_interp=_t("No Account Yet?"))?"":jade_interp)+"</h3><p><a"+jade.attr("href",config.dir.home+"signup",!0,!1)+' class="internal-auth">'+jade.escape(null==(jade_interp=_t("Sign up"))?"":jade_interp)+"</a>"+(null==(jade_interp=_t("&nbsp;today."))?"":jade_interp)+"</p></div></div></div></div></div>")
}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/auth/account/reset.html",["js/lib/jade","i18n!pages/auth/account/nls/reset"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.auth.account.reset"]=jadify(wndw.jade.helpers)}(window),define("pages/auth/account/reset",["underscore","jquery","pages/auth/template/body","js/core/coursera","js/lib/schema","pages/auth/account/reset.html","i18n!pages/auth/account/nls/reset","pages/auth/authConfig","js/lib/placeholder"],function(_,$,body,Coursera,schema,template,_t,authConfig){var reset=body.extend({initialize:function(options){var self=this;this.options=options,document.title="Password Reset | Coursera",self.bind("view:appended",function(){self.$el.find("input[placeholder]").placeholder(),self.$el.find("input#reset-email").focus()})},events:{"submit form.coursera-reset-form":"validate"},render:function(){return this.$el.append(template({_t:_t,config:Coursera.config,coursera_url:authConfig.coursera_url})),this},validate:function(e){e.preventDefault(),this.$(".coursera-reset-fail").hide(),this.$(".coursera-reset-button").hide().attr("disabled","disabled"),this.$(".coursera-reset-button-waiting").show(),this.$(".coursera-reset-email").text(this.$el.find("input#reset-email").val());var data={email:this.$el.find("input#reset-email").val()};if(this.options.organization)data.org=this.options.organization;Coursera.api.post("reset/request",{data:data}).done(_.bind(this.onResetSuccess,this)).fail(_.bind(this.onResetFail,this))},onResetFail:function(data){var self=this;if(403==data.status||401==data.status||409==data.status)self.$(".coursera-reset-fail").show(),self.$(".coursera-reset-button").show().attr("disabled",null),self.$(".coursera-reset-button-waiting").hide(),self.$("button[type=submit]").animate({opacity:.4},100).animate({"margin-left":"-=10"},100).animate({"margin-left":"+=20"},100).animate({"margin-left":"-=20"},100).animate({"margin-left":"+=10"},100).animate({opacity:1},100),self.$el.find("input#reset-email").focus();else Coursera.router.trigger("error",data.status||500,location.href,{message:"error resetting password"})},onResetSuccess:function(data){this.$el.find(".coursera-reset-fail").hide(),this.$el.find(".coursera-reset-fields").hide(),this.$el.find(".coursera-reset-success").show(),this.$el.find("input").prop("disabled",!0)}});return reset}),define("pages/auth/account/nls/resetConfirm",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,config){buf.push('<div class="container"><div class="coursera-full-canvas"><div class="row"><div class="span12"><div class="heading-banner"><h1>'+jade.escape(null==(jade_interp=_t("Password Reset"))?"":jade_interp)+'</h1></div></div></div><div class="row"><div class="span12"><div style="padding-top:20px;"><div class="coursera-reset-checking-token"><img'+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+' style="margin-right: 10px;"/><h4 style="display: inline;">'+jade.escape(null==(jade_interp=_t("Verifying password reset token..."))?"":jade_interp)+'</h4></div><div class="coursera-reset-valid-token hide"><h4 style="display: inline;">'+jade.escape(null==(jade_interp=_t("Changing password for:"))?"":jade_interp)+' <em class="coursera-reset-password-email-placeholder"></em></h4></div><div role="alert" aria-live="assertive" class="coursera-reset-token-missing hide"><span>'+(null==(jade_interp=_t("Uh oh! Your password reset link is missing the token. Please double check that you copied and pasted&nbsp;"))?"":jade_interp)+"</span>"+jade.escape(null==(jade_interp=_t("the entire URL sent in your password request email. If this still doesn't work, please"))?"":jade_interp)+' <a href="http://help.coursera.org/">'+jade.escape(null==(jade_interp=_t("contact us"))?"":jade_interp)+'</a></div><div role="alert" aria-live="assertive" class="coursera-reset-token-failed hide"><p>'+jade.escape(null==(jade_interp=_t("Uh oh! Your password reset token is invalid or has expired!"))?"":jade_interp)+"</p><p>"+jade.escape(null==(jade_interp=_t("Please double check that you copied and pasted the entire URL sent in your password request email, and that you clicked on the link within one hour of receiving it."))?"":jade_interp)+"</p><p>"+jade.escape(null==(jade_interp=_t("If this still doesn't work, please"))?"":jade_interp)+" <a"+jade.attr("href",config.dir.home+"reset",!0,!1)+' class="internal-auth">'+jade.escape(null==(jade_interp=_t("request a new password reset link"))?"":jade_interp)+" </a>"+jade.escape(null==(jade_interp=_t("or"))?"":jade_interp)+' <a href="http://help.coursera.org/">'+jade.escape(null==(jade_interp=_t("contact us"))?"":jade_interp)+'</a></p></div></div><div style="padding-top:20px;"><form action="javascript:void(0);" class="coursera-reset-confirm-form form-horizontal"><div role="alert" aria-live="assertive" class="coursera-reset-confirm-password-mismatch control-group hide error"><span class="help-inline">'+jade.escape(null==(jade_interp=_t("Your passwords do not match, please try again."))?"":jade_interp)+'</span></div><div role="alert" aria-live="assertive" class="coursera-reset-confirm-password-length control-group hide error"><span class="help-inline">'+jade.escape(null==(jade_interp=_t("Please use a stronger password (at least four characters)."))?"":jade_interp)+'</span></div><div role="alert" aria-live="assertive" class="coursera-reset-confirm-success alert alert-success hide"><span>'+jade.escape(null==(jade_interp=_t("Your password was successfully reset, please"))?"":jade_interp)+" </span><a"+jade.attr("href",config.dir.home+"signin",!0,!1)+' class="coursera-sign-in-url">'+jade.escape(null==(jade_interp=_t("sign in"))?"":jade_interp)+"</a><span> "+jade.escape(null==(jade_interp=_t("now"))?"":jade_interp)+'</span></div><div role="alert" aria-live="assertive" class="coursera-reset-confirm-fail alert alert-error hide"><span>'+jade.escape(null==(jade_interp=_t("Error resetting your password! Check that the token is valid and is less than an hour old!"))?"":jade_interp)+'</span></div><div class="coursera-reset-confirm-fields"><div class="control-group"><label class="control-label">'+jade.escape(null==(jade_interp=_t("New Password"))?"":jade_interp)+'</label><div class="controls"><input type="password" name="password"'+jade.attr("placeholder",_t("a new password"),!0,!1)+' disabled="disabled"/></div></div><div class="control-group"><label class="control-label">'+jade.escape(null==(jade_interp=_t("Confirm New Password"))?"":jade_interp)+'</label><div class="controls"><input type="password" name="password_confirm"'+jade.attr("placeholder",_t("repeat new password"),!0,!1)+' disabled="disabled"/></div></div><div class="control-group"><div class="controls"><button type="submit" style="margin-right:10px" disabled="disabled" class="btn btn-success coursera-reset-button">'+jade.escape(null==(jade_interp=_t("Change Password"))?"":jade_interp)+'</button><button class="btn coursera-reset-button-waiting hide"><img'+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+"/></button></div></div></div></form></div></div></div></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/auth/account/resetConfirm.html",["js/lib/jade","i18n!pages/auth/account/nls/resetConfirm"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.auth.account.resetConfirm"]=jadify(wndw.jade.helpers)}(window),define("pages/auth/account/resetConfirm",["underscore","jquery","pages/auth/template/body","js/core/coursera","js/lib/schema","pages/auth/account/resetConfirm.html","i18n!pages/auth/account/nls/resetConfirm","js/lib/cookie","pages/auth/authConfig","js/lib/placeholder"],function(_,$,body,Coursera,schema,template,_t,cookie,authConfig){var signIn=body.extend({initialize:function(options){var that=this;this.options=options,document.title="Password Reset | Coursera",that.bind("view:appended",function(){that.$el.find("input[placeholder]").placeholder(),that.$el.find("input[name=password]").focus()})},events:{"submit form.coursera-reset-confirm-form":"validate"},render:function(){if(this.$el.append(template({_t:_t,config:Coursera.config,coursera_url:authConfig.coursera_url})),null==this.options.token)this.$el.find(".coursera-reset-token-missing").removeClass("hide"),this.$el.find(".coursera-reset-checking-token").hide();else this.$el.find(".coursera-reset-checking-token").show(),Coursera.api.get("reset/token",{data:{token:this.options.token}}).fail(_.bind(this.onTokenFail,this)).done(_.bind(this.onTokenSuccess,this));return this},validate:function(){this.$el.find(".coursera-reset-confirm-password-mismatch").hide(),this.$el.find(".coursera-reset-confirm-password-length").hide();var password=this.$el.find("input[name=password]").val(),passwordConfirm=this.$el.find("input[name=password_confirm]").val();if(password&&password==passwordConfirm)if(password.length>=4)this.$el.find(".coursera-reset-button").hide(),this.$el.find(".coursera-reset-button-waiting").show(),Coursera.api.post("changePassword",{data:{newPassword:password,token:this.options.token}}).fail(_.bind(this.onChangeFail,this)).done(_.bind(this.onChangeSuccess,this));else this.$el.find(".coursera-reset-confirm-password-length").show(),this.$el.find("input[name=password]").focus();else this.$el.find(".coursera-reset-confirm-password-mismatch").show(),this.$el.find("input[name=password]").focus()},onTokenSuccess:function(data){if(this.$el.find(".coursera-reset-checking-token").hide(),this.$el.find(".coursera-reset-password-email-placeholder").text(data.email),this.$el.find(".coursera-reset-valid-token").show(),this.$el.find("input").prop("disabled",!1),this.$el.find(".coursera-reset-button").prop("disabled",!1),"string"==typeof data.org)this.$el.find(".coursera-sign-in-url").attr("href","/o/"+data.org+"?email="+data.email);else this.$el.find(".coursera-sign-in-url").attr("href","/signin?email="+data.email)},onTokenFail:function(data){this.$el.find(".coursera-reset-checking-token").hide(),this.$el.find(".coursera-reset-token-failed").show()},onChangeSuccess:function(data){this.$el.find(".coursera-reset-confirm-success").show(),this.$el.find(".coursera-reset-button-waiting").hide(),this.$el.find("input").prop("disabled",!0)},onChangeFail:function(data){this.$el.find(".coursera-reset-confirm-fail").show(),this.$el.find(".coursera-reset-button-waiting").hide(),this.$el.find(".coursera-reset-button").show()}});return signIn}),define("pages/auth/account/nls/changePassword",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,config){buf.push('<div class="container"><div class="coursera-full-canvas"><div class="row"><div class="span12"><div class="heading-banner"><h1>'+jade.escape(null==(jade_interp=_t("Change your password"))?"":jade_interp)+'</h1></div></div></div><div class="row"><div class="span9 auth-border-right"><div style="padding-top:20px;"><div class="coursera-change-password-checking-login"><img'+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+' style="margin-right: 10px;"/><h4 style="display: inline;">'+jade.escape(null==(jade_interp=_t("Checking your Coursera account..."))?"":jade_interp)+'</h4></div><div class="coursera-change-password-valid-account hide"><h4 style="display: inline;">'+jade.escape(null==(jade_interp=_t("Changing password for:"))?"":jade_interp)+' <em class="coursera-change-password-email-placeholder"></em></h4></div></div><div style="padding-top:20px;"><form action="javascript:void(0);" class="coursera-change-form form-horizontal"><div role="alert" aria-live="assertive" class="coursera-change-fail control-group hide error"><span class="help-inline">'+jade.escape(null==(jade_interp=_t("Uh oh! We weren't able to change your password. Ensure that you entered your old password correctly, or perhaps consider"))?"":jade_interp)+" <a"+jade.attr("href",config.dir.home+"reset",!0,!1)+' class="internal-auth">'+jade.escape(null==(jade_interp=_t("resetting your password."))?"":jade_interp)+'</a></span></div><div role="alert" aria-live="assertive" class="coursera-change-success hide"><p>'+jade.escape(null==(jade_interp=_t("Your password has been successfully changed!"))?"":jade_interp)+'</p></div><div class="coursera-change-fields"><div class="control-group"><label for="change-email" style="margin-right:10px;" class="control-label">'+jade.escape(null==(jade_interp=_t("Old Password"))?"":jade_interp)+'</label><div class="controls"><input style="margin-right:10px;" type="password" title="Old Password" id="oldPassword" disabled="disabled" aria-describedby="coursera-change-oldPassword-help" data-form-required="data-form-required" data-form-schema="string+" data-form-properties="{&quot;min&quot;:4}"'+jade.attr("placeholder",_t("Your current password"),!0,!1)+jade.attr("data-form-error",_t("This doesn't look correct."),!0,!1)+jade.attr("data-form-correct",_t("Thanks!"),!0,!1)+'/><span id="coursera-change-oldPassword-confirm-help" tabindex="-1" class="hide help-inline"></span><p style="margin: 5px 0 0 0;"><a'+jade.attr("href",config.dir.home+"reset",!0,!1)+' class="internal-auth">'+jade.escape(null==(jade_interp=_t("Forgot your password?"))?"":jade_interp)+'</a></p></div></div><div class="control-group"><label for="change-email" style="margin-right:10px;" class="control-label">'+jade.escape(null==(jade_interp=_t("New Password"))?"":jade_interp)+'</label><div class="controls"><input style="margin-right:10px;" type="password" title="New Password" id="newPassword" disabled="disabled" aria-describedby="coursera-change-newPassword-help" data-form-required="data-form-required" data-form-schema="string+" data-form-properties="{&quot;min&quot;:4}"'+jade.attr("placeholder",_t("Your new password"),!0,!1)+jade.attr("data-form-error",_t("Use a stronger password please!."),!0,!1)+jade.attr("data-form-correct",_t("Thanks!"),!0,!1)+'/><span id="coursera-change-newPassword-confirm-help" tabindex="-1" class="hide help-inline"></span></div></div><div class="control-group"><label for="change-email" style="margin-right:10px;" class="control-label">'+jade.escape(null==(jade_interp=_t("Confirm Password"))?"":jade_interp)+'</label><div class="controls"><input style="margin-right:10px;" type="password" title="Confirm New Password" id="newPasswordConfirm" disabled="disabled" aria-describedby="coursera-change-newPasswordConfirm-help" data-form-required="data-form-required" data-form-schema="string+"'+jade.attr("placeholder",_t("Confirm your new password"),!0,!1)+jade.attr("data-form-error",_t("This doesn't match the first password."),!0,!1)+jade.attr("data-form-correct",_t("Thanks!"),!0,!1)+'/><span id="coursera-change-newPasswordConfirm-confirm-help" tabindex="-1" class="hide help-inline"></span></div></div><div class="control-group"><div class="controls"><button type="submit" style="margin-right:10px" disabled="disabled" class="btn btn-success coursera-change-button">'+jade.escape(null==(jade_interp=_t("Change Password"))?"":jade_interp)+'</button><button class="btn coursera-change-button-waiting hide"><img'+jade.attr("src",config.url.assets+"images/icons/loading.gif",!0,!1)+'/></button></div></div></div></form></div></div><div style="margin-left:-1px;" class="span3"><div class="auth-no-account-yet"><h3>'+jade.escape(null==(jade_interp=_t("No Account Yet?"))?"":jade_interp)+"</h3><p><a"+jade.attr("href",config.dir.home+"signup",!0,!1)+' class="internal-auth">'+jade.escape(null==(jade_interp=_t("Sign up"))?"":jade_interp)+"</a>"+(null==(jade_interp=_t("&nbsp;today."))?"":jade_interp)+"</p></div></div></div></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"config"in locals_for_with?locals_for_with.config:"undefined"!=typeof config?config:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/auth/account/changePassword.html",["js/lib/jade","i18n!pages/auth/account/nls/changePassword"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.auth.account.changePassword"]=jadify(wndw.jade.helpers)}(window),define("pages/auth/account/changePassword",["underscore","jquery","pages/auth/template/body","js/core/coursera","js/lib/forms","js/lib/schema","pages/auth/account/changePassword.html","i18n!pages/auth/account/nls/changePassword","pages/auth/authConfig","js/lib/placeholder"],function(_,$,body,Coursera,Form,schema,template,_t,authConfig){var change=body.extend({initialize:function(){var self=this;document.title="Password Change | Coursera",self.bind("view:appended",function(){self.$el.find("input[placeholder]").placeholder(),self.$el.find("input:first").focus()})},render:function(){var that=this;return this.$el.append(template({_t:_t,config:Coursera.config})),this.$el.find(".coursera-change-password-checking-login").show(),Coursera.api.get("user").fail(_.bind(this.onUserFail,this)).done(_.bind(this.onUserSuccess,this)),this.$el.find("#newPasswordConfirm").data({"data-form-properties":{passwordConfirm:that.passwordConfirm(that)}}).one("focus",function(){that.$el.on("keyup paste cut","#newPassword",_.bind(that.passwordConfirmChange,that))}),this.form=Form(this.$el.find("form.coursera-change-form")),this.form.on("change",this.inputChange(this)),this.form.on("submit",this.formSubmit(this)),this},onUserSuccess:function(data){this.$el.find(".coursera-change-password-checking-login").hide(),this.$el.find(".coursera-change-password-email-placeholder").text(data.email),this.$el.find(".coursera-change-password-valid-account").show(),this.$el.find("input").prop("disabled",!1)},onUserFail:function(data){location.href=Coursera.config.dir.home+"signin"},passwordConfirmChange:function(){this.$el.find("#newPasswordConfirm").trigger("change")},passwordConfirm:function(that){return function(){var password=that.$el.find("#newPassword").val(),password2=that.$el.find("#newPasswordConfirm").val();return password==password2}},inputChange:function(that){return function(e,status){var $input=$(e.currentTarget);if($input.parents(".control-group").removeClass("success").removeClass("error").find(".help-inline").hide(),status.valid){if($input.attr("data-form-correct"))$input.parents(".control-group").addClass("success").find(".help-inline").text($input.attr("data-form-correct")).show();if(that.form.process().valid)that.$el.find(".coursera-change-button").removeAttr("disabled")}else{if($input.attr("data-form-error"))$input.parents(".control-group").addClass("error").find(".help-inline").text($input.attr("data-form-error")).show();that.$el.find(".coursera-change-button").attr({disabled:"disabled"})}}},formSubmit:function(that){return function(e,status){e.preventDefault(),that.$(".coursera-change-fail").hide(),that.$(".coursera-change-success").hide(),that.$(".coursera-change-email").text(that.$el.find("input#change-email").val());var $form=that.$(e.currentTarget);if(that.$el.find(".alert-error").hide(),status.valid)that.$(".coursera-change-button-waiting, .coursera-change-button").toggle(),Coursera.api.post("changePassword",{data:{currentPassword:that.$el.find("input#oldPassword").val(),newPassword:that.$el.find("input#newPassword").val()}}).done(_.bind(that.onChangeSuccess,that)).fail(_.bind(that.onChangeFail,that));else $form.find(":input").trigger("change"),that.shakeButton()}},onChangeFail:function(data){var self=this;if(403==data.status||401==data.status||409==data.status)self.$(".coursera-change-fail").show(),self.$(".coursera-change-button").show().prop("disabled",!1),self.$(".coursera-change-button-waiting").hide(),this.shakeButton(),self.$el.find("input#oldPassword").focus();else Coursera.router.trigger("error",data.status||500,location.href,{message:"error changing password"})},shakeButton:function(){this.$("button[type=submit]").animate({opacity:.4},100).animate({"margin-left":"-=10"},100).animate({"margin-left":"+=20"},100).animate({"margin-left":"-=20"},100).animate({"margin-left":"+=10"},100).animate({opacity:1},100)},onChangeSuccess:function(data){this.$el.find(".coursera-change-fail").hide(),this.$el.find(".coursera-change-fields").hide(),this.$el.find(".coursera-change-success").show()}});return change}),define("pages/home/template/body",["underscore","backbone"],function(_,Backbone){var body=Backbone.View.extend({name:"body",attributes:{role:"article"},className:"coursera-body"});return body}),define("pages/error/nls/errorBody",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(status,_t,message){if(buf.push('<div class="container"><div class="coursera-full-canvas"><div class="row"><div class="span12"><div class="heading-banner">'),status)buf.push('<h1 style="font-size:46px;">'+jade.escape(null==(jade_interp=_t("HTTP #{status}",{status:status}))?"":jade_interp)+"</h1><h3>"+jade.escape(null==(jade_interp=_t("...oops!"))?"":jade_interp)+"</h3>");else buf.push("<h3>"+jade.escape(null==(jade_interp=_t("...oops!"))?"":jade_interp)+"</h3>");if(buf.push('</div><div style="font-size:18px;line-height:30px; margin-top:20px;">'),message)buf.push("<p>"+jade.escape(null==(jade_interp=_t(message))?"":jade_interp)+"</p>");else buf.push("<p>"+jade.escape(null==(jade_interp=_t("Sorry, but we ran into an error trying to process your request!"))?"":jade_interp)+" \n"+jade.escape(null==(jade_interp=_t("We'll notify the nearest Coursera Caribou to look into it."))?"":jade_interp)+"\n"+jade.escape(null==(jade_interp=_t("If you'd like to give us more information about the error,"))?"":jade_interp)+"\n"+(null==(jade_interp=_t('please <a href="http://help.coursera.org/customer/portal/emails/new">contact us</a>.'))?"":jade_interp)+"</p><p>"+(null==(jade_interp=_t('You can also visit our <a href="http://help.coursera.org">help site</a> for answers'))?"":jade_interp)+"\n"+jade.escape(null==(jade_interp=_t("to common questions."))?"":jade_interp)+"</p>");buf.push("</div></div></div></div></div>")}("status"in locals_for_with?locals_for_with.status:"undefined"!=typeof status?status:void 0,"_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"message"in locals_for_with?locals_for_with.message:"undefined"!=typeof message?message:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/error/errorBody.html",["js/lib/jade","i18n!pages/error/nls/errorBody"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.error.errorBody"]=jadify(wndw.jade.helpers)}(window),define("pages/error/nls/error404",{es:!0,fr:!0,pt:!0,ru:!0,tr:!0,zh:!0,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":!0}),function(wndw){var jadify=function(jade,_t,_h){var yudify=function template(locals){var buf=[],jade_mixins={},jade_interp,locals_for_with=locals||{};return function(_t,page){if(buf.push('<div class="container"><div class="coursera-full-canvas"><div class="row-fluid"><div class="span12"><h1>'+jade.escape(null==(jade_interp=_t("ooops... HTTP 404"))?"":jade_interp)+'</h1></div></div><div class="coursera-full-page-divider">              </div><div class="row-fluid"><div class="span12"><p>'+jade.escape(null==(jade_interp=_t("Looks like you found a page that does not exist or the URL was mistyped by accident."))?"":jade_interp)+"</p>"),-1!=page.indexOf("?"))buf.push("<p><span>"+(null==(jade_interp=_t("May we suggest trying the following URL:&nbsp;"))?"":jade_interp)+"</span><a"+jade.attr("href",page.substring(0,page.indexOf("?")),!0,!1)+">"+jade.escape(null==(jade_interp=_t(page.substring(0,page.indexOf("?"))))?"":jade_interp)+"</a></p>");buf.push("<p>"+(null==(jade_interp=_t('If you feel this was an error, please visit our <a href="http://help.coursera.org">help site</a> to contact us.'))?"":jade_interp)+"</p></div></div></div></div>")}("_t"in locals_for_with?locals_for_with._t:"undefined"!=typeof _t?_t:void 0,"page"in locals_for_with?locals_for_with.page:"undefined"!=typeof page?page:void 0),buf.join("")};return function(locals){if(locals)if(locals._t)_t=locals._t.merge(_t);return yudify(locals)}};if("function"==typeof define&&define.amd)define("pages/error/error404.html",["js/lib/jade","i18n!pages/error/nls/error404"],function(jade,_t){var _h;return jadify(jade,_t,_h)});else wndw.jade.templates["pages.error.error404"]=jadify(wndw.jade.helpers)}(window),define("pages/error/errorBody",["pages/home/template/body","js/core/coursera","pages/error/errorBody.html","i18n!pages/error/nls/errorBody","pages/error/error404.html","i18n!pages/error/nls/error404"],function(body,Coursera,template,_t,template404,_t404){var error=body.extend({initialize:function(options){if(options)this.options=options},render:function(){if(Coursera.multitracker.push(["page.error",{status:this.options.status,url:location.href}]),404==this.options.status)this.$el.append(template404({_t:_t404,page:location.href}));else this.$el.append(template({_t:_t,status:this.options.status,message:this.options.message}));return this}});return error}),define("pages/auth/routes",["jquery","underscore","backbone","pages/auth/app","js/core/config","pages/auth/models/user.json","js/lib/third-parties","js/lib/backbone.queryparams.0.2.4","pages/auth/authConfig","pages/auth/template/page","pages/auth/template/header","pages/auth/template/banner","pages/auth/template/footer","pages/auth/account/signInBody","pages/auth/account/signUpBody","pages/auth/account/reset","pages/auth/account/resetConfirm","pages/auth/account/changePassword","pages/error/errorBody"],function($,_,Backbone,Coursera,config,user){var routes={},home=config.dir.home.replace(/^\//,"");routes[home+"logout"]=function(){Coursera.api.get("user/logout").done(function(){Coursera.user.logout(),Coursera.region.open({"pages/home/template/page":{regions:{header:{"pages/auth/appconsole/template/header":{id:"header-logout"}},body:{"pages/home/front/frontBody":{id:"listings"}},banner:{"pages/home/account/logoutBanner":{id:"logout"}}}}})})},routes[home]=function(params,organization){Coursera.region.open({"pages/auth/template/page":{regions:{header:{"pages/auth/template/header":{id:"signinup"}},body:{"pages/auth/account/signInBody":{id:"signin",initialize:{params:params,organization:organization}}}}}})},routes[home+"signin"]=routes[home],routes[home+"signup"]=function(params,organization){var redirect=params&&params.r?params.r:null;Coursera.region.open({"pages/auth/template/page":{regions:{header:{"pages/auth/template/header":{id:"signinup",initialize:{params:params}}},body:{"pages/auth/account/signUpBody":{id:"signup",initialize:{redirect:redirect,params:params,organization:organization}}}}}})},routes[home+"mobilesignup"]=function(params){if(void 0===params)params={is_mobile_app:!0};else params.is_mobile_app=!0;routes[home+"signup"](params)},routes[home+"o/:org"]=function(org,params){routes[home+"signin"](params,org)},routes[home+"o/:org/signin"]=routes[home+"o/:org"],routes[home+"o/:org/register"]=function(org,params){routes[home+"signup"](params,org)},routes[home+"reset"]=function(params,org){Coursera.region.open({"pages/auth/template/page":{regions:{body:{"pages/auth/account/reset":{initialize:{organization:org}}}}}})},routes[home+"reset/confirm"]=function(params,org){var token=params&&params.token?params.token:null;Coursera.region.open({"pages/auth/template/page":{regions:{body:{"pages/auth/account/resetConfirm":{initialize:{token:token,organization:org}}}}}})},routes[home+"o/:org/reset"]=function(org,params){routes[home+"reset"](params,org)},routes[home+"o/:org/reset/confirm"]=function(org,params){routes[home+"reset/confirm"](params,org)},routes[home+"change"]=function(){Coursera.region.open({"pages/auth/template/page":{regions:{body:"pages/auth/account/changePassword"}}})},routes[home+"error/:id"]=function(id){var status=parseInt(id,10);if(_.isNumber(status)&&status>=300&&500>=status)Coursera.region.open({"pages/auth/template/page":{regions:{body:{"pages/error/errorBody":{id:"error",initialize:{status:status}}}}}});else Coursera.router.trigger("error",404,location.href)},Coursera.router.on("error",function(code,url,message){Coursera.multitracker.push(["page.error",{code:code,url:url||location.href,message:message||""}]),routes[home+"error/:id"](code)}),Coursera.router.setupLinks(Coursera.config.url.base,"internal-auth"),Coursera.router.addRoutes(routes),$(document).ready(function(){if(Coursera.multitracker.get("204").queue.push(["client","auth"]),!Backbone.history.start({pushState:!0}))Coursera.router.trigger("error",404)})});